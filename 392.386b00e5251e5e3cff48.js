(self.webpackChunk_fuse_demo=self.webpackChunk_fuse_demo||[]).push([[392],{95392:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SellerModule:()=>y});var s=i(38583),n=i(82808),r=i(8394),a=i(84900),o=i(4083),l=i(44466),c=i(95987),d=i(5396),g=i(88642),u=i(37716),p=i(73868),Z=i(40704),_=i(1400),A=i(22238),m=i(51095),h=i(11436),v=i(76627),f=i(12178),T=i(33935);function E(e,t){1&e&&u._UZ(0,"mat-progress-bar",19),2&e&&u.Q6J("mode","indeterminate")}function x(e,t){1&e&&u._UZ(0,"mat-progress-bar",19),2&e&&u.Q6J("mode","indeterminate")}function S(e,t){if(1&e&&(u.TgZ(0,"div",20),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(2),u.Oqu(e("NO_DEAL"))}}function q(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",21),u.TgZ(1,"div",10),u._uU(2),u.ALo(3,"date"),u.qZA(),u.TgZ(4,"div",10),u.TgZ(5,"div",22),u.TgZ(6,"p",23),u._uU(7),u.qZA(),u.TgZ(8,"p",24),u.TgZ(9,"a",25),u._uU(10),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"div",22),u.TgZ(12,"p",23),u._uU(13),u.qZA(),u.TgZ(14,"p",24),u.TgZ(15,"a",25),u._uU(16),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"div",11),u.TgZ(18,"div",22),u.TgZ(19,"p",23),u._uU(20),u.qZA(),u.TgZ(21,"p",24),u._uU(22),u.qZA(),u.qZA(),u.TgZ(23,"div",22),u.TgZ(24,"p",23),u._uU(25),u.qZA(),u.TgZ(26,"p",24),u._uU(27),u.qZA(),u.qZA(),u.TgZ(28,"div",22),u.TgZ(29,"p",23),u._uU(30),u.qZA(),u.TgZ(31,"p",24),u._uU(32),u.qZA(),u.qZA(),u.TgZ(33,"div",22),u.TgZ(34,"p",23),u._uU(35),u.qZA(),u.TgZ(36,"p",24),u._uU(37),u.ALo(38,"date"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(39,"div",10),u._uU(40),u.ALo(41,"number"),u.qZA(),u.TgZ(42,"div",10),u._uU(43),u.qZA(),u.TgZ(44,"div"),u.TgZ(45,"button",26),u._UZ(46,"mat-icon",27),u.qZA(),u.TgZ(47,"mat-menu",null,28),u.TgZ(49,"button",29),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw(2).presentConfirmDeal(t)}),u._UZ(50,"mat-icon",30),u.TgZ(51,"span"),u._uU(52),u.qZA(),u.qZA(),u.TgZ(53,"button",29),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw(2).presentCancelDeal(t)}),u._UZ(54,"mat-icon",31),u.TgZ(55,"span"),u._uU(56),u.qZA(),u.qZA(),u.TgZ(57,"button",32),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw(2).presentRateOrder(t)}),u._UZ(58,"mat-icon",33),u.TgZ(59,"span"),u._uU(60),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,i=u.MAs(48),s=u.oxw().$implicit,n=u.oxw();u.xp6(2),u.hij(" ",u.xi3(3,22,1e3*e.add_time,"dd/MM/yyyy")," "),u.xp6(5),u.hij(" ",s("FARM_NAME")," "),u.xp6(2),u.MGl("routerLink","/farm/",e.farm_code,""),u.xp6(1),u.hij(" ",e.farm_name," "),u.xp6(3),u.hij(" ",s("POND")," "),u.xp6(2),u.MGl("routerLink","/pond/",e.pond_code,""),u.xp6(1),u.hij(" ",e.pond_name," "),u.xp6(4),u.hij(" ",s("SPECIES")," "),u.xp6(2),u.hij(" ",e.species_name," "),u.xp6(3),u.hij(" ",s("SIZE")," "),u.xp6(2),u.hij(" ",e.require_size," "),u.xp6(3),u.hij(" ",s("PRICE")," "),u.xp6(2),u.hij(" ",e.require_price," "),u.xp6(3),u.hij(" ",s("REQ_DATE")," "),u.xp6(2),u.hij(" ",u.xi3(38,25,1e3*e.require_time,"dd/MM/yyyy")," "),u.xp6(3),u.hij(" ",u.xi3(41,28,e.deposit,"0.0-0")," \u0111 "),u.xp6(3),u.hij(" ",n.listOrderStatus[e.status]," "),u.xp6(2),u.Q6J("matMenuTriggerFor",i),u.xp6(7),u.Oqu(s("CONFIRM")),u.xp6(4),u.Oqu(s("CANCEL")),u.xp6(1),u.Q6J("disabled","order"==e.status||"confirm"==e.status||"cancel"==e.status),u.xp6(3),u.Oqu(s("RATE"))}}function R(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"div",5),u.TgZ(6,"div"),u.TgZ(7,"div",6),u._uU(8),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",7),u.TgZ(10,"div",8),u.TgZ(11,"div",9),u.TgZ(12,"div",10),u._uU(13),u.qZA(),u.TgZ(14,"div",10),u._uU(15),u.qZA(),u.TgZ(16,"div",11),u._uU(17),u.qZA(),u.TgZ(18,"div",12),u._uU(19),u.TgZ(20,"button",13),u._UZ(21,"mat-icon",14),u.qZA(),u.qZA(),u.TgZ(22,"div",10),u._uU(23),u.qZA(),u.TgZ(24,"div"),u._uU(25),u.qZA(),u.qZA(),u.TgZ(26,"div"),u.YNc(27,E,1,1,"mat-progress-bar",15),u.qZA(),u.TgZ(28,"div"),u.YNc(29,x,1,1,"mat-progress-bar",15),u.qZA(),u.YNc(30,S,3,1,"div",16),u.TgZ(31,"div",17),u.YNc(32,q,61,31,"div",18),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.BQk()),2&e){const e=t.$implicit,i=u.oxw();u.xp6(8),u.Oqu(e("TITLE")),u.xp6(5),u.hij(" ",e("DAY")," "),u.xp6(2),u.hij(" ",e("FARM")," "),u.xp6(2),u.hij(" ",e("REQUIREMENTS")," "),u.xp6(2),u.hij(" ",e("DEPOSIT")," "),u.xp6(1),u.Q6J("matTooltip",e("DEPOSIT_NOTE")),u.xp6(1),u.Q6J("svgIcon","heroicons_outline:question-mark-circle"),u.xp6(2),u.hij(" ",e("STATUS")," "),u.xp6(2),u.hij(" ",e("ACTIONS")," "),u.xp6(2),u.Q6J("ngIf",i.loadingFlag.pending),u.xp6(2),u.Q6J("ngIf",i.savingFlag.pending),u.xp6(1),u.Q6J("ngIf",i.loadingFlag.result&&!i.dealList.length),u.xp6(2),u.Q6J("ngForOf",i.dealList)}}let L=(()=>{class e{constructor(e,t,i,s,n){this._marketService=e,this._alertService=t,this._translateService=i,this._fuseConfirmationService=s,this._matDialog=n,this.loadingFlag=new d.E,this.savingFlag=new d.E,this.listOrderStatus={order:this._translateService.translate("MARKET.SELLER_DEAL.ORDERED"),confirm:this._translateService.translate("MARKET.SELLER_DEAL.CONFIRMED"),deposit_reveived:this._translateService.translate("MARKET.SELLER_DEAL.DEPOSIT_RECEIVED"),success:this._translateService.translate("MARKET.SELLER_DEAL.SUCCESS"),deposit_paid:this._translateService.translate("MARKET.SELLER_DEAL.RETURNED_DEPOSIT"),cancel:this._translateService.translate("MARKET.SELLER_DEAL.CANCELED")}}ngOnInit(){this.listSellerDeal()}listSellerDeal(){this.loadingFlag.setPending(!0),this._marketService.sellerListDeal().pipe().subscribe(e=>{0==e.status?(this._alertService.error(e.error),this.loadingFlag.setResult(!1)):(this.dealList=e.data,this.loadingFlag.setResult(!0))},e=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}presentConfirmDeal(e){this._fuseConfirmationService.open({title:this._translateService.translate("MARKET.SELLER_DEAL.CONFIRM_TITLE"),message:this._translateService.translate("MARKET.SELLER_DEAL.CONFIRM_NOTE"),actions:{confirm:{label:this._translateService.translate("CONFIRM")},cancel:{label:this._translateService.translate("CANCEL")}}}).afterClosed().subscribe(t=>{t&&"confirmed"==t&&this.dealAction(e,!0)})}presentCancelDeal(e){this._fuseConfirmationService.open({title:this._translateService.translate("FARM.MANAGER.WARN"),message:this._translateService.translate("MARKET.SELLER_DEAL.CANCEL_NOTE"),actions:{confirm:{label:this._translateService.translate("CONFIRM")},cancel:{label:this._translateService.translate("CANCEL")}}}).afterClosed().subscribe(t=>{t&&"confirmed"==t&&this.dealAction(e,!1)})}dealAction(e,t){this.savingFlag.setPending(!0),this._marketService.dealAction(e.season_code,{bill_id:e.id,action:t?"confirm":"cancel"}).pipe().subscribe(e=>{0==e.status?this._alertService.error(e.error):(this._alertService.success(this._translateService.translate(t?"MARKET.SELLER_DEAL.CONFIRM_SUCCESS":"MARKET.SELLER_DEAL.CANCEL_SUCCESS")),this.listSellerDeal()),this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}presentRateOrder(e){this._matDialog.open(g.r,{autoFocus:!1,data:{isSeller:!0,id:e.id}}).afterClosed().subscribe(e=>{e&&this.listSellerDeal()})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(p.j),u.Y36(Z.c),u.Y36(r.Vn),u.Y36(_.R),u.Y36(A.uw))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-list-deal"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto"],[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"bg-card","shadow","rounded-2xl","overflow-hidden","w-full","mt-8"],[1,"grid"],[1,"grid-cols-12","z-10","sticky","top-0","grid","gap-4","py-4","px-8","shadow","text-md","font-semibold","bg-gray-50","items-center"],[1,"col-span-2"],[1,"col-span-3"],[1,"col-span-2","flex","flex-row","items-center"],["mat-icon-button","","matTooltipPosition","above","matTooltipClass","text-base",3,"matTooltip"],[1,"icon-size-4","text-current",3,"svgIcon"],[3,"mode",4,"ngIf"],["class","mt-3 p-6 bg-card shadow rounded-2xl overflow-hidden text-lg font-medium",4,"ngIf"],[1,"max-h-160","overflow-y-auto"],["class","grid-cols-12 grid items-center gap-4 py-3 px-8 border-b",4,"ngFor","ngForOf"],[3,"mode"],[1,"mt-3","p-6","bg-card","shadow","rounded-2xl","overflow-hidden","text-lg","font-medium"],[1,"grid-cols-12","grid","items-center","gap-4","py-3","px-8","border-b"],[1,"grid-cols-12","grid","items-center"],[1,"col-span-4"],[1,"col-span-8"],[1,"text-default","hover:text-blue-500",3,"routerLink"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","heroicons_outline:dots-vertical"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","heroicons_outline:check"],["svgIcon","heroicons_outline:x",1,"text-red-500"],["mat-menu-item","",3,"disabled","click"],["svgIcon","heroicons_outline:star"]],template:function(e,t){1&e&&u.YNc(0,R,33,13,"ng-container",0),2&e&&u.Q6J("translocoRead","MARKET.SELLER_DEAL")},directives:[r.KI,m.lW,h.gM,v.Hw,s.O5,s.sg,f.pW,c.yS,T.p6,T.VK,T.OP],pipes:[s.uU,s.JJ],styles:[""]}),e})();function b(e,t){1&e&&u._UZ(0,"mat-progress-bar",16),2&e&&u.Q6J("mode","indeterminate")}function C(e,t){1&e&&u._UZ(0,"mat-progress-bar",16),2&e&&u.Q6J("mode","indeterminate")}function U(e,t){if(1&e&&(u.TgZ(0,"div",17),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(2),u.Oqu(e("NO_OFFER"))}}function O(e,t){1&e&&(u.TgZ(0,"button",27),u._UZ(1,"mat-icon",28),u.qZA())}function N(e,t){1&e&&(u.TgZ(0,"button",27),u._UZ(1,"mat-icon",29),u.qZA())}function M(e,t){if(1&e&&(u.TgZ(0,"div",18),u.TgZ(1,"div",10),u._uU(2),u.ALo(3,"date"),u.qZA(),u.TgZ(4,"div",10),u.TgZ(5,"a",19),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"div",10),u.TgZ(8,"a",19),u._uU(9),u.qZA(),u.qZA(),u.TgZ(10,"div",10),u._uU(11),u.ALo(12,"date"),u.qZA(),u.TgZ(13,"div",11),u.YNc(14,O,2,0,"button",20),u.YNc(15,N,2,0,"button",20),u.qZA(),u.TgZ(16,"div",10),u._uU(17),u.qZA(),u.TgZ(18,"div"),u.TgZ(19,"button",21),u._UZ(20,"mat-icon",22),u.qZA(),u.TgZ(21,"mat-menu",null,23),u.TgZ(23,"button",24),u._UZ(24,"mat-icon",25),u.TgZ(25,"span"),u._uU(26,"..."),u.qZA(),u.qZA(),u.TgZ(27,"button",24),u._UZ(28,"mat-icon",26),u.TgZ(29,"span"),u._uU(30,"..."),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e){const e=t.$implicit,i=u.MAs(22);u.xp6(2),u.hij(" ",u.xi3(3,11,1e3*e.add_time,"dd/MM/yyyy")," "),u.xp6(3),u.MGl("routerLink","/pond/",e.pond_code,""),u.xp6(1),u.hij(" ",e.pond_name," "),u.xp6(2),u.hYB("routerLink","/pond/",e.pond_code,"/season/list/",e.season_code,""),u.xp6(1),u.hij(" ",e.season_code," "),u.xp6(2),u.hij(" ",u.xi3(12,14,1e3*e.start_time,"dd/MM/yyyy")," "),u.xp6(3),u.Q6J("ngIf",e.approved),u.xp6(1),u.Q6J("ngIf",!e.approved),u.xp6(2),u.hij(" ",e.description," "),u.xp6(2),u.Q6J("matMenuTriggerFor",i)}}function I(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"div",5),u.TgZ(6,"div"),u.TgZ(7,"div",6),u._uU(8),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",7),u.TgZ(10,"div",8),u.TgZ(11,"div",9),u.TgZ(12,"div",10),u._uU(13),u.qZA(),u.TgZ(14,"div",10),u._uU(15),u.qZA(),u.TgZ(16,"div",10),u._uU(17),u.qZA(),u.TgZ(18,"div",10),u._uU(19),u.qZA(),u.TgZ(20,"div",11),u._uU(21),u.qZA(),u.TgZ(22,"div",10),u._uU(23),u.qZA(),u.TgZ(24,"div"),u._uU(25),u.qZA(),u.qZA(),u.TgZ(26,"div"),u.YNc(27,b,1,1,"mat-progress-bar",12),u.qZA(),u.TgZ(28,"div"),u.YNc(29,C,1,1,"mat-progress-bar",12),u.qZA(),u.YNc(30,U,3,1,"div",13),u.TgZ(31,"div",14),u.YNc(32,M,31,17,"div",15),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.BQk()),2&e){const e=t.$implicit,i=u.oxw();u.xp6(8),u.Oqu(e("TITLE")),u.xp6(5),u.hij(" ",e("DATE")," "),u.xp6(2),u.hij(" ",e("POND")," "),u.xp6(2),u.hij(" ",e("SEASON_CODE")," "),u.xp6(2),u.hij(" ",e("START_TIME")," "),u.xp6(2),u.hij(" ",e("APPROVED")," "),u.xp6(2),u.hij(" ",e("DESCRIPTION")," "),u.xp6(2),u.hij(" ",e("ACTIONS")," "),u.xp6(2),u.Q6J("ngIf",i.loadingFlag.pending),u.xp6(2),u.Q6J("ngIf",i.savingFlag.pending),u.xp6(1),u.Q6J("ngIf",i.loadingFlag.result&&!i.offerList.length),u.xp6(2),u.Q6J("ngForOf",i.offerList)}}let w=(()=>{class e{constructor(e,t,i,s){this._marketService=e,this._alertService=t,this._translateService=i,this._fuseConfirmationService=s,this.loadingFlag=new d.E,this.savingFlag=new d.E}ngOnInit(){this.listSellerOffer()}listSellerOffer(){this.loadingFlag.setPending(!0),this._marketService.sellerListOffer().pipe().subscribe(e=>{0==e.status?(this._alertService.error(e.error),this.loadingFlag.setResult(!1)):(this.offerList=e.data,this.loadingFlag.setResult(!0))},e=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}presentConfirmDeal(e){this._fuseConfirmationService.open({title:this._translateService.translate("MARKET.SELLER_DEAL.CONFIRM_TITLE"),message:this._translateService.translate("MARKET.SELLER_DEAL.CONFIRM_NOTE"),actions:{confirm:{label:this._translateService.translate("CONFIRM")},cancel:{label:this._translateService.translate("CANCEL")}}}).afterClosed().subscribe(t=>{t&&"confirmed"==t&&this.dealAction(e,!0)})}presentCancelDeal(e){this._fuseConfirmationService.open({title:this._translateService.translate("FARM.MANAGER.WARN"),message:this._translateService.translate("MARKET.SELLER_DEAL.CANCEL_NOTE"),actions:{confirm:{label:this._translateService.translate("CONFIRM")},cancel:{label:this._translateService.translate("CANCEL")}}}).afterClosed().subscribe(t=>{t&&"confirmed"==t&&this.dealAction(e,!1)})}dealAction(e,t){this.savingFlag.setPending(!0),this._marketService.dealAction(e.season_code,{bill_item:e.item_offer_id,action:t?"confirm":"cancel"}).pipe().subscribe(e=>{0==e.status?this._alertService.error(e.error):(this._alertService.success(this._translateService.translate(t?"MARKET.SELLER_DEAL.CONFIRM_SUCCESS":"MARKET.SELLER_DEAL.CANCEL_SUCCESS")),this.listSellerOffer()),this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(p.j),u.Y36(Z.c),u.Y36(r.Vn),u.Y36(_.R))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-list-offer"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto"],[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"bg-card","shadow","rounded-2xl","overflow-hidden","w-full","mt-8"],[1,"grid"],[1,"grid-cols-12","z-10","sticky","top-0","grid","gap-4","py-4","px-8","shadow","text-md","font-semibold","bg-gray-50","items-center"],[1,"col-span-2"],[1,"col-span-1"],[3,"mode",4,"ngIf"],["class","mt-3 p-6 bg-card shadow rounded-2xl overflow-hidden text-lg font-medium",4,"ngIf"],[1,"max-h-160","overflow-y-auto"],["class","grid-cols-12 grid items-center gap-4 py-3 px-8 border-b",4,"ngFor","ngForOf"],[3,"mode"],[1,"mt-3","p-6","bg-card","shadow","rounded-2xl","overflow-hidden","text-lg","font-medium"],[1,"grid-cols-12","grid","items-center","gap-4","py-3","px-8","border-b"],[1,"text-default","hover:text-blue-500",3,"routerLink"],["mat-icon-button","",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","heroicons_outline:dots-vertical"],["menu","matMenu"],["mat-menu-item",""],["svgIcon","heroicons_outline:check"],["svgIcon","heroicons_outline:x",1,"text-red-500"],["mat-icon-button",""],["svgIcon","heroicons_outline:check",1,"text-green-500"],["svgIcon","heroicons_outline:x"]],template:function(e,t){1&e&&u.YNc(0,I,33,12,"ng-container",0),2&e&&u.Q6J("translocoRead","MARKET.SELLER_OFFER")},directives:[r.KI,s.O5,s.sg,f.pW,c.yS,m.lW,T.p6,v.Hw,T.VK,T.OP],pipes:[s.uU],styles:[""]}),e})();const F=[{path:"",component:(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-seller"]],decls:2,vars:0,consts:[[1,"w-full"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"router-outlet"),u.qZA())},directives:[c.lC],styles:[""]}),e})(),children:[{path:"list-deal",component:L},{path:"list-offer",component:w},{path:"",redirectTo:"list-deal",pathMatch:"full"}]}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[c.Bz.forChild(F)],c.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.ez,D,r.y4,l.m,o.q,n.PU,a.Z]]}),e})()}}]);