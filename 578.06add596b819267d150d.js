(self.webpackChunk_fuse_demo=self.webpackChunk_fuse_demo||[]).push([[578],{49457:function(t,e){var i,r;void 0===(r="function"==typeof(i=function(){"use strict";function e(t,e,i){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,e,i)},r.onerror=function(){console.error("could not download file")},r.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,s,a){var n=o.URL||o.webkitURL,l=document.createElement("a");l.download=s=s||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?r(l):i(l.href)?e(t,s,a):r(l,l.target="_blank")):(l.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,s){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,s),o);else if(i(t))e(t,o,s);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){r(a)})}}:function(t,i,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,r);var n="application/octet-stream"===t.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||n&&l||s)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},d.readAsDataURL(t)}else{var u=o.URL||o.webkitURL,p=u.createObjectURL(t);a?a.location=p:location.href=p,a=null,setTimeout(function(){u.revokeObjectURL(p)},4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?i.apply(e,[]):i)||(t.exports=r)},20588:(t,e,i)=>{"use strict";i.r(e),i.d(e,{StoreModule:()=>we});var r=i(38583),o=i(82808),s=i(8394),a=i(84900),n=i(4083),l=i(44466),c=i(93104),d=i(95987),u=i(3679),p=i(5396),g=i(37716),m=i(22238),h=i(47101),f=i(40704),Z=i(51095),x=i(76627),v=i(98295),_=i(49983),T=i(12178);function A(t,e){1&t&&g._UZ(0,"mat-progress-bar",14),2&t&&g.Q6J("mode","indeterminate")}let b=(()=>{class t{constructor(t,e,i,r,o,s){this.dialogRef=t,this._formBuilder=e,this._storeService=i,this._translateService=r,this._alertService=o,this._router=s,this.savingFlag=new p.E}ngOnInit(){this.validatorsStoreForm()}validatorsStoreForm(){this.storeCreateForm=this._formBuilder.group({name:["",[u.kI.required]],description:["",[u.kI.required]],area:["",[u.kI.required]]})}validNo(t){const e=t.which?t.which:t.keycode;return!(e>31&&(e<46||e>58))}handleSubmitForm(){this.savingFlag.setPending(!0);let t={name:this.storeCreateForm.value.name,description:this.storeCreateForm.value.description,area:this.storeCreateForm.value.area};console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> params",t),this.storeCreateForm.valid&&this._storeService.createStore(t).subscribe(t=>{1===t.status?(this._router.navigate(["store/"+this._storeService.fcode+"/list-store"]),this.dialogRef.close(!0)):this._alertService.error(t.message),this.savingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.savingFlag.setResult(!1)})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.so),g.Y36(u.qu),g.Y36(h.d),g.Y36(s.Vn),g.Y36(f.c),g.Y36(d.F0))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-add"]],decls:30,vars:7,consts:[[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto","sm:pb-0",3,"formGroup"],[3,"mode",4,"ngIf"],["appearance","fill",1,"example-full-width"],["matInput","","type","text","formControlName","name","required",""],["matInput","","min","0","type","number","formControlName","area","required","",3,"keypress"],["matInput","","required","","formControlName","description"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-stroked-button","","mat-dialog-close","",1,"fuse-mat-button","mr-3",3,"color"],["mat-flat-button","",1,"fuse-mat-button",3,"color","disabled","click"],[3,"mode"]],template:function(t,e){1&t&&(g.ynx(0),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g._uU(4,"T\u1ea1o Kho"),g.qZA(),g.TgZ(5,"button",3),g._UZ(6,"mat-icon",4),g.qZA(),g.qZA(),g.TgZ(7,"div",5),g.TgZ(8,"div"),g.YNc(9,A,1,1,"mat-progress-bar",6),g.qZA(),g.TgZ(10,"mat-form-field",7),g.TgZ(11,"mat-label"),g._uU(12,"T\xean kho"),g.qZA(),g._UZ(13,"input",8),g.qZA(),g.TgZ(14,"mat-form-field",7),g.TgZ(15,"mat-label"),g._uU(16,"Di\u1ec7n t\xedch "),g.qZA(),g.TgZ(17,"input",9),g.NdJ("keypress",function(t){return e.validNo(t)}),g.qZA(),g.qZA(),g.TgZ(18,"mat-form-field",7),g.TgZ(19,"mat-label"),g._uU(20,"M\xf4 t\u1ea3"),g.qZA(),g.TgZ(21,"textarea",10),g._uU(22,"                    "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(23,"div",11),g.TgZ(24,"button",12),g.TgZ(25,"span"),g._uU(26," H\u1ee7y "),g.qZA(),g.qZA(),g.TgZ(27,"button",13),g.NdJ("click",function(){return e.handleSubmitForm()}),g.TgZ(28,"span"),g._uU(29," L\u01b0u "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t&&(g.xp6(5),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(1),g.Q6J("formGroup",e.storeCreateForm),g.xp6(2),g.Q6J("ngIf",e.savingFlag.pending),g.xp6(15),g.Q6J("color","secondary"),g.xp6(3),g.Q6J("color","primary")("disabled",e.storeCreateForm.invalid))},directives:[Z.lW,m.ZT,x.Hw,u.JL,u.sg,r.O5,v.KE,v.hX,_.Nt,u.Fj,u.JJ,u.u,u.Q7,u.qQ,u.wV,T.pW],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),t})(),q=(()=>{class t{constructor(t,e){this._storeService=t,this._alertService=e,this.loadingFlag=new p.E,this.analyzeStore=[],this.detailStoreList=[],this.chartOption={},this.chartPerDayDate={},this.usePerDayNameKey={},this.usePerDayNameValues={},this.usePerDayDate={},this.storeNames={}}ngOnInit(){this.getDataAnalyzeStore(),this.initChartDay()}getDataAnalyzeStore(){this.loadingFlag.setPending(!0),this._storeService.getAnalyzeStore().subscribe(t=>{if(1==t.status&&t.data){this.costPerDay=t.data.costPerDay,this.usePerDay=t.data.usePerDay;let e=[],i=[],r=[];for(let t in this.usePerDay){r.push(t);for(let r in this.usePerDay[t])-1==e.indexOf(r)&&(e.push(r),i.push({name:r,type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}))}r.forEach(t=>{for(var r=0;r<e.length;r++){var o=0;this.usePerDay[t][e[r]]&&(o=+(+this.usePerDay[t][e[r]]).toFixed(0)),i[r].data.push(o),this.usePerDayNameValues=i[r].data,this.usePerDayNameKey=i[r].name}}),this.usePerDayDate=r,this.chartOption={legend:{data:this.usePerDayNameKey,left:"10%"},tooltip:{},xAxis:{data:this.usePerDayDate,axisLine:{onZero:!0},splitLine:{show:!1},splitArea:{show:!1}},yAxis:{},grid:{bottom:100},series:i,color:["#5470C6","#91CC75","#FAC858","#EE6666"]};let o=[],s=[];this.costPerDay.forEach(t=>{o.push(t.date),s.push(t.total)}),this.costPerDayDate=o,this.costPerDayTotal=s,this.initChartDay()}else this._alertService.error(t.message);this.loadingFlag.setResult(!0)})}initChartDay(){console.log("tesst",this.chartPerDayDate),this.chartPerDayDate={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["Chi Ph\xed"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.costPerDayDate,axisPointer:{type:"shadow"}}],yAxis:[{type:"value"}],series:[{name:"Chi Ph\xed",type:"bar",tooltip:{valueFormatter:function(t){return t+" ml"}},data:this.costPerDayTotal,color:"#5470C6"}]}}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(h.d),g.Y36(f.c))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-chart"]],decls:16,vars:2,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","items-center","justify-between","pb-8"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"flex","flex-col","flex-auto","w-full"],[1,"p-2"],[1,"text-chart","text-center"],["echarts","",1,"demoChart",3,"options"]],template:function(t,e){1&t&&(g.ynx(0),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g.TgZ(4,"div",3),g._uU(5," Kho "),g.qZA(),g._UZ(6,"div",4),g.qZA(),g.TgZ(7,"div",5),g.TgZ(8,"div",6),g.TgZ(9,"p",7),g._uU(10,"T\u1ed5ng l\u01b0\u1ee3ng"),g.qZA(),g._UZ(11,"div",8),g.qZA(),g.TgZ(12,"div",6),g._UZ(13,"div",8),g.TgZ(14,"p",7),g._uU(15,"T\u1ed5ng Chi Ph\xed"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t&&(g.xp6(11),g.Q6J("options",e.chartOption),g.xp6(2),g.Q6J("options",e.chartPerDayDate))},directives:[c.w],styles:[""]}),t})();var S=i(16738),w=i.n(S),I=i(82613);function y(t,e){1&t&&g._UZ(0,"mat-progress-bar",22),2&t&&g.Q6J("mode","indeterminate")}let U=(()=>{class t{constructor(t,e,i,r,o,s){this.data=t,this.dialogRef=e,this._formBuilder=i,this._storeService=r,this._alertService=o,this._translateService=s,this.loadingFlag=new p.E,this.formHistoryFeeding=this._formBuilder.group({note:[this.data.note,[u.kI.required]],status:[this.data.status,[u.kI.required]]})}ngOnInit(){this.getListDetails(),console.log(this.data.status),console.log(this.formHistoryFeeding.value.status)}getListDetails(){this.loadingFlag.setPending(!0),this._storeService.fetchDetailWarehouseDaily(`${this.data.id}`).subscribe(t=>{1==t.status?(this.loadingFlag.setResult(!0),this.listInforTime=t.data.infor,this.pondService=t.data.pond,this.listWarehouse=t.data.warehouse,console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> this.listWarehouse",this.listWarehouse)):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}handleSubmit(){this.loadingFlag.setPending(!0);const t=`${this.data.id}`;let e=this.formHistoryFeeding.value.status,i={status:null!=e?e:this.data.status,note:this.formHistoryFeeding.value.note};console.log(i),this._storeService.updateConfirmWarehouse(t,i).subscribe(t=>{1==t.status?this.dialogRef.close(i):this._alertService.error(t.error),this.loadingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.WI),g.Y36(m.so),g.Y36(u.qu),g.Y36(h.d),g.Y36(f.c),g.Y36(s.Vn))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-feeding-history-edit"]],decls:62,vars:25,consts:[[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto","sm:pb-0",3,"formGroup"],[3,"mode",4,"ngIf"],[1,"w-full"],[1,"example-full-width"],["mat-stroked-button","","color","primary","mat-dialog-close","",1,"mr-2",3,"routerLink"],["cellspacing","0",1,"example-full-width"],["appearance","fill",1,"example-full-width"],["matInput","","disabled","",3,"value"],["matInput","","formControlName","note"],[1,"example-section"],["formControlName","status",3,"ngModel","ngModelChange"],["value","pending",1,"example-margin",3,"color","checked"],["value","confirm",1,"appearance-none","checked:bg-blue-500",3,"checked"],["value","reject",1,"example-margin",3,"checked","color"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-stroked-button","","mat-dialog-close","",1,"fuse-mat-button","mr-3",3,"color"],["mat-flat-button","",1,"fuse-mat-button",3,"color","click"],[3,"mode"]],template:function(t,e){1&t&&(g.ynx(0),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g._uU(4),g.qZA(),g.TgZ(5,"button",3),g._UZ(6,"mat-icon",4),g.qZA(),g.qZA(),g.TgZ(7,"div",5),g.TgZ(8,"div"),g.YNc(9,y,1,1,"mat-progress-bar",6),g.qZA(),g.TgZ(10,"div",7),g.TgZ(11,"table",8),g.TgZ(12,"td"),g.TgZ(13,"button",9),g._uU(14),g.qZA(),g.qZA(),g.TgZ(15,"td"),g.TgZ(16,"button",9),g._uU(17),g.qZA(),g.qZA(),g.qZA(),g.TgZ(18,"table",10),g.TgZ(19,"tr"),g.TgZ(20,"td"),g.TgZ(21,"mat-form-field",11),g.TgZ(22,"mat-label"),g._uU(23,"Ng\xe0y Ghi"),g.qZA(),g._UZ(24,"input",12),g.ALo(25,"date"),g.qZA(),g.qZA(),g.TgZ(26,"td"),g.TgZ(27,"mat-form-field",11),g.TgZ(28,"mat-label"),g._uU(29,"name "),g.qZA(),g._UZ(30,"input",12),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(31,"table",10),g.TgZ(32,"tr"),g.TgZ(33,"td"),g.TgZ(34,"mat-form-field",11),g.TgZ(35,"mat-label"),g._uU(36,"Tr\u1ea1ng th\xe1i"),g.qZA(),g._UZ(37,"input",12),g.qZA(),g.qZA(),g.TgZ(38,"td"),g.TgZ(39,"mat-form-field",11),g.TgZ(40,"mat-label"),g._uU(41,"S\u1ea3n ph\u1ea9m "),g.qZA(),g._UZ(42,"input",12),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(43,"mat-form-field",11),g.TgZ(44,"mat-label"),g._uU(45,"Ghi ch\xfa note"),g.qZA(),g._UZ(46,"input",13),g.qZA(),g.TgZ(47,"section",14),g.TgZ(48,"mat-radio-group",15),g.NdJ("ngModelChange",function(t){return e.labelPosition=t}),g.TgZ(49,"mat-radio-button",16),g._uU(50,"Ch\u1edd x\u1eed l\xfd "),g.qZA(),g.TgZ(51,"mat-radio-button",17),g._uU(52,"\u0110\xe3 x\xe1c nh\u1eadn "),g.qZA(),g.TgZ(53,"mat-radio-button",18),g._uU(54,"Sai ph\u1ea1m "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(55,"div",19),g.TgZ(56,"button",20),g.TgZ(57,"span"),g._uU(58," H\u1ee7y "),g.qZA(),g.qZA(),g.TgZ(59,"button",21),g.NdJ("click",function(){return e.handleSubmit()}),g.TgZ(60,"span"),g._uU(61," L\u01b0u "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t&&(g.xp6(4),g.hij("Chi ti\u1ebft #",e.data.id,""),g.xp6(1),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(1),g.Q6J("formGroup",e.formHistoryFeeding),g.xp6(2),g.Q6J("ngIf",e.loadingFlag.pending),g.xp6(4),g.hYB("routerLink","/store/",e._storeService.getFarmCode(),"/detail/",null==e.listWarehouse?null:e.listWarehouse.code,""),g.xp6(1),g.hij(" T\xean Kho : ",null==e.listWarehouse?null:e.listWarehouse.name," "),g.xp6(2),g.MGl("routerLink","/pond/",e.pondService.code,""),g.xp6(1),g.hij(" T\xean Ao: ",null==e.pondService?null:e.pondService.name," "),g.xp6(7),g.MGl("value","",g.xi3(25,22,1e3*e.listInforTime.time,"HH:mm dd-MM-yyyy")," "),g.xp6(6),g.s9C("value",e.data.user_name),g.xp6(7),g.s9C("value","export"==e.data.mod?"Xu\u1ea5t kho":"Nh\u1eadp kho"),g.xp6(5),g.s9C("value",e.data.product_name),g.xp6(6),g.Q6J("ngModel",e.labelPosition),g.xp6(1),g.Q6J("color","primary")("checked","pending"==e.data.status),g.xp6(2),g.Q6J("checked","confirm"==e.data.status),g.xp6(2),g.Q6J("checked","reject"==e.data.status)("color","warn"),g.xp6(3),g.Q6J("color","secondary"),g.xp6(3),g.Q6J("color","primary"))},directives:[Z.lW,m.ZT,x.Hw,u.JL,u.sg,r.O5,d.rH,v.KE,v.hX,_.Nt,u.Fj,u.JJ,u.u,I.VQ,I.U0,T.pW],pipes:[r.uU],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.example-margin[_ngcontent-%COMP%]{margin:0 10px}"]}),t})();var F=i(76891),C=i(43220),R=i(67441),E=i(72458),D=i(99692);const O=["paginator"];function N(t,e){if(1&t&&(g.TgZ(0,"mat-option",26),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.Q6J("value",t.id),g.xp6(1),g.hij(" ",t.name," ")}}function J(t,e){if(1&t&&(g.TgZ(0,"mat-option",26),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.Q6J("value",t.code),g.xp6(1),g.hij(" ",t.name," ")}}function k(t,e){1&t&&g._UZ(0,"mat-progress-bar",27),2&t&&g.Q6J("mode","indeterminate")}const M=function(t,e){return{"bg-green-200 dark:text-green-50 text-green-800 dark:bg-green-600":t,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":e}},Q=function(t,e,i){return{"bg-green-200 dark:text-green-50 text-green-800 dark:bg-green-600":t,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":e,"text-amber-800 bg-amber-100 dark:text-amber-50 dark:bg-amber-500":i}};function Y(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",30),g.TgZ(1,"div",19),g._uU(2),g.qZA(),g.TgZ(3,"div",20),g._uU(4),g.ALo(5,"date"),g.qZA(),g.TgZ(6,"div",21),g._uU(7),g.qZA(),g.TgZ(8,"div",19),g._uU(9),g.qZA(),g.TgZ(10,"div",20),g._uU(11),g.qZA(),g.TgZ(12,"div",19),g.TgZ(13,"span",31),g.TgZ(14,"span",32),g._uU(15),g.qZA(),g.qZA(),g.qZA(),g.TgZ(16,"div",19),g.TgZ(17,"span",31),g.TgZ(18,"span",32),g._uU(19),g.qZA(),g.qZA(),g.qZA(),g.TgZ(20,"div",19),g.TgZ(21,"button",33),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(2).handleOpenEditDialog(e)}),g._UZ(22,"mat-icon",34),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(2),g.hij(" ",t.id," "),g.xp6(2),g.hij(" ",g.xi3(5,12,t.date,"dd/MM/yyyy")," "),g.xp6(3),g.lnq(" ",t.detail," - ",t.name," - ",t.user_name," "),g.xp6(2),g.hij(" ",t.product_name," "),g.xp6(2),g.AsE(" ",t.quantity," ",t.unit," "),g.xp6(2),g.Q6J("ngClass",g.WLB(15,M,"export"==t.mod,"import"==t.mod)),g.xp6(2),g.hij(" ","export"==t.mod?"Xu\u1ea5t kho":"Nh\u1eadp kho"," "),g.xp6(2),g.Q6J("ngClass",g.kEZ(18,Q,"confirm"==t.status,"reject"==t.status,"pending"==t.status)),g.xp6(2),g.hij(" ","confirm"==t.status?"X\xe1c nh\u1eadn":"pending"==t.status?"Ch\u1edd x\u1eed l\xfd":"Sai ph\u1ea1m"," ")}}function L(t,e){if(1&t&&(g.TgZ(0,"div",28),g.YNc(1,Y,23,22,"div",29),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",t.listFeedingHistory)}}let P=(()=>{class t{constructor(t,e,i,r,o,s,a){this._storeService=t,this._farmService=e,this._alertService=i,this._translateService=r,this._matDialog=o,this._formBuilder=s,this._activatedRoute=a,this.loadingFlag=new p.E,this.listFeedingHistory=[],this.calendarListPond=[],this.pondsList=[],this.listStore=[],this.pcode="",this.isFiltered=!1,this.totalLength=0,this.maxDateFrom=w()().format("YYYY-MM-DD"),this.changeDateModal=w()().format("YYYY-MM-DD"),this.maxDate=w()(),this.minDate=w()()}ngOnInit(){this._storeService.getFarmCode()||this._storeService.setFarmCode(this._activatedRoute.snapshot.paramMap.get("code"));const t=this._storeService.getFarmCode();this._farmService.setCode(t),this.buildForm(),this.getDataForListFeedingHistory(),this.getPondsList(),this.getDataForListStore(),setTimeout(()=>{console.log(this.listFeedingHistory)},2e3)}getDataForListFeedingHistory(t=0){this.loadingFlag.setPending(!0),this._storeService.fetchStoreListFeedingHistory(t).subscribe(t=>{console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> data",t),1==t.status?(this.loadingFlag.setResult(!0),this.listFeedingHistory=t.data.list,this.totalLength=t.data.numRows):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}getPondsList(){this._farmService.loadPonds().pipe().subscribe(t=>{0==t.status?this._alertService.error(t.error):(this.pondsList=t.data,this.calendarListPond.length>0&&(this.pcode=this.calendarListPond[0].pond_id))},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}getDataForListStore(){this.loadingFlag.setPending(!0),this._storeService.fetchStoreList().subscribe(t=>{1==t.status?(this.loadingFlag.setResult(!0),this.listStore=t.data.list):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}buildForm(){this.listSearchForm=this._formBuilder.group({from:["",u.kI.required],end:[new Date,u.kI.required],pond_id:[""],wcode:[""]})}applyFilter(){this.onFilter(),this.paginator.firstPage()}onPage(t){this.isFiltered?this.onFilter(t.pageIndex):this.getDataForListFeedingHistory(t.pageIndex)}updatePage(){this.isFiltered?this.onFilter(this.paginator.pageIndex):this.getDataForListFeedingHistory(this.paginator.pageIndex)}onFilter(t=0){this.isFiltered=!0,this.loadingFlag.setPending(!0);let e={from:w()(this.listSearchForm.value.from).unix(),end:w()(this.listSearchForm.value.end).endOf("day").unix(),wcode:this.listSearchForm.value.wcode,pond_id:this.listSearchForm.value.pond_id};this._storeService.fetchStoreSearchFeedingHistory(e,"&page="+t+"&numRow=20").pipe().subscribe(t=>{t.data&&0!=t.status?(console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> res",t),this.totalLength=t.data.numRows,console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> this.totalLength",t.data.numRows),this.listFeedingHistory=t.data.list):(this._alertService.error(t.error),this.listFeedingHistory=[],this.totalLength=0),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}handleOpenEditDialog(t){this._matDialog.open(U,{autoFocus:!1,data:t}).afterClosed().subscribe(t=>{t&&(this._alertService.success(this._translateService.translate("FARM.ADD.ADD_SUCCESS")),this.getDataForListFeedingHistory())})}onChangeDate(t){this.maxDateFrom=w()(t.value).format("YYYY-MM-DD")}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(h.d),g.Y36(F.D),g.Y36(f.c),g.Y36(s.Vn),g.Y36(m.uw),g.Y36(u.qu),g.Y36(d.gz))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-feeding-history"]],viewQuery:function(t,e){if(1&t&&g.Gf(O,5),2&t){let t;g.iGM(t=g.CRH())&&(e.paginator=t.first)}},decls:59,vars:20,consts:[[1,"w-full"],[1,"flex","items-center",3,"formGroup"],[1,"flex-auto","mr-4",3,"hideRequiredMarker"],["matInput","","formControlName","from","required","",3,"matDatepicker","placeholder","max","ngModel","click","ngModelChange"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","end","required","",3,"matDatepicker","max","dateChange","click"],["picker2",""],["appearance","fill",1,"flex-auto","mr-4"],["formControlName","pond_id"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","wcode"],["mat-flat-button","",1,"fuse-mat-button","mr-4",3,"disabled","color","click"],[1,"mr-2"],[3,"svgIcon"],[1,"bg-card","shadow","rounded-2xl","overflow-hidden","w-full","mb-8"],[1,"grid"],[1,"grid-cols-12","z-12","sticky","top-0","grid","gap-4","py-4","px-8","shadow","text-md","font-semibold","bg-gray-50"],[1,"col-span-1"],[1,"col-span-2"],[1,"col-span-3"],[3,"mode",4,"ngIf"],["class","max-h-180 overflow-y-auto",4,"ngIf"],[1,"bg-gray-100",3,"length","pageSize","page"],["paginator",""],[3,"value"],[3,"mode"],[1,"max-h-180","overflow-y-auto"],["class","grid-cols-12 grid items-center gap-4 py-3 px-8 border-b",4,"ngFor","ngForOf"],[1,"grid-cols-12","grid","items-center","gap-4","py-3","px-8","border-b"],[1,"inline-flex","items-center","font-bold","text-sm","px-2.5","py-0.5","rounded-full","tracking-wide","bg-red-200","dark:text-red-50",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],["mat-button","",3,"click"],["svgIcon","mat_outline:edit_note",1,"text-red-500"]],template:function(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"mat-form-field",2),g.TgZ(4,"mat-label"),g._uU(5,"T\u1eeb"),g.qZA(),g.TgZ(6,"input",3),g.NdJ("click",function(){return g.CHM(t),g.MAs(9).open()})("ngModelChange",function(t){return e.changeDateModal=t}),g.qZA(),g._UZ(7,"mat-datepicker-toggle",4),g._UZ(8,"mat-datepicker",null,5),g.qZA(),g.TgZ(10,"mat-form-field",2),g.TgZ(11,"mat-label"),g._uU(12,"T\u1edbi"),g.qZA(),g.TgZ(13,"input",6),g.NdJ("dateChange",function(t){return e.onChangeDate(t)})("click",function(){return g.CHM(t),g.MAs(16).open()}),g.qZA(),g._UZ(14,"mat-datepicker-toggle",4),g._UZ(15,"mat-datepicker",null,7),g.qZA(),g.TgZ(17,"mat-form-field",8),g.TgZ(18,"mat-label"),g._uU(19,"Ao"),g.qZA(),g.TgZ(20,"mat-select",9),g.TgZ(21,"mat-option",10),g._uU(22,"Kh\xf4ng"),g.qZA(),g.YNc(23,N,2,2,"mat-option",11),g.qZA(),g.qZA(),g.TgZ(24,"mat-form-field",8),g.TgZ(25,"mat-label"),g._uU(26,"Kho"),g.qZA(),g.TgZ(27,"mat-select",12),g.TgZ(28,"mat-option",10),g._uU(29,"Kh\xf4ng"),g.qZA(),g.YNc(30,J,2,2,"mat-option",11),g.qZA(),g.qZA(),g.TgZ(31,"button",13),g.NdJ("click",function(){return e.applyFilter()}),g.TgZ(32,"span",14),g._uU(33,"L\u1ecdc"),g.qZA(),g._UZ(34,"mat-icon",15),g.qZA(),g.qZA(),g.TgZ(35,"div",16),g.TgZ(36,"div",17),g.TgZ(37,"div",18),g.TgZ(38,"div",19),g._uU(39," ID "),g.qZA(),g.TgZ(40,"div",20),g._uU(41," Ng\xe0y cho \u0103n "),g.qZA(),g.TgZ(42,"div",21),g._uU(43," Chi ti\u1ebft - Kho - name "),g.qZA(),g.TgZ(44,"div",19),g._uU(45," S\u1ea3n ph\u1ea9m "),g.qZA(),g.TgZ(46,"div",20),g._uU(47," S\u1ed1 l\u01b0\u1ee3ng "),g.qZA(),g.TgZ(48,"div",19),g._uU(49," Xu\u1ea5t "),g.qZA(),g.TgZ(50,"div",19),g._uU(51," Tr\u1ea1ng "),g.qZA(),g.TgZ(52,"div",19),g._uU(53," Action "),g.qZA(),g.qZA(),g.TgZ(54,"div"),g.YNc(55,k,1,1,"mat-progress-bar",22),g.qZA(),g.YNc(56,L,2,1,"div",23),g.qZA(),g.qZA(),g.TgZ(57,"mat-paginator",24,25),g.NdJ("page",function(t){return e.onPage(t)}),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=g.MAs(9),i=g.MAs(16);g.xp6(2),g.Q6J("formGroup",e.listSearchForm),g.xp6(1),g.Q6J("hideRequiredMarker",!0),g.xp6(3),g.Q6J("matDatepicker",t)("placeholder","t\u1eeb")("max",e.maxDateFrom)("ngModel",e.changeDateModal),g.xp6(1),g.Q6J("for",t),g.xp6(3),g.Q6J("hideRequiredMarker",!0),g.xp6(3),g.Q6J("matDatepicker",i)("max",e.maxDate.format("YYYY-MM-DD")),g.xp6(1),g.Q6J("for",i),g.xp6(9),g.Q6J("ngForOf",e.pondsList),g.xp6(7),g.Q6J("ngForOf",e.listStore),g.xp6(1),g.Q6J("disabled",e.listSearchForm.invalid)("color","primary"),g.xp6(3),g.Q6J("svgIcon","heroicons_outline:filter"),g.xp6(21),g.Q6J("ngIf",e.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",e.listFeedingHistory&&!e.loadingFlag.pending),g.xp6(1),g.Q6J("length",e.totalLength)("pageSize",25)}},directives:[u.JL,u.sg,v.KE,v.hX,_.Nt,u.Fj,C.hl,u.JJ,u.u,u.Q7,C.nW,v.R9,C.Mq,R.gD,E.ey,r.sg,Z.lW,x.Hw,r.O5,D.NW,T.pW,r.mk],pipes:[r.uU],styles:[""]}),t})();var j=i(28049);function H(t,e){1&t&&g._UZ(0,"mat-progress-bar",26),2&t&&g.Q6J("mode","indeterminate")}function B(t,e){if(1&t&&(g.TgZ(0,"div",27),g._uU(1),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.hij(" ",t.message," ")}}function W(t,e){if(1&t&&(g.TgZ(0,"mat-option",44),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.Q6J("value",t.product_id),g.xp6(1),g.AsE(" ",t.name," - ",t.manufacturer_name," ")}}function $(t,e){if(1&t&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&t){const t=g.oxw().index,e=g.oxw(2);g.xp6(1),g.hij("(",e.rowsImplement[t],")")}}function V(t,e){if(1&t&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&t){const t=g.oxw().index,e=g.oxw(2);g.xp6(1),g.hij("/",e.rowsImplement[t],"")}}function K(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",28),g.TgZ(1,"div",29),g.TgZ(2,"button",30),g.NdJ("click",function(){const e=g.CHM(t).index;return g.oxw(2).removeRow(e)}),g.TgZ(3,"span",19),g._uU(4),g.qZA(),g._UZ(5,"mat-icon",20),g.qZA(),g.qZA(),g.TgZ(6,"div",31),g.TgZ(7,"div",32),g.TgZ(8,"mat-form-field",33),g.TgZ(9,"mat-label"),g._uU(10),g.qZA(),g.TgZ(11,"mat-select",34),g.NdJ("selectionChange",function(e){const i=g.CHM(t).index;return g.oxw(2).productChange(e,i)}),g.YNc(12,W,2,3,"mat-option",35),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div",32),g.TgZ(14,"mat-form-field",36),g.TgZ(15,"mat-label"),g._uU(16),g.YNc(17,$,2,1,"span",37),g.qZA(),g._UZ(18,"input",38),g.qZA(),g.TgZ(19,"mat-form-field",39),g.TgZ(20,"mat-label"),g._uU(21),g.YNc(22,V,2,1,"span",37),g.qZA(),g._UZ(23,"input",40),g.qZA(),g.qZA(),g.TgZ(24,"div",41),g.TgZ(25,"div",42),g._uU(26),g.qZA(),g.TgZ(27,"span",43),g._uU(28),g.ALo(29,"number"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=e.index,r=g.oxw().$implicit,o=g.oxw();g.s9C("formGroupName",i),g.xp6(2),g.Q6J("color","warn")("disabled",!o.allowEdit),g.xp6(2),g.Oqu(r("REMOVE")),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:minus-circle"),g.xp6(5),g.Oqu(r("PRODUCT")),g.xp6(1),g.Q6J("placeholder",r("PRODUCT")),g.xp6(1),g.Q6J("ngForOf",o.products),g.xp6(4),g.hij("",r("QUANTITY")," "),g.xp6(1),g.Q6J("ngIf",o.rowsImplement[i]),g.xp6(1),g.Q6J("placeholder",r("QUANTITY")),g.xp6(3),g.hij("",r("PRICE")," "),g.xp6(1),g.Q6J("ngIf",o.rowsImplement[i]),g.xp6(1),g.Q6J("placeholder",r("PRICE")),g.xp6(3),g.Oqu(r("PRODUCT_PRICE")),g.xp6(2),g.hij("",g.xi3(29,16,o.calculatorCost(t.value.quantity,t.value.price),"1.0-0")," \u0111")}}function G(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4),g.qZA(),g.TgZ(5,"button",4),g._UZ(6,"mat-icon",5),g.qZA(),g.qZA(),g.TgZ(7,"div",6),g.TgZ(8,"div"),g.YNc(9,H,1,1,"mat-progress-bar",7),g.qZA(),g.TgZ(10,"div",8),g.YNc(11,B,2,1,"div",9),g.TgZ(12,"div",10),g.TgZ(13,"div",11),g.TgZ(14,"mat-form-field",12),g.TgZ(15,"mat-label"),g._uU(16),g.qZA(),g.TgZ(17,"input",13),g.NdJ("click",function(){return g.CHM(t),g.MAs(20).open()}),g.qZA(),g._UZ(18,"mat-datepicker-toggle",14),g._UZ(19,"mat-datepicker",null,15),g.qZA(),g.qZA(),g.TgZ(21,"div",16),g.TgZ(22,"div",3),g.TgZ(23,"p"),g._uU(24),g.qZA(),g.TgZ(25,"span",17),g._uU(26),g.ALo(27,"number"),g.qZA(),g.qZA(),g.TgZ(28,"button",18),g.NdJ("click",function(){return g.CHM(t),g.oxw().buildRowAdd()}),g.TgZ(29,"span",19),g._uU(30),g.qZA(),g._UZ(31,"mat-icon",20),g.qZA(),g.qZA(),g.TgZ(32,"div",21),g.YNc(33,K,30,19,"div",22),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(34,"div",23),g.TgZ(35,"button",24),g.NdJ("click",function(){return g.CHM(t),g.oxw().submit()}),g.TgZ(36,"span"),g._uU(37),g.qZA(),g.qZA(),g.TgZ(38,"button",25),g.TgZ(39,"span"),g._uU(40),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=e.$implicit,i=g.MAs(20),r=g.oxw();g.xp6(4),g.Oqu(t("EDIT_TITLE")),g.xp6(1),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(1),g.Q6J("formGroup",r.billForm),g.xp6(2),g.Q6J("ngIf",r.loadingFlag.pending),g.xp6(2),g.Q6J("ngIf",r.message),g.xp6(3),g.Q6J("hideRequiredMarker",!0),g.xp6(2),g.Oqu(t("DATE")),g.xp6(1),g.Q6J("matDatepicker",i)("placeholder",t("DATE"))("max",r.maxDate.format("YYYY-MM-DD"))("min",r.minDate.format("YYYY-MM-DD")),g.xp6(1),g.Q6J("for",i),g.xp6(6),g.Oqu(t("TOTAL")),g.xp6(2),g.AsE("",g.xi3(27,26,r.totalCost/1e6,"1.0-1")," ",t("MILLION"),""),g.xp6(2),g.Q6J("color","primary")("disabled",r.rows.length>=5||!r.allowEdit),g.xp6(2),g.Oqu(t("ADD_ROW")),g.xp6(1),g.Q6J("svgIcon","heroicons_solid:plus"),g.xp6(2),g.Q6J("ngForOf",r.rows.controls),g.xp6(2),g.Q6J("color","primary")("disabled",r.billForm.invalid||!r.allowEdit||r.savingFlag.pending),g.xp6(2),g.hij(" ",t("SAVE")," "),g.xp6(1),g.Q6J("color","secondary"),g.xp6(2),g.hij(" ",t("CANCEL")," ")}}let X=(()=>{class t{constructor(t,e,i,r,o,s,a){this.data=t,this.dialogRef=e,this._fb=i,this._storeService=r,this._alertService=o,this._translateService=s,this._router=a,this.products=[],this.totalCost=0,this.maxDate=S(),this.minDate=S().subtract(45,"days"),this.allowEdit=!0,this.message="",this.savingFlag=new p.E,this.loadingFlag=new p.E,this.billForm=this._fb.group({detail:this._fb.group({bill_code:[""],date:[S().format("YYYY-MM-DD"),u.kI.required],vendor:[""],transporter:[""]}),rows:this._fb.array([])}),this.rowsImplement=[""]}ngOnInit(){console.log("data",this.data),this.rows.valueChanges.subscribe(()=>{this.rows.invalid||(this.totalCost=0,this.rows.value.forEach(t=>{this.totalCost+=t.price*t.quantity}))}),this.getDataStoreDetail()}getDataStoreDetail(){this.loadingFlag.setPending(!0);const t=this._router.url.split("?")[0].split("/",5).pop();this._storeService.ferWCodeDetailImported(t).subscribe(t=>{1==t.status&&t.data?(this.products=t.data.list,this.getImportBill(this.data)):this._alertService.error(t.message),this.loadingFlag.setResult(!0)})}get rows(){return this.billForm.get("rows")}getImportBill(t){this.loadingFlag.setPending(!0),this._storeService.detailImportBills(`${t.wcode}`,`${t.id}`).subscribe(t=>{if(0!==t.status&&t.data){const e=t.data.import_bills;this.setBillDetail(t.data.bill),this.buildRow(e)}else this._alertService.error(t.error);this.loadingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}productChange(t,e){let i=this.products[this.products.findIndex(e=>e.product_id==t.value)];this.rowsImplement[e]=i.unit}buildRowAdd(){let t=this._fb.group({id:["",u.kI.required],date:[""],pack:[1],quantity:["",[u.kI.required,u.kI.min(0)]],price:["",[u.kI.required,u.kI.min(0)]]});this.rows.push(t)}buildRow(t){t.forEach(t=>{let e=this._fb.group({id:[t.id,u.kI.required],date:[t.date],pack:[1],quantity:[t.quantity,[u.kI.required,u.kI.min(0)]],price:[t.price,[u.kI.required,u.kI.min(0)]]});this.rows.push(e)})}setBillDetail(t){this.billForm.controls.detail.setValue({date:t.date,bill_code:t.bill_code,vendor:t.vendor,transporter:t.vendor}),("0000-00-00"==t.date||S().diff(S(t.date),"days")>45)&&(this.allowEdit=!1,this.billForm.disable(),this.rows.disable(),this.message=this._translateService.translate("STORE.EDIT_IMPORT.MAX_3_DAY"))}addRow(){if(this.rows.length>=5)return!1;let t=this._fb.group({id:["",u.kI.required],date:[""],pack:[1],quantity:["",[u.kI.required,u.kI.min(0)]],price:["",[u.kI.required,u.kI.min(0)]]});this.rows.push(t)}removeRow(t){this.rows.removeAt(t),this.rowsImplement.splice(t,1)}submit(){if(this.savingFlag.setPending(!0),this.billForm.valid){let t={bill_code:this.billForm.value.detail.bill_code,date:S(this.billForm.value.detail.date).format("YYYY-MM-DD"),vendor:this.billForm.value.detail.vendor,transporter:this.billForm.value.detail.transporter};const e=`${this.data.id}`,i=`${this.data.wcode}`,r=Object.assign(t,{row:this.billForm.value.rows}),o=t.row.every((t,e,i)=>t.id==i[0].id);console.log(!o),o?(this._alertService.error(this._translateService.translate("HANDLE_ERROR")),this.savingFlag.setResult(!0),this.dialogRef.close()):this._storeService.importBillsEdit(e,i,r).subscribe(t=>{t.error||"1"!=t.status?(this._alertService.error(t.error),this.savingFlag.setResult(!1)):(this.savingFlag.setResult(!0),this.dialogRef.close(this.billForm.value))},t=>{this._alertService.error(this._translateService.translate("HANDLE_ERROR")),this.savingFlag.setResult(!1)})}}calculatorCost(t,e){return t=t.toString().replace(",","."),parseFloat(t)*parseInt(e)}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.WI),g.Y36(m.so),g.Y36(u.qu),g.Y36(h.d),g.Y36(f.c),g.Y36(s.Vn),g.Y36(d.F0))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-import-edit"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto","sm:pb-0",3,"formGroup"],[3,"mode",4,"ngIf"],[1,"w-full"],["class","flex flex-col w-full text-red-500 font-medium text-xl text-center mb-4",4,"ngIf"],[1,"flex","flex-col","w-full"],["formGroupName","detail",1,"flex"],[1,"flex-auto",3,"hideRequiredMarker"],["matInput","","formControlName","date","required","",3,"matDatepicker","placeholder","max","min","click"],["matSuffix","",3,"for"],["picker",""],[1,"flex","flex-0","items-center","justify-between"],[1,"text-red-500"],["mat-flat-button","",1,"fuse-mat-button","ml-4",3,"color","disabled","click"],[1,"mr-2"],[3,"svgIcon"],["formGroupName","rows",1,"flex","flex-col","divide-y"],["class","grid grid-cols-12 items-center gap-4 py-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","",1,"fuse-mat-button","mr-3",3,"color","disabled","click"],["mat-flat-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"],[3,"mode"],[1,"flex","flex-col","w-full","text-red-500","font-medium","text-xl","text-center","mb-4"],[1,"grid","grid-cols-12","items-center","gap-4","py-4",3,"formGroupName"],[1,"col-span-2"],["mat-stroked-button","",1,"fuse-mat-button",3,"color","disabled","click"],[1,"col-span-10"],[1,"flex","items-center"],[1,"flex-auto"],["formControlName","id",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-auto","mr-2"],[4,"ngIf"],["matInput","","formControlName","quantity",3,"placeholder"],[1,"flex-auto","ml-2"],["matInput","","formControlName","price",3,"placeholder"],[1,"flex"],[1,"text-base","font-medium","mr-4"],[1,"text-red-400"],[3,"value"]],template:function(t,e){1&t&&g.YNc(0,G,41,29,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.IMPORT")},directives:[s.KI,Z.lW,m.ZT,x.Hw,u.JL,u.sg,r.O5,u.x0,v.KE,v.hX,_.Nt,u.Fj,C.hl,u.JJ,u.u,u.Q7,C.nW,v.R9,C.Mq,r.sg,T.pW,R.gD,E.ey],pipes:[r.JJ],styles:[""]}),t})();function z(t,e){1&t&&g._UZ(0,"mat-progress-bar",11),2&t&&g.Q6J("mode","indeterminate")}function tt(t,e){if(1&t&&(g.TgZ(0,"div",17),g._uU(1),g.qZA()),2&t){const t=g.oxw(3);g.xp6(1),g.hij(" ",t.message," ")}}function et(t,e){if(1&t&&(g.TgZ(0,"div",21),g.TgZ(1,"p",22),g._uU(2),g.qZA(),g.TgZ(3,"div"),g._uU(4),g.qZA(),g.qZA()),2&t){const t=g.oxw(3).$implicit,e=g.oxw();g.xp6(2),g.Oqu(t("VENDOR")),g.xp6(2),g.Oqu(e.billDetail.vendor)}}function it(t,e){if(1&t&&(g.TgZ(0,"div",21),g.TgZ(1,"p",22),g._uU(2),g.qZA(),g.TgZ(3,"div"),g._uU(4),g.qZA(),g.qZA()),2&t){const t=g.oxw(3).$implicit,e=g.oxw();g.xp6(2),g.Oqu(t("SHIPPED_BY")),g.xp6(2),g.Oqu(e.billDetail.trasporter)}}function rt(t,e){if(1&t&&(g.TgZ(0,"div",33),g._uU(1),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(1),g.Oqu(t.name)}}function ot(t,e){1&t&&(g.TgZ(0,"div",33),g._uU(1,"\u0110\xe3 x\xf3a"),g.qZA())}function st(t,e){if(1&t&&(g.TgZ(0,"div",28),g.TgZ(1,"div",29),g.YNc(2,rt,2,1,"div",30),g.YNc(3,ot,2,0,"div",30),g.qZA(),g.TgZ(4,"div",31),g._uU(5),g.ALo(6,"number"),g.qZA(),g.TgZ(7,"div",32),g._uU(8),g.ALo(9,"number"),g.qZA(),g.qZA()),2&t){const t=e.$implicit;g.xp6(2),g.Q6J("ngIf",null!=t.name),g.xp6(1),g.Q6J("ngIf",null==t.name),g.xp6(2),g.lnq(" ",g.xi3(6,6,t.price,"1.0-0")," \u0111 x ",t.quantity," ",t.unit," "),g.xp6(3),g.hij("",g.xi3(9,9,t.price*t.quantity,"1.0-0")," \u0111 ")}}function at(t,e){if(1&t&&(g.TgZ(0,"div",25),g.TgZ(1,"p",26),g._uU(2),g.qZA(),g.YNc(3,st,10,12,"div",27),g.qZA()),2&t){const t=g.oxw(3).$implicit,e=g.oxw();g.xp6(2),g.hij("",t("DETAIL"),":"),g.xp6(1),g.Q6J("ngForOf",e.rows)}}function nt(t,e){if(1&t&&(g.TgZ(0,"div",18),g.TgZ(1,"p",19),g._uU(2),g.qZA(),g.TgZ(3,"div",20),g.TgZ(4,"div",21),g.TgZ(5,"p",22),g._uU(6),g.qZA(),g.TgZ(7,"div"),g._uU(8),g.qZA(),g.qZA(),g.TgZ(9,"div",21),g.TgZ(10,"p",22),g._uU(11),g.qZA(),g.TgZ(12,"div"),g._uU(13),g.ALo(14,"date"),g.qZA(),g.qZA(),g.YNc(15,et,5,2,"div",23),g.YNc(16,it,5,2,"div",23),g.qZA(),g.YNc(17,at,4,2,"div",24),g.qZA()),2&t){const t=g.oxw(2).$implicit,e=g.oxw();g.xp6(2),g.Oqu(t("INFO")),g.xp6(4),g.Oqu(t("RECORD_DATE")),g.xp6(2),g.Oqu(e.billDetail.moment.fromNow()),g.xp6(3),g.Oqu(t("DATE")),g.xp6(2),g.Oqu(g.xi3(14,8,e.billDetail.date,t("DATE_FORMAT"))),g.xp6(2),g.Q6J("ngIf",e.billDetail.vendor),g.xp6(1),g.Q6J("ngIf",e.billDetail.trasporter),g.xp6(1),g.Q6J("ngIf",e.loadingFlag.result&&e.rows.length>0)}}function lt(t,e){if(1&t&&(g.TgZ(0,"div",28),g.TgZ(1,"div",34),g._uU(2),g.qZA(),g.TgZ(3,"div",35),g._uU(4),g.ALo(5,"number"),g.qZA(),g.qZA()),2&t){const t=g.oxw(2).$implicit,e=g.oxw();g.xp6(2),g.hij(" ",t("TOTAL")," "),g.xp6(2),g.hij(" ",g.xi3(5,2,e.total,"1.0-0")," \u0111 ")}}function ct(t,e){if(1&t&&(g.TgZ(0,"div",12),g.YNc(1,tt,2,1,"div",13),g.YNc(2,nt,18,11,"div",14),g._UZ(3,"hr",15),g.YNc(4,lt,6,5,"div",16),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.Q6J("ngIf",t.message),g.xp6(1),g.Q6J("ngIf",t.loadingFlag.result),g.xp6(2),g.Q6J("ngIf",t.loadingFlag.result)}}function dt(t,e){if(1&t&&(g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4),g.qZA(),g.TgZ(5,"button",4),g._UZ(6,"mat-icon",5),g.qZA(),g.qZA(),g.TgZ(7,"div",6),g.TgZ(8,"div"),g.YNc(9,z,1,1,"mat-progress-bar",7),g.qZA(),g.YNc(10,ct,5,3,"div",8),g.qZA(),g.TgZ(11,"div",9),g.TgZ(12,"button",10),g.TgZ(13,"span"),g._uU(14),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t){const t=e.$implicit,i=g.oxw();g.xp6(4),g.Oqu(t("TITLE")),g.xp6(1),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(3),g.Q6J("ngIf",i.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",i.billDetail),g.xp6(2),g.Q6J("color","secondary"),g.xp6(2),g.hij(" ",t("CLOSE")," ")}}let ut=(()=>{class t{constructor(t,e,i,r,o,s){this.data=t,this.dialogRef=e,this.storeService=i,this._translateService=r,this._alertService=o,this._router=s,this.products=[],this.loadingFlag=new p.E,this.message="",this.rows=[],this.total=0,this.storeDetailList=[]}ngOnInit(){this.products=this.data.listProduct,this.getDataStoreDetail(),console.log(this.data)}getDataStoreDetail(){this.loadingFlag.setPending(!0);const t=this._router.url.split("?")[0].split("/",5).pop();this.storeService.ferWCodeDetailImported(t).subscribe(t=>{1==t.status&&t.data?(this.products=t.data.list,this.getImportBill(this.data)):this._alertService.error(t.message),this.loadingFlag.setResult(!0)})}getImportBill(t){this.loadingFlag.setPending(!0),this.storeService.detailImportBills(`${t.wcode}`,`${t.id}`).subscribe(t=>{0!==t.status&&t.data&&(this.prepareRows(t.data.import_bills),this.billDetail=t.data.bill,this.billDetail.dateFormat=S(t.data.bill.date),this.billDetail.moment=S(1e3*t.data.bill.add_time)),this.loadingFlag.setResult(!0)},t=>{this.message=this._translateService.translate("CONNECT_ERROR"),this.loadingFlag.setResult(!1)})}prepareRows(t){const e=this.products.filter(e=>t.some(t=>e.id==t.id));console.log(e),t.forEach(t=>{this.total=this.total+t.quantity*t.price;let e=this.products.findIndex((e,i)=>e.id==t.id),i=t;null!=e&&e>=0&&(i.name=this.products[e].name,i.unit=this.products[e].unit),this.rows.push(i)}),console.log(this.rows)}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.WI),g.Y36(m.so),g.Y36(h.d),g.Y36(s.Vn),g.Y36(f.c),g.Y36(d.F0))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-import-detail"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","max-h-screen","md:min-w-160","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto"],[3,"mode",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-stroked-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"],[3,"mode"],[1,"w-full"],["class","flex flex-col w-full text-red-500 font-medium text-xl text-center mb-4",4,"ngIf"],["class","flex flex-col w-full",4,"ngIf"],[1,"dashed","mt-3"],["class","flex flex-row justify-between",4,"ngIf"],[1,"flex","flex-col","w-full","text-red-500","font-medium","text-xl","text-center","mb-4"],[1,"flex","flex-col","w-full"],[1,"text-xl","font-semibold","mb-2","text-center"],[1,"text-base","divide-y"],[1,"flex","flex-row","justify-between","py-3"],[1,"font-medium"],["class","flex flex-row justify-between py-3",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"text-xl","font-semibold","mb-2"],["class","flex flex-row justify-between",4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-between"],[1,"flex","flex-col","py-3"],["class","text-base",4,"ngIf"],[1,"text-base","font-medium","py-3","text-secondary","w-2/5","text-center"],[1,"text-base","font-medium","py-3"],[1,"text-base"],[1,"flex","flex-col","py-3","font-bold"],[1,"text-base","font-medium","py-3","font-bold"]],template:function(t,e){1&t&&g.YNc(0,dt,15,7,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.IMPORT_DETAIL")},directives:[s.KI,Z.lW,m.ZT,x.Hw,r.O5,T.pW,r.sg],pipes:[r.uU,r.JJ],styles:[".dashed[_ngcontent-%COMP%]{border-top:1px dashed;margin:0;border-bottom-width:0}"]}),t})();var pt=i(1400),gt=i(33935);function mt(t,e){1&t&&g._UZ(0,"mat-progress-bar",13),2&t&&g.Q6J("mode","indeterminate")}function ht(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",16),g.TgZ(1,"div",7),g._uU(2),g.ALo(3,"date"),g.qZA(),g.TgZ(4,"div",8),g._uU(5),g.qZA(),g.TgZ(6,"div",17),g._uU(7),g.ALo(8,"number"),g.qZA(),g.TgZ(9,"div",10),g.TgZ(10,"button",18),g._UZ(11,"mat-icon",19),g.qZA(),g.TgZ(12,"mat-menu",null,20),g.TgZ(14,"button",21),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentBillDetail(e)}),g._UZ(15,"mat-icon",22),g.TgZ(16,"span"),g._uU(17),g.qZA(),g.qZA(),g.TgZ(18,"button",21),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentEditBill(e)}),g._UZ(19,"mat-icon",23),g.TgZ(20,"span"),g._uU(21),g.qZA(),g.qZA(),g.TgZ(22,"button",21),g.NdJ("click",function(){const e=g.CHM(t),i=e.$implicit,r=e.index;return g.oxw(3).presentDeleteBill(i,r)}),g._UZ(23,"mat-icon",24),g.TgZ(24,"span"),g._uU(25),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=g.MAs(13),r=g.oxw(2).$implicit;g.xp6(2),g.hij(" ",g.xi3(3,7,t.date,r("DATE_FORMAT"))," "),g.xp6(3),g.hij(" ",t.products," "),g.xp6(2),g.hij(" ",g.xi3(8,10,t.tongtien,"1.0-0")," \u0111 "),g.xp6(3),g.Q6J("matMenuTriggerFor",i),g.xp6(7),g.Oqu(r("DETAIL")),g.xp6(4),g.Oqu(r("EDIT")),g.xp6(4),g.Oqu(r("DELETE"))}}function ft(t,e){if(1&t&&(g.TgZ(0,"div",14),g.YNc(1,ht,26,13,"div",15),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.Q6J("ngForOf",t.bills)}}function Zt(t,e){if(1&t&&(g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4),g.qZA(),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"div",5),g.TgZ(7,"div",6),g.TgZ(8,"div",7),g._uU(9),g.qZA(),g.TgZ(10,"div",8),g._uU(11),g.qZA(),g.TgZ(12,"div",9),g._uU(13),g.qZA(),g.TgZ(14,"div",10),g._uU(15),g.qZA(),g.qZA(),g.TgZ(16,"div"),g.YNc(17,mt,1,1,"mat-progress-bar",11),g.qZA(),g.YNc(18,ft,2,1,"div",12),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t){const t=e.$implicit,i=g.oxw();g.xp6(4),g.Oqu(t("TITLE")),g.xp6(5),g.hij(" ",t("DATE")," "),g.xp6(2),g.hij(" ",t("PRODUCT")," "),g.xp6(2),g.hij(" ",t("TOTAL")," "),g.xp6(2),g.hij(" ",t("ACTION")," "),g.xp6(2),g.Q6J("ngIf",i.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",i.bills&&!i.loadingFlag.pending)}}let xt=(()=>{class t{constructor(t,e,i,r,o,s,a){this._storeService=t,this._alertService=e,this._translateService=i,this._fuseConfirmationService=r,this._matDialog=o,this._router=s,this._activatedRoute=a,this.loadingFlag=new p.E,this.importHistory=[]}ngOnInit(){this.getStoreBill(),this.getDataImportBills();const t=this._router.url.split("?")[0].split("/",5).pop();console.log("imported from",t)}getDataImportBills(){this.loadingFlag.setPending(!0);const t=this._router.url.split("?")[0].split("/",5).pop();this._storeService.fetchImportBills(t).subscribe(t=>{1==t.status?this.importHistory=t.data:this._alertService.error(t.error)})}getStoreBill(){this.loadingFlag.setPending(!0);const t=this._router.url.split("?")[0].split("/",5).pop();this._storeService.fetchImportBills(t).pipe((0,j.P)()).subscribe(t=>{0===t.status?this._alertService.error(t.error):(this.bills=[],t.data.forEach(t=>{let e=t;e.listProduct=[],e.products.split(",").forEach(t=>{e.listProduct.push({name:t.split("-")[0],quantity:t.split("-")[1]})}),this.bills.push(e)})),this.loadingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}presentBillDetail(t){this._matDialog.open(ut,{autoFocus:!1,data:t})}presentEditBill(t,e){this._matDialog.open(X,{autoFocus:!1,data:t}).afterClosed().subscribe(t=>{t&&(this._alertService.success(this._translateService.translate("STORE.IMPORT.EDIT_SUCCESS")),this.getStoreBill(),console.log(t))}),console.log(t)}presentDeleteBill(t,e){let i=S(t.date);this._fuseConfirmationService.open({title:this._translateService.translate("FARM.MANAGER.WARN"),message:this._translateService.translate("STORE.IMPORTED.DELETE_CONFIRM")+" "+i.format(this._translateService.translate("STORE.IMPORTED.MOMENT_FORMAT"))+"?",actions:{confirm:{label:this._translateService.translate("CONFIRM")},cancel:{label:this._translateService.translate("CANCEL")}}}).afterClosed().subscribe(i=>{i&&"confirmed"==i&&(this.delete(t,e),this.getStoreBill())})}delete(t,e){const i=`${t.id}`,r=this._router.url.split("?")[0].split("/",5).pop();this._storeService.deleteImport(r,i).subscribe(t=>{1==t.result?(this.bills.splice(e,1),this._alertService.success(t.message)):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(h.d),g.Y36(f.c),g.Y36(s.Vn),g.Y36(pt.R),g.Y36(m.uw),g.Y36(d.F0),g.Y36(d.gz))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-imported"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"w-full"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","items-center","justify-between","pb-8"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"bg-card","shadow","rounded-2xl","overflow-hidden","w-full","mb-8"],[1,"grid"],[1,"grid-cols-12","z-10","sticky","top-0","grid","gap-4","py-4","px-8","shadow","text-md","font-semibold","bg-gray-50"],[1,"col-span-3"],[1,"col-span-6"],[1,"col-span-2"],[1,"col-span-1"],[3,"mode",4,"ngIf"],["class","max-h-180 overflow-y-auto",4,"ngIf"],[3,"mode"],[1,"max-h-180","overflow-y-auto"],["class","grid-cols-12 grid items-center gap-4 py-3 px-8 border-b",4,"ngFor","ngForOf"],[1,"grid-cols-12","grid","items-center","gap-4","py-3","px-8","border-b"],[1,"col-span-2","text-green-500"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","heroicons_outline:dots-vertical"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","heroicons_outline:clipboard-list"],["svgIcon","heroicons_outline:pencil-alt"],["svgIcon","heroicons_outline:trash",1,"text-red-500"]],template:function(t,e){1&t&&g.YNc(0,Zt,19,7,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.IMPORTED")},directives:[s.KI,r.O5,T.pW,r.sg,Z.lW,gt.p6,x.Hw,gt.VK,gt.OP],pipes:[r.uU,r.JJ],styles:[""]}),t})();function vt(t,e){1&t&&g._UZ(0,"mat-progress-bar",15),2&t&&g.Q6J("mode","indeterminate")}let _t=(()=>{class t{constructor(t,e,i,r,o,s){this.dialogRef=t,this.data=e,this._formBuilder=i,this._storeService=r,this._alertService=o,this._translateService=s,this.loadingFlag=new p.E,this.formInfoEdit=this._formBuilder.group({name:[this.data.name,[u.kI.required]],area:[this.data.area,[u.kI.required]],description:[this.data.description,[u.kI.required]]})}ngOnInit(){}handleSubmit(){this.loadingFlag.setPending(!0);let t={name:this.formInfoEdit.value.name,area:this.formInfoEdit.value.area,description:this.formInfoEdit.value.description};console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89\ud83c\udf89 >>>>> params",t),this._storeService.editInfo(this.data.code,t).pipe((0,j.P)()).subscribe(e=>{0==e.status?this._alertService.error(e.error):this.dialogRef.close(t),this.loadingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.so),g.Y36(m.WI),g.Y36(u.qu),g.Y36(h.d),g.Y36(f.c),g.Y36(s.Vn))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-edit-info"]],decls:30,vars:6,consts:[[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto","sm:pb-0",3,"formGroup"],[3,"mode",4,"ngIf"],[1,"w-full"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","area","required",""],["matInput","","formControlName","description","required",""],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-stroked-button","","mat-dialog-close","",1,"fuse-mat-button","mr-3",3,"color"],["mat-flat-button","",1,"fuse-mat-button",3,"color","click"],[3,"mode"]],template:function(t,e){1&t&&(g.ynx(0),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g._uU(4,"Th\xf4ng tin kho"),g.qZA(),g.TgZ(5,"button",3),g._UZ(6,"mat-icon",4),g.qZA(),g.qZA(),g.TgZ(7,"div",5),g.TgZ(8,"div"),g.YNc(9,vt,1,1,"mat-progress-bar",6),g.qZA(),g.TgZ(10,"div",7),g.TgZ(11,"mat-form-field",8),g.TgZ(12,"mat-label"),g._uU(13,"T\xean kho"),g.qZA(),g._UZ(14,"input",9),g.qZA(),g.TgZ(15,"mat-form-field",8),g.TgZ(16,"mat-label"),g._uU(17,"Di\u1ec7n T\xedch"),g.qZA(),g._UZ(18,"input",10),g.qZA(),g.TgZ(19,"mat-form-field",8),g.TgZ(20,"mat-label"),g._uU(21,"M\xf4 t\u1ea3"),g.qZA(),g._UZ(22,"input",11),g.qZA(),g.qZA(),g.qZA(),g.TgZ(23,"div",12),g.TgZ(24,"button",13),g.TgZ(25,"span"),g._uU(26," H\u1ee7y "),g.qZA(),g.qZA(),g.TgZ(27,"button",14),g.NdJ("click",function(){return e.handleSubmit()}),g.TgZ(28,"span"),g._uU(29," L\u01b0u "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t&&(g.xp6(5),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(1),g.Q6J("formGroup",e.formInfoEdit),g.xp6(2),g.Q6J("ngIf",e.loadingFlag.pending),g.xp6(15),g.Q6J("color","secondary"),g.xp6(3),g.Q6J("color","primary"))},directives:[Z.lW,m.ZT,x.Hw,u.JL,u.sg,r.O5,v.KE,v.hX,_.Nt,u.Fj,u.JJ,u.u,u.Q7,T.pW],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),t})();function Tt(t,e){1&t&&g._UZ(0,"mat-progress-bar",19),2&t&&g.Q6J("mode","indeterminate")}let At=(()=>{class t{constructor(t,e,i,r,o){this._storeService=t,this._alertService=e,this._translateService=i,this._router=r,this._matDialog=o,this.loadingFlag=new p.E}ngOnInit(){this.getListDataInformation()}getListDataInformation(){this.loadingFlag.setPending(!0);const t=this._router.url.split("?")[0].split("/",5).pop();this._storeService.ferWCodeDetailImported(t).subscribe(t=>{1==t.status&&t.data?this.listInfo=t.data.infor:this._alertService.error(t.message),this.loadingFlag.setResult(!0)})}getDataForListStore(){this.loadingFlag.setPending(!0),this._storeService.fetchStoreList().subscribe(t=>{1==t.status?(this.loadingFlag.setResult(!0),this.listStore=t.data.list):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}handleOpenEditDialog(){this._matDialog.open(_t,{autoFocus:!1,width:"650px",data:this.listInfo}).afterClosed().subscribe(t=>{t&&(this._router.navigate(["store/"+this._storeService.fcode+"/list-store"]),this._alertService.success(this._translateService.translate(" C\u1eadp nh\u1eadt th\xe0nh C\xf4ng")),this.getListDataInformation(),this.getDataForListStore())})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(h.d),g.Y36(f.c),g.Y36(s.Vn),g.Y36(d.F0),g.Y36(m.uw))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-info"]],decls:49,vars:9,consts:[[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto","sm:pb-0"],[3,"mode",4,"ngIf"],[1,"p-4","flex","justify-between","fuse-vertical-navigation-item-wrapper"],[1,"flex","justify-start","fuse-vertical-navigation-item-wrapper"],["svgIcon","heroicons_solid:farmext-farm",1,"mr-1"],[1,"text-base","fuse-vertical-navigation-item-wrapper"],[2,"vertical-align","sub"],[1,"text-base"],["svgIcon","mat_outline:qr_code_scanner",1,"mr-1"],["svgIcon","mat_solid:crop",1,"mr-1"],["svgIcon","mat_outline:menu_book",1,"mr-1"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-stroked-button","","mat-dialog-close","",1,"fuse-mat-button","mr-3",3,"color"],["mat-flat-button","",1,"fuse-mat-button",3,"color","click"],[3,"mode"]],template:function(t,e){1&t&&(g.ynx(0),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g._uU(4,"Th\xf4ng tin kho"),g.qZA(),g.TgZ(5,"button",3),g._UZ(6,"mat-icon",4),g.qZA(),g.qZA(),g.TgZ(7,"div",5),g.TgZ(8,"div"),g.YNc(9,Tt,1,1,"mat-progress-bar",6),g.qZA(),g.TgZ(10,"div",7),g.TgZ(11,"div",8),g._UZ(12,"mat-icon",9),g.TgZ(13,"div",10),g.TgZ(14,"span",11),g._uU(15,"T\xean Kho"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(16,"span",12),g._uU(17),g.qZA(),g.qZA(),g.TgZ(18,"div",7),g.TgZ(19,"div",8),g._UZ(20,"mat-icon",13),g.TgZ(21,"div",10),g.TgZ(22,"span",11),g._uU(23,"M\xe3 kho"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(24,"span",12),g._uU(25),g.qZA(),g.qZA(),g.TgZ(26,"div",7),g.TgZ(27,"div",8),g._UZ(28,"mat-icon",14),g.TgZ(29,"div",10),g.TgZ(30,"span",11),g._uU(31,"Di\u1ec7n T\xedch"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(32,"span",12),g._uU(33),g.qZA(),g.qZA(),g.TgZ(34,"div",7),g.TgZ(35,"div",8),g._UZ(36,"mat-icon",15),g.TgZ(37,"div",10),g.TgZ(38,"span",11),g._uU(39,"M\xf4 t\u1ea3"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(40,"span",12),g._uU(41),g.qZA(),g.qZA(),g.qZA(),g.TgZ(42,"div",16),g.TgZ(43,"button",17),g.TgZ(44,"span"),g._uU(45," H\u1ee7y "),g.qZA(),g.qZA(),g.TgZ(46,"button",18),g.NdJ("click",function(){return e.handleOpenEditDialog()}),g.TgZ(47,"span"),g._uU(48," Edit "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t&&(g.xp6(5),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(3),g.Q6J("ngIf",e.loadingFlag.pending),g.xp6(8),g.Oqu(null==e.listInfo?null:e.listInfo.name),g.xp6(8),g.hij("#",null==e.listInfo?null:e.listInfo.code,""),g.xp6(8),g.hij("",null==e.listInfo?null:e.listInfo.area,"m2"),g.xp6(8),g.Oqu(null==e.listInfo?null:e.listInfo.description),g.xp6(2),g.Q6J("color","secondary"),g.xp6(3),g.Q6J("color","primary"))},directives:[Z.lW,m.ZT,x.Hw,r.O5,T.pW],styles:[""]}),t})();var bt=i(49457),qt=i.n(bt),St=i(64245);function wt(t,e){1&t&&g._UZ(0,"mat-progress-bar",25),2&t&&g.Q6J("mode","indeterminate")}function It(t,e){if(1&t&&(g.TgZ(0,"mat-option",42),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.Q6J("value",t.product_id),g.xp6(1),g.AsE(" ",t.name," - ",t.manufacturer_name," ")}}function yt(t,e){if(1&t&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&t){const t=g.oxw().index,e=g.oxw(2);g.xp6(1),g.hij("(",e.rowsImplement[t],")")}}function Ut(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",26),g.TgZ(1,"div",27),g.TgZ(2,"button",28),g.NdJ("click",function(){const e=g.CHM(t).index;return g.oxw(2).removeRow(e)}),g.TgZ(3,"span",18),g._uU(4),g.qZA(),g._UZ(5,"mat-icon",19),g.qZA(),g.qZA(),g.TgZ(6,"div",29),g.TgZ(7,"div",30),g.TgZ(8,"mat-form-field",31),g.TgZ(9,"mat-label"),g._uU(10),g.qZA(),g.TgZ(11,"mat-select",32),g.NdJ("selectionChange",function(e){const i=g.CHM(t).index;return g.oxw(2).productChange(e,i)}),g.YNc(12,It,2,3,"mat-option",33),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div",30),g.TgZ(14,"mat-form-field",34),g.TgZ(15,"mat-label"),g._uU(16),g.YNc(17,yt,2,1,"span",35),g.qZA(),g._UZ(18,"input",36),g.qZA(),g.TgZ(19,"mat-form-field",37),g.TgZ(20,"mat-label"),g._uU(21),g.qZA(),g._UZ(22,"input",38),g.qZA(),g.qZA(),g.TgZ(23,"div",39),g.TgZ(24,"div",40),g._uU(25),g.qZA(),g.TgZ(26,"span",41),g._uU(27),g.ALo(28,"number"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=e.index,r=g.oxw().$implicit,o=g.oxw();g.s9C("formGroupName",i),g.xp6(2),g.Q6J("color","warn"),g.xp6(2),g.Oqu(r("REMOVE")),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:minus-circle"),g.xp6(5),g.hij("",r("PRODUCT")," "),g.xp6(1),g.Q6J("placeholder",r("PRODUCT")),g.xp6(1),g.Q6J("ngForOf",o.products),g.xp6(4),g.hij("",r("QUANTITY")," "),g.xp6(1),g.Q6J("ngIf",o.rowsImplement[i]),g.xp6(1),g.Q6J("placeholder",r("QUANTITY")),g.xp6(3),g.hij("",r("PRICE")," "),g.xp6(1),g.Q6J("placeholder",r("PRICE")),g.xp6(3),g.Oqu(r("PRODUCT_PRICE")),g.xp6(2),g.hij("",g.xi3(28,14,o.calculatorCost(t.value.quantity,t.value.price),"1.0-0")," \u0111")}}function Ft(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4),g.qZA(),g.TgZ(5,"button",4),g._UZ(6,"mat-icon",5),g.qZA(),g.qZA(),g.TgZ(7,"div",6),g.TgZ(8,"div"),g.YNc(9,wt,1,1,"mat-progress-bar",7),g.qZA(),g.TgZ(10,"div",8),g.TgZ(11,"div",9),g.TgZ(12,"div",10),g.TgZ(13,"mat-form-field",11),g.TgZ(14,"mat-label"),g._uU(15),g.qZA(),g.TgZ(16,"input",12),g.NdJ("click",function(){return g.CHM(t),g.MAs(19).open()}),g.qZA(),g._UZ(17,"mat-datepicker-toggle",13),g._UZ(18,"mat-datepicker",null,14),g.qZA(),g.qZA(),g.TgZ(20,"div",15),g.TgZ(21,"div",3),g.TgZ(22,"p"),g._uU(23),g.qZA(),g.TgZ(24,"span",16),g._uU(25),g.ALo(26,"number"),g.qZA(),g.qZA(),g.TgZ(27,"button",17),g.NdJ("click",function(){return g.CHM(t),g.oxw().buildRow()}),g.TgZ(28,"span",18),g._uU(29),g.qZA(),g._UZ(30,"mat-icon",19),g.qZA(),g.qZA(),g.TgZ(31,"div",20),g.YNc(32,Ut,29,17,"div",21),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(33,"div",22),g.TgZ(34,"button",23),g.NdJ("click",function(){return g.CHM(t),g.oxw().save()}),g.TgZ(35,"span"),g._uU(36),g.qZA(),g.qZA(),g.TgZ(37,"button",24),g.TgZ(38,"span"),g._uU(39),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=e.$implicit,i=g.MAs(19),r=g.oxw();g.xp6(4),g.Oqu(t("TITLE")),g.xp6(1),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(1),g.Q6J("formGroup",r.billForm),g.xp6(2),g.Q6J("ngIf",r.savingFlag.pending),g.xp6(4),g.Q6J("hideRequiredMarker",!0),g.xp6(2),g.Oqu(t("DATE")),g.xp6(1),g.Q6J("matDatepicker",i)("placeholder",t("DATE"))("max",r.maxDate.format("YYYY-MM-DD"))("min",r.minDate.format("YYYY-MM-DD")),g.xp6(1),g.Q6J("for",i),g.xp6(6),g.Oqu(t("TOTAL")),g.xp6(2),g.AsE("",g.xi3(26,25,r.totalCost/1e6,"1.0-1")," ",t("MILLION"),""),g.xp6(2),g.Q6J("color","primary")("disabled",r.rows.length>=10),g.xp6(2),g.Oqu(t("ADD_ROW")),g.xp6(1),g.Q6J("svgIcon","heroicons_solid:plus"),g.xp6(2),g.Q6J("ngForOf",r.rows.controls),g.xp6(2),g.Q6J("color","primary")("disabled",!r.billForm.valid),g.xp6(2),g.hij(" ",t("SAVE")," "),g.xp6(1),g.Q6J("color","secondary"),g.xp6(2),g.hij(" ",t("CANCEL")," ")}}let Ct=(()=>{class t{constructor(t,e,i,r,o,s){this.dialogRef=t,this.data=e,this._storeService=i,this._fb=r,this._alertService=o,this._translateService=s,this.products=[],this.totalCost=0,this.maxDate=S(),this.minDate=S().startOf("month"),this.savingFlag=new p.E,this.billForm=this._fb.group({detail:this._fb.group({bill_code:[""],date:[S().format("YYYY-MM-DD"),u.kI.required],vendor:[""],transporter:[""]}),rows:this._fb.array([this._fb.group({id:["",u.kI.required],date:[""],pack:[1],quantity:["",[u.kI.required,u.kI.min(0)]],price:["",[u.kI.required]]})])}),this.rowsImplement=[""]}ngOnInit(){this.products=this.data,this.fcode=this._storeService.getFarmCode(),this.rows.valueChanges.subscribe(()=>{this.rows.invalid||(this.totalCost=0,this.rows.value.forEach(t=>{this.totalCost+=this.calculatorCost(t.quantity,t.price)}))})}get rows(){return this.billForm.get("rows")}buildRow(){let t=this._fb.group({id:["",u.kI.required],date:[""],pack:[1],quantity:["",[u.kI.required,u.kI.min(0)]],price:["",[u.kI.required]]});this.rows.push(t)}removeRow(t){this.rows.removeAt(t),this.rowsImplement.splice(t,1)}productChange(t,e){let i=this.products[this.products.findIndex(e=>e.product_id==t.value)];this.rowsImplement[e]=i.unit}calculatorCost(t,e){return t=t.toString().replace(",","."),parseFloat(t)*parseInt(e)}save(){this.savingFlag.setPending(!0);let t={bill_code:this.billForm.value.detail.bill_code,date:S(this.billForm.value.detail.date).unix(),vendor:this.billForm.value.detail.vendor,transporter:this.billForm.value.detail.transporter};if(this.billForm.valid){const e=Object.assign(t,{row:this.billForm.value.rows});this._storeService.createPresentImport(e).pipe((0,j.P)()).subscribe(t=>{t.error||"1"!=t.status?this._alertService.error(t.error):this.dialogRef.close(!0),this.savingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.savingFlag.setResult(!1)})}}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.so),g.Y36(m.WI),g.Y36(h.d),g.Y36(u.qu),g.Y36(f.c),g.Y36(s.Vn))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-import"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto","sm:pb-0",3,"formGroup"],[3,"mode",4,"ngIf"],[1,"w-full"],[1,"flex","flex-col","w-full"],["formGroupName","detail",1,"flex"],[1,"flex-auto",3,"hideRequiredMarker"],["matInput","","formControlName","date","required","",3,"matDatepicker","placeholder","max","min","click"],["matSuffix","",3,"for"],["picker",""],[1,"flex","flex-0","items-center","justify-between"],[1,"text-red-500"],["mat-flat-button","",1,"fuse-mat-button","ml-4",3,"color","disabled","click"],[1,"mr-2"],[3,"svgIcon"],["formGroupName","rows",1,"flex","flex-col","divide-y"],["class","grid grid-cols-12 items-center gap-4 py-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","",1,"fuse-mat-button","mr-3",3,"color","disabled","click"],["mat-stroked-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"],[3,"mode"],[1,"grid","grid-cols-12","items-center","gap-4","py-4",3,"formGroupName"],[1,"col-span-2"],["mat-stroked-button","",1,"fuse-mat-button",3,"color","click"],[1,"col-span-10"],[1,"flex","items-center"],[1,"flex-auto"],["formControlName","id",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-auto","mr-2"],[4,"ngIf"],["matInput","","formControlName","quantity",3,"placeholder"],[1,"flex-auto","ml-2"],["matInput","","formControlName","price",3,"placeholder"],[1,"flex"],[1,"text-base","font-medium","mr-4"],[1,"text-red-400"],[3,"value"]],template:function(t,e){1&t&&g.YNc(0,Ft,40,28,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.IMPORT")},directives:[s.KI,Z.lW,m.ZT,x.Hw,u.JL,u.sg,r.O5,u.x0,v.KE,v.hX,_.Nt,u.Fj,C.hl,u.JJ,u.u,u.Q7,C.nW,v.R9,C.Mq,r.sg,T.pW,R.gD,E.ey],pipes:[r.JJ],styles:[""]}),t})();var Rt=i(53040);function Et(t,e){1&t&&g._UZ(0,"mat-progress-bar",20),2&t&&g.Q6J("mode","indeterminate")}function Dt(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4),g.qZA(),g.TgZ(5,"button",4),g._UZ(6,"mat-icon",5),g.qZA(),g.qZA(),g.TgZ(7,"div",6),g.TgZ(8,"div"),g.YNc(9,Et,1,1,"mat-progress-bar",7),g.qZA(),g.TgZ(10,"div",8),g.TgZ(11,"div",9),g.TgZ(12,"p",10),g._uU(13),g.qZA(),g.TgZ(14,"p",3),g._uU(15),g.ALo(16,"number"),g.qZA(),g.TgZ(17,"p",3),g._uU(18),g.ALo(19,"number"),g.qZA(),g.qZA(),g.TgZ(20,"div",11),g.TgZ(21,"div",12),g.TgZ(22,"mat-form-field",13),g.TgZ(23,"mat-label"),g._uU(24),g.qZA(),g.TgZ(25,"input",14),g.NdJ("input",function(e){return g.CHM(t),g.oxw().formatQuantity.setValue(e.target.value)}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(26,"div",12),g.TgZ(27,"mat-form-field",13),g.TgZ(28,"mat-label"),g._uU(29),g.qZA(),g.TgZ(30,"input",15),g.NdJ("input",function(e){return g.CHM(t),g.oxw().formatPrice.setValue(e.target.value)}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(31,"div",12),g.TgZ(32,"mat-form-field",13),g.TgZ(33,"mat-label"),g._uU(34),g.qZA(),g._UZ(35,"input",16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(36,"div",17),g.TgZ(37,"button",18),g.NdJ("click",function(){return g.CHM(t),g.oxw().onSubmit()}),g.TgZ(38,"span"),g._uU(39),g.qZA(),g.qZA(),g.TgZ(40,"button",19),g.TgZ(41,"span"),g._uU(42),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=e.$implicit,i=g.oxw();g.xp6(4),g.Oqu(t("TITLE")),g.xp6(1),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(1),g.Q6J("formGroup",i.form),g.xp6(2),g.Q6J("ngIf",i.savingFlag.pending),g.xp6(4),g.AsE("",i.data.name_prefix," - ",i.data.name,""),g.xp6(2),g.lnq("",t("STOCK"),": ",g.xi3(16,25,i.data.quantity_current,"1.0-1")," ",i.data.unit,""),g.xp6(3),g.AsE("",t("PRICE_CURRENT"),": ",g.xi3(19,28,i.data.price,"1.0-1")," \u0111"),g.xp6(6),g.Oqu(t("NEW_STOCK")),g.xp6(1),g.Q6J("placeholder",t("NEW_STOCK"))("value",i.formatQuantity.fakeView),g.xp6(4),g.Oqu(t("NEW_PRICE")),g.xp6(1),g.Q6J("placeholder",t("NEW_PRICE"))("value",i.formatPrice.fakeView),g.xp6(4),g.Oqu(t("NOTE")),g.xp6(1),g.Q6J("placeholder",t("NOTE")),g.xp6(2),g.Q6J("color","primary")("disabled",!i.form.valid),g.xp6(2),g.hij(" ",t("SAVE")," "),g.xp6(1),g.Q6J("color","secondary"),g.xp6(2),g.hij(" ",t("CANCEL")," ")}}let Ot=(()=>{class t{constructor(t,e,i,r,o,s){this.data=t,this.dialogRef=e,this._storeService=i,this._alertService=r,this._translateService=o,this._formBuilder=s,this.formatQuantity=new Rt.y(""),this.formatPrice=new Rt.y(""),this.savingFlag=new p.E}ngOnInit(){this.form=this._formBuilder.group({quantity_current:["",[u.kI.required,u.kI.min(0)]],price:["",[u.kI.required,u.kI.min(0)]],note:["",[u.kI.maxLength(100)]]})}onSubmit(){const t=`&id=${this.data.id}`,e=`${this.data.wcode}`;this.savingFlag.setPending(!0);let i={quantity_current:this.formatQuantity.realValue,price:this.formatPrice.realValue,note:this.form.value.note,sid:this.data.id_store};this._storeService.updateCorrectProduct(t,e,i).pipe((0,j.P)()).subscribe(t=>{1===t.status?(this.data.quantity_current=i.quantity_current,this.data.price=i.price,this.data.note=i.note,this.dialogRef.close(this.data)):this._alertService.error(t.error),this.savingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.savingFlag.setResult(!1)})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.WI),g.Y36(m.so),g.Y36(h.d),g.Y36(f.c),g.Y36(s.Vn),g.Y36(u.qu))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-inventory-edit"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-160","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto",3,"formGroup"],[3,"mode",4,"ngIf"],[1,"w-full"],[1,"flex","flex-col","w-full","text-center","mb-5"],[1,"text-xl","font-semibold"],[1,"flex","flex-col","w-full"],[1,"flex"],[1,"flex-auto"],["matInput","","formControlName","quantity_current",3,"placeholder","value","input"],["matInput","","formControlName","price",3,"placeholder","value","input"],["matInput","","formControlName","note",3,"placeholder"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","",1,"fuse-mat-button","mr-3",3,"color","disabled","click"],["mat-flat-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"],[3,"mode"]],template:function(t,e){1&t&&g.YNc(0,Dt,43,31,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.INVENTORY_EDIT")},directives:[s.KI,Z.lW,m.ZT,x.Hw,u.JL,u.sg,r.O5,v.KE,v.hX,_.Nt,u.Fj,u.JJ,u.u,T.pW],pipes:[r.JJ],styles:[""]}),t})();var Nt=i(42120);let Jt=(()=>{class t{transform(t,e){return t.filter(t=>t.group_id==e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=g.Yjl({name:"productTypeFilter",type:t,pure:!0}),t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})();function kt(t,e){1&t&&g._UZ(0,"mat-progress-bar",18),2&t&&g.Q6J("mode","indeterminate")}function Mt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){g.CHM(t);const e=g.oxw().$implicit;return g.oxw(3).presentLock(e)}),g._UZ(1,"mat-icon",31),g.qZA()}}function Qt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){g.CHM(t);const e=g.oxw().$implicit;return g.oxw(3).presentLock(e)}),g._UZ(1,"mat-icon",32),g.qZA()}}function Yt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",21),g.TgZ(1,"div",12),g.TgZ(2,"span",22),g._uU(3),g.qZA(),g._uU(4),g.qZA(),g.TgZ(5,"div",12),g._uU(6),g.qZA(),g.TgZ(7,"div",12),g._uU(8),g.qZA(),g.TgZ(9,"div",13),g._uU(10),g.qZA(),g.TgZ(11,"div",13),g._uU(12),g.qZA(),g.TgZ(13,"div",12),g._uU(14),g.ALo(15,"number"),g.qZA(),g.TgZ(16,"div",13),g.YNc(17,Mt,2,0,"button",23),g.YNc(18,Qt,2,0,"button",23),g.qZA(),g.TgZ(19,"div",13),g.TgZ(20,"button",24),g.TgZ(21,"mat-icon"),g._uU(22,"more_vert"),g.qZA(),g.qZA(),g.TgZ(23,"mat-menu",null,25),g.TgZ(25,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentEditInventory(e)}),g._UZ(26,"mat-icon",27),g.TgZ(27,"span"),g._uU(28),g.qZA(),g.qZA(),g.TgZ(29,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentDelete(e)}),g._UZ(30,"mat-icon",28),g.TgZ(31,"span"),g._uU(32),g.qZA(),g.qZA(),g.TgZ(33,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentPrint(e)}),g._UZ(34,"mat-icon",29),g.TgZ(35,"span"),g._uU(36),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=g.MAs(24),r=g.oxw(2).$implicit;g.xp6(3),g.hij("",t.name_prefix," -"),g.xp6(1),g.hij(" ",t.name," "),g.xp6(2),g.hij(" ",t.manufacturer_name," "),g.xp6(2),g.hij(" ",t.uses," "),g.xp6(2),g.hij(" ",t.dosage," "),g.xp6(2),g.AsE(" ",t.quantity_current," ",t.unit," "),g.xp6(2),g.AsE(" ",g.xi3(15,15,t.price,"1.0-0")," \u0111/",t.unit," "),g.xp6(3),g.Q6J("ngIf",0==t.status),g.xp6(1),g.Q6J("ngIf",1==t.status),g.xp6(2),g.Q6J("matMenuTriggerFor",i),g.xp6(8),g.Oqu(r("ADJUST")),g.xp6(4),g.Oqu(r("DELETE")),g.xp6(4),g.Oqu(r("PRINT"))}}function Lt(t,e){if(1&t&&(g.TgZ(0,"div",19),g.YNc(1,Yt,37,18,"div",20),g.ALo(2,"productTypeFilter"),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.Q6J("ngForOf",g.xi3(2,1,t.storeDetailList,1))}}function Pt(t,e){1&t&&g._UZ(0,"mat-progress-bar",18),2&t&&g.Q6J("mode","indeterminate")}function jt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){g.CHM(t);const e=g.oxw().$implicit;return g.oxw(3).presentLock(e)}),g._UZ(1,"mat-icon",31),g.qZA()}}function Ht(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){g.CHM(t);const e=g.oxw().$implicit;return g.oxw(3).presentLock(e)}),g._UZ(1,"mat-icon",32),g.qZA()}}function Bt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",21),g.TgZ(1,"div",12),g.TgZ(2,"span",22),g._uU(3),g.qZA(),g._uU(4),g.qZA(),g.TgZ(5,"div",12),g._uU(6),g.qZA(),g.TgZ(7,"div",12),g._uU(8),g.qZA(),g.TgZ(9,"div",13),g._uU(10),g.qZA(),g.TgZ(11,"div",13),g._uU(12),g.qZA(),g.TgZ(13,"div",12),g._uU(14),g.ALo(15,"number"),g.qZA(),g.TgZ(16,"div",13),g.YNc(17,jt,2,0,"button",23),g.YNc(18,Ht,2,0,"button",23),g.qZA(),g.TgZ(19,"div",13),g.TgZ(20,"button",24),g.TgZ(21,"mat-icon"),g._uU(22,"more_vert"),g.qZA(),g.qZA(),g.TgZ(23,"mat-menu",null,25),g.TgZ(25,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentEditInventory(e)}),g._UZ(26,"mat-icon",27),g.TgZ(27,"span"),g._uU(28),g.qZA(),g.qZA(),g.TgZ(29,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentDelete(e)}),g._UZ(30,"mat-icon",28),g.TgZ(31,"span"),g._uU(32),g.qZA(),g.qZA(),g.TgZ(33,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentPrint(e)}),g._UZ(34,"mat-icon",29),g.TgZ(35,"span"),g._uU(36),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=g.MAs(24),r=g.oxw(2).$implicit;g.xp6(3),g.hij("",t.name_prefix," -"),g.xp6(1),g.AsE(" ",t.name," ",t.id," "),g.xp6(2),g.hij(" ",t.manufacturer_name," "),g.xp6(2),g.hij(" ",t.uses," "),g.xp6(2),g.hij(" ",t.dosage," "),g.xp6(2),g.AsE(" ",t.quantity_current," ",t.unit," "),g.xp6(2),g.AsE(" ",g.xi3(15,16,t.price,"1.0-0")," \u0111/",t.unit," "),g.xp6(3),g.Q6J("ngIf",0==t.status),g.xp6(1),g.Q6J("ngIf",1==t.status),g.xp6(2),g.Q6J("matMenuTriggerFor",i),g.xp6(8),g.Oqu(r("ADJUST")),g.xp6(4),g.Oqu(r("DELETE")),g.xp6(4),g.Oqu(r("PRINT"))}}function Wt(t,e){if(1&t&&(g.TgZ(0,"div",19),g.YNc(1,Bt,37,19,"div",20),g.ALo(2,"productTypeFilter"),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.Q6J("ngForOf",g.xi3(2,1,t.storeDetailList,2))}}function $t(t,e){1&t&&g._UZ(0,"mat-progress-bar",18),2&t&&g.Q6J("mode","indeterminate")}function Vt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){g.CHM(t);const e=g.oxw().$implicit;return g.oxw(3).presentLock(e)}),g._UZ(1,"mat-icon",31),g.qZA()}}function Kt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){g.CHM(t);const e=g.oxw().$implicit;return g.oxw(3).presentLock(e)}),g._UZ(1,"mat-icon",32),g.qZA()}}function Gt(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",21),g.TgZ(1,"div",12),g.TgZ(2,"span",22),g._uU(3),g.qZA(),g._uU(4),g.qZA(),g.TgZ(5,"div",12),g._uU(6),g.qZA(),g.TgZ(7,"div",12),g._uU(8),g.qZA(),g.TgZ(9,"div",13),g._uU(10),g.qZA(),g.TgZ(11,"div",13),g._uU(12),g.qZA(),g.TgZ(13,"div",12),g._uU(14),g.ALo(15,"number"),g.qZA(),g.TgZ(16,"div",13),g.YNc(17,Vt,2,0,"button",23),g.YNc(18,Kt,2,0,"button",23),g.qZA(),g.TgZ(19,"div",13),g.TgZ(20,"button",24),g.TgZ(21,"mat-icon"),g._uU(22,"more_vert"),g.qZA(),g.qZA(),g.TgZ(23,"mat-menu",null,25),g.TgZ(25,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentEditInventory(e)}),g._UZ(26,"mat-icon",27),g.TgZ(27,"span"),g._uU(28),g.qZA(),g.qZA(),g.TgZ(29,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentDelete(e)}),g._UZ(30,"mat-icon",28),g.TgZ(31,"span"),g._uU(32),g.qZA(),g.qZA(),g.TgZ(33,"button",26),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).presentPrint(e)}),g._UZ(34,"mat-icon",29),g.TgZ(35,"span"),g._uU(36),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=g.MAs(24),r=g.oxw(2).$implicit;g.xp6(3),g.hij("",t.name_prefix," -"),g.xp6(1),g.hij(" ",t.name," "),g.xp6(2),g.hij(" ",t.manufacturer_name," "),g.xp6(2),g.hij(" ",t.uses," "),g.xp6(2),g.hij(" ",t.dosage," "),g.xp6(2),g.AsE(" ",t.quantity_current," ",t.unit," "),g.xp6(2),g.AsE(" ",g.xi3(15,15,t.price,"1.0-0")," \u0111/",t.unit," "),g.xp6(3),g.Q6J("ngIf",0==t.status),g.xp6(1),g.Q6J("ngIf",1==t.status),g.xp6(2),g.Q6J("matMenuTriggerFor",i),g.xp6(8),g.Oqu(r("ADJUST")),g.xp6(4),g.Oqu(r("DELETE")),g.xp6(4),g.Oqu(r("PRINT"))}}function Xt(t,e){if(1&t&&(g.TgZ(0,"div",19),g.YNc(1,Gt,37,18,"div",20),g.ALo(2,"productTypeFilter"),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.Q6J("ngForOf",g.xi3(2,1,t.storeDetailList,3))}}function zt(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"button",5),g.NdJ("click",function(){return g.CHM(t),g.oxw().handleOpenPresentImportDialog()}),g.TgZ(7,"span",6),g._uU(8),g.qZA(),g._UZ(9,"mat-icon",7),g.qZA(),g.TgZ(10,"button",5),g.NdJ("click",function(){return g.CHM(t),g.oxw().dowloadFileWareHourse()}),g.TgZ(11,"span",6),g._uU(12),g.qZA(),g._UZ(13,"mat-icon",7),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"p",8),g._uU(15),g.qZA(),g.TgZ(16,"div",9),g.TgZ(17,"div",10),g.TgZ(18,"div",11),g.TgZ(19,"div",12),g._uU(20),g.qZA(),g.TgZ(21,"div",12),g._uU(22),g.qZA(),g.TgZ(23,"div",12),g._uU(24),g.qZA(),g.TgZ(25,"div",13),g._uU(26),g.qZA(),g.TgZ(27,"div",13),g._uU(28),g.qZA(),g.TgZ(29,"div",12),g._uU(30),g.qZA(),g.TgZ(31,"div",13),g._uU(32," Kh\xf3a "),g.qZA(),g.TgZ(33,"div",13),g._uU(34),g.qZA(),g.qZA(),g.TgZ(35,"div"),g.YNc(36,kt,1,1,"mat-progress-bar",14),g.qZA(),g.YNc(37,Lt,3,4,"div",15),g.qZA(),g.qZA(),g.TgZ(38,"p",16),g._uU(39),g.qZA(),g.TgZ(40,"div",9),g.TgZ(41,"div",10),g.TgZ(42,"div",11),g.TgZ(43,"div",12),g._uU(44),g.qZA(),g.TgZ(45,"div",12),g._uU(46),g.qZA(),g.TgZ(47,"div",12),g._uU(48),g.qZA(),g.TgZ(49,"div",13),g._uU(50),g.qZA(),g.TgZ(51,"div",13),g._uU(52),g.qZA(),g.TgZ(53,"div",12),g._uU(54),g.qZA(),g.TgZ(55,"div",13),g._uU(56," kh\xf3a "),g.qZA(),g.TgZ(57,"div",13),g._uU(58),g.qZA(),g.qZA(),g.TgZ(59,"div"),g.YNc(60,Pt,1,1,"mat-progress-bar",14),g.qZA(),g.YNc(61,Wt,3,4,"div",15),g.qZA(),g.qZA(),g.TgZ(62,"p",17),g._uU(63),g.qZA(),g.TgZ(64,"div",9),g.TgZ(65,"div",10),g.TgZ(66,"div",11),g.TgZ(67,"div",12),g._uU(68),g.qZA(),g.TgZ(69,"div",12),g._uU(70),g.qZA(),g.TgZ(71,"div",12),g._uU(72),g.qZA(),g.TgZ(73,"div",13),g._uU(74),g.qZA(),g.TgZ(75,"div",13),g._uU(76),g.qZA(),g.TgZ(77,"div",12),g._uU(78),g.qZA(),g.TgZ(79,"div",13),g._uU(80," kh\xf3a "),g.qZA(),g.TgZ(81,"div",13),g._uU(82),g.qZA(),g.qZA(),g.TgZ(83,"div"),g.YNc(84,$t,1,1,"mat-progress-bar",14),g.qZA(),g.YNc(85,Xt,3,4,"div",15),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=e.$implicit,i=g.oxw();g.xp6(4),g.hij(" ",i.storeDetailInfor.name," "),g.xp6(2),g.Q6J("color","primary"),g.xp6(2),g.Oqu(t("IMPORT")),g.xp6(1),g.Q6J("svgIcon","iconsmind:arrow_inside"),g.xp6(1),g.Q6J("color","warn"),g.xp6(2),g.Oqu(t("EXPORT_FILE")),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:cloud-download"),g.xp6(2),g.hij("",t("FEED")," "),g.xp6(5),g.hij(" ",t("PRODUCT")," "),g.xp6(2),g.hij(" ",t("MANUFACTURER")," "),g.xp6(2),g.hij(" ",t("USES")," "),g.xp6(2),g.hij(" ",t("DOSAGE")," "),g.xp6(2),g.hij(" ",t("STOCK")," "),g.xp6(2),g.hij(" ",t("UNIT_PRICE")," "),g.xp6(4),g.hij(" ",t("ACTION")," "),g.xp6(2),g.Q6J("ngIf",i.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",i.storeDetailList&&!i.loadingFlag.pending),g.xp6(2),g.Oqu(t("SUPPLEMENT")),g.xp6(5),g.hij(" ",t("PRODUCT")," "),g.xp6(2),g.hij(" ",t("MANUFACTURER")," "),g.xp6(2),g.hij(" ",t("USES")," "),g.xp6(2),g.hij(" ",t("DOSAGE")," "),g.xp6(2),g.hij(" ",t("STOCK")," "),g.xp6(2),g.hij(" ",t("UNIT_PRICE")," "),g.xp6(4),g.hij(" ",t("ACTION")," "),g.xp6(2),g.Q6J("ngIf",i.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",i.storeDetailList&&!i.loadingFlag.pending),g.xp6(2),g.Oqu(t("CHEM_TREATMENT")),g.xp6(5),g.hij(" ",t("PRODUCT")," "),g.xp6(2),g.hij(" ",t("MANUFACTURER")," "),g.xp6(2),g.hij(" ",t("USES")," "),g.xp6(2),g.hij(" ",t("DOSAGE")," "),g.xp6(2),g.hij(" ",t("STOCK")," "),g.xp6(2),g.hij(" ",t("UNIT_PRICE")," "),g.xp6(4),g.hij(" ",t("ACTION")," "),g.xp6(2),g.Q6J("ngIf",i.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",i.storeDetailList&&!i.loadingFlag.pending)}}let te=(()=>{class t{constructor(t,e,i,r,o,s,a,n){this._storeService=t,this._translateService=e,this._alertService=i,this._matDialog=r,this._fuseConfirmationService=o,this.dbLocalService=s,this._activatedRoute=a,this._router=n,this.loadingFlag=new p.E,this.total_value=0,this.storeDetailInfor=[],this.storeDetailList=[],this.clickEventSubscription=this._storeService.getClickEvent().subscribe(()=>{this.getDataStoreDetail()})}ngOnInit(){this._farmIndex=this.dbLocalService.farms.findIndex(t=>t.infor.code===this._storeService.getFarmCode()),-1==this._farmIndex||0==this.dbLocalService.farms[this._farmIndex].store.length||this.setLocalStore(),this._storeService.setWCodeStoreCode(this._activatedRoute.snapshot.paramMap.get("code")),this.getDataStoreDetail(),this.getSettingList()}getSettingList(){this._storeService.getSetting().subscribe(t=>{0==t.status?this._alertService.error(t.error):(this._storeService.managers=t.data.managers,this._storeService.onLoaded$.next(1)),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}setLocalStore(){this.products=this.dbLocalService.farms[this._farmIndex].store,this._storeService.setStore(this.products),this.total_value=this.getTotalCost(this.products)}getTotalCost(t){return t.reduce((t,e)=>t+e.quantity_current*e.price,0)}presentImport(){this._matDialog.open(Ct,{autoFocus:!1}).afterClosed().subscribe(t=>{t&&(this._alertService.success(this._translateService.translate("STORE.IMPORT.ADD_SUCCESS")),this.getDataStoreDetail())})}presentDelete(t){this._fuseConfirmationService.open({title:this._translateService.translate("FARM.MANAGER.WARN"),message:this._translateService.translate("STORE.DELETE_CONFIRM")+" "+t.name_prefix+"-"+t.name+"?",actions:{confirm:{label:this._translateService.translate("CONFIRM")},cancel:{label:this._translateService.translate("CANCEL")}}}).afterClosed().subscribe(e=>{e&&"confirmed"==e&&this.delete(t)})}delete(t){const e=`${t.id_store}`;console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>>  $_GET",e),this._storeService.removeProduct(e,t).pipe((0,j.P)()).subscribe(t=>{1===t.status?(this._alertService.success(t.message),this.getDataStoreDetail()):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}presentLock(t){let e=" "+t.name_prefix+"-"+t.name+"?";this._fuseConfirmationService.open({title:this._translateService.translate("FARM.MANAGER.WARN"),message:1==t.status?this._translateService.translate("STORE.LOCK_CONFIRM")+e:this._translateService.translate("STORE.UNLOCK_CONFIRM")+e,actions:{confirm:{label:this._translateService.translate("CONFIRM")},cancel:{label:this._translateService.translate("CANCEL")}}}).afterClosed().subscribe(e=>{e&&"confirmed"==e&&this.onSpause(t)})}presentEditInventory(t){this._matDialog.open(Ot,{autoFocus:!1,data:t}).afterClosed().subscribe(e=>{e&&(this.storeDetailList[this.findProductIndexById(t)]=e,this._alertService.success(this._translateService.translate("STORE.INVENTORY_EDIT.SUCCESS")))})}presentImportFile(){this._matDialog.open(St.P,{autoFocus:!1}).afterClosed().subscribe(t=>{t&&this._alertService.success(this._translateService.translate("STORE.PRODUCT_EDIT.ADD_SUCCESS"))})}findProductIndexById(t){return this.storeDetailList.findIndex(e=>e.id==t.id)}dowloadFileWareHourse(){this._storeService.dowloadFileWareHourse().subscribe(t=>{const e=new Blob([t],{type:"text/csv"});let i="Farmext-Warehouse-"+this._storeService.getFarmCode()+".xlsx";qt()(e,i)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}getDataStoreDetail(){this.loadingFlag.setPending(!0),this._storeService.fetchStoreDetail().subscribe(t=>{1==t.status&&t.data?(this.storeDetailInfor=t.data.infor,this.storeDetailList=t.data.list):this._alertService.error(t.message),this.loadingFlag.setResult(!0)})}findStoreDetailListIndexById(t){return this.storeDetailList.findIndex(e=>e.id==t.id)}onSpause(t){const e=0==t.status?1:0;console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> valId",e),this._storeService.getSpause(`${t.id_store}`,e).pipe((0,j.P)()).subscribe(i=>{console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> res",i),1==i.status?(this.storeDetailList[this.findStoreDetailListIndexById(t)].status=e,this._alertService.success(i.message)):this._alertService.error(i.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}handleOpenPresentImportDialog(){this._matDialog.open(Ct,{autoFocus:!1,data:this.storeDetailList}).afterClosed().subscribe(t=>{t&&(this._alertService.success(this._translateService.translate("STORE.IMPORT.ADD_SUCCESS")),this.getDataStoreDetail())})}presentPrint(t){console.log(t),this._storeService.downloadFileProduct(t.product_id).subscribe(e=>{const i=new Blob([e],{type:"text/csv"});let r="Farmext-Bill-"+t.add_time+".xlsx";qt()(i,r),this.loadingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(h.d),g.Y36(s.Vn),g.Y36(f.c),g.Y36(m.uw),g.Y36(pt.R),g.Y36(Nt.T),g.Y36(d.gz),g.Y36(d.F0))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-inventory"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"w-full"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","items-center","justify-between","pb-8"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-flat-button","",1,"fuse-mat-button","ml-4",3,"color","click"],[1,"mr-2"],[3,"svgIcon"],[1,"text-xl","font-semibold","pb-3","text-orange-500"],[1,"bg-card","shadow","rounded-2xl","overflow-hidden","w-full","mb-8"],[1,"grid"],[1,"grid-cols-12","z-10","sticky","top-0","grid","gap-4","py-4","px-8","shadow","text-md","font-semibold","bg-gray-50"],[1,"col-span-2"],[1,"col-span-1"],[3,"mode",4,"ngIf"],["class","max-h-80 overflow-y-auto",4,"ngIf"],[1,"text-xl","font-semibold","pb-3","text-purple-500"],[1,"text-xl","font-semibold","pb-3","text-blue-500"],[3,"mode"],[1,"max-h-80","overflow-y-auto"],["class","grid-cols-12 grid items-center gap-4 py-3 px-8 border-b",4,"ngFor","ngForOf"],[1,"grid-cols-12","grid","items-center","gap-4","py-3","px-8","border-b"],[1,"text-secondary"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","heroicons_outline:calculator"],["svgIcon","heroicons_outline:trash",1,"text-red-500"],["svgIcon","mat_outline:file_download",1,"text-white-500"],["mat-icon-button","",3,"click"],["ngClass","text-green-800","svgIcon","heroicons_outline:lock-open"],["svgIcon","heroicons_outline:lock-closed",1,"text-red-800"]],template:function(t,e){1&t&&g.YNc(0,zt,86,37,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.INVENTORY")},directives:[s.KI,Z.lW,x.Hw,r.O5,T.pW,r.sg,gt.p6,gt.VK,gt.OP,r.mk],pipes:[Jt,r.JJ],styles:[""]}),t})();var ee=i(90171);function ie(t,e){1&t&&g._UZ(0,"mat-progress-bar",21),2&t&&g.Q6J("mode","indeterminate")}const re=function(t){return{color:t}};function oe(t,e){if(1&t&&(g.TgZ(0,"a",22),g.TgZ(1,"div",23),g.TgZ(2,"div",24),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"div",25),g.TgZ(5,"p",26),g._uU(6),g.qZA(),g.TgZ(7,"div",27),g._uU(8),g.qZA(),g.TgZ(9,"div",28),g.TgZ(10,"div",29),g._uU(11),g.qZA(),g.TgZ(12,"div",30),g._uU(13),g.TgZ(14,"var"),g._uU(15,"m"),g.TgZ(16,"sup"),g._uU(17,"2"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t){const t=e.$implicit,i=e.index,r=g.oxw().$implicit,o=g.oxw();g.hYB("routerLink","/store/",o._storeService.getFarmCode(),"/detail/",o.listStore[i].code,""),g.xp6(3),g.hij(" ",t.name," "),g.xp6(2),g.Q6J("ngStyle",g.VKq(9,re,o.getRandomColor(i))),g.xp6(1),g.hij(" ",t.total_product," "),g.xp6(1),g.Q6J("ngStyle",g.VKq(11,re,o.getRandomColor(i))),g.xp6(1),g.hij(" ",r("CATEGORY"),""),g.xp6(3),g.hij("",r("ACREAGE"),":"),g.xp6(2),g.hij("",t.area," ")}}function se(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g._uU(5),g.qZA(),g.qZA(),g.TgZ(6,"mat-expansion-panel",5),g.TgZ(7,"mat-expansion-panel-header"),g.TgZ(8,"mat-panel-title"),g._uU(9),g.qZA(),g._UZ(10,"mat-icon",6),g.TgZ(11,"mat-panel-description"),g._uU(12," Xu\u1ea5t Theo Th\xe1ng "),g.TgZ(13,"mat-icon"),g._uU(14,"date_range"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(15,"div",7),g.TgZ(16,"div",8),g.TgZ(17,"mat-form-field",9),g.TgZ(18,"mat-label"),g._uU(19),g.qZA(),g.TgZ(20,"input",10),g.NdJ("click",function(){return g.CHM(t),g.MAs(23).open()}),g.qZA(),g._UZ(21,"mat-datepicker-toggle",11),g._UZ(22,"mat-datepicker",null,12),g.qZA(),g.TgZ(24,"mat-form-field",9),g.TgZ(25,"mat-label"),g._uU(26),g.qZA(),g.TgZ(27,"input",13),g.NdJ("dateChange",function(e){return g.CHM(t),g.oxw().changeDate(e)})("click",function(){return g.CHM(t),g.MAs(30).open()}),g.qZA(),g._UZ(28,"mat-datepicker-toggle",11),g._UZ(29,"mat-datepicker",null,14),g.qZA(),g.TgZ(31,"button",15),g.NdJ("click",function(){return g.CHM(t),g.oxw().downloadHandler()}),g.TgZ(32,"span",16),g._uU(33),g.qZA(),g._UZ(34,"mat-icon",6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(35,"div",17),g.YNc(36,ie,1,1,"mat-progress-bar",18),g.TgZ(37,"div",19),g.YNc(38,oe,18,13,"a",20),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=e.$implicit,i=g.MAs(23),r=g.MAs(30),o=g.oxw();g.xp6(5),g.hij(" ",t("INVENTORYList")," "),g.xp6(4),g.hij(" ",t("EXPORT_FILE")," "),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:cloud-download"),g.xp6(6),g.Q6J("formGroup",o.formList),g.xp6(1),g.Q6J("hideRequiredMarker",!0),g.xp6(2),g.Oqu(t("FROM_DATE")),g.xp6(1),g.Q6J("matDatepicker",i)("max",o.maxDateFrom)("placeholder","t\u1eeb"),g.xp6(1),g.Q6J("for",i),g.xp6(3),g.Q6J("hideRequiredMarker",!0),g.xp6(2),g.Oqu(t("TO_DATE")),g.xp6(1),g.Q6J("max",o.maxDate.format("YYYY-MM-DD"))("matDatepicker",r)("placeholder",t("TO_DATE")),g.xp6(1),g.Q6J("for",r),g.xp6(3),g.Q6J("disabled",!o.formList.valid)("color","warn"),g.xp6(2),g.Oqu(t("EXPORT_FILE")),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:cloud-download"),g.xp6(2),g.Q6J("ngIf",o.loadingFlag.pending),g.xp6(2),g.Q6J("ngForOf",o.listStore)}}let ae=(()=>{class t{constructor(t,e,i,r,o,s){this._activatedRoute=t,this._storeService=e,this._farmService=i,this._translateService=r,this._alertService=o,this._matDialog=s,this.loadingFlag=new p.E,this.formControlSearch=new u.NI,this.formList=new u.cw({dateFrom:new u.NI(w()(),u.kI.required),dateTo:new u.NI(w()(),u.kI.required)}),this.minDate=w()().subtract(180,"days"),this.maxDate=w()(),this.maxDateFrom=w()(),this.styleColor=[{color:"#3B82F6"},{color:"#EF4444"},{color:"#F59E0B"},{color:"#22C55E"}]}ngOnInit(){this.getDataForListStore(),this._storeService.getFarmCode()||this._storeService.setFarmCode(this._activatedRoute.snapshot.paramMap.get("code")),this._storeService.onLoaded$.next(1)}getRandomColor(t){return this.styleColor[t%4].color}getDataForListStore(){this.loadingFlag.setPending(!0),this._storeService.fetchStoreList().subscribe(t=>{1==t.status?(this.loadingFlag.setResult(!0),this.listStore=t.data.list):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}presentImportFile(){this._matDialog.open(St.P,{autoFocus:!1}).afterClosed().subscribe(t=>{t&&(this.getDataForListStore(),this._alertService.success(this._translateService.translate("STORE.PRODUCT_EDIT.ADD_SUCCESS")))})}downloadHandler(){let t=this.formList.value.dateFrom.format("X"),e=this.formList.value.dateTo.format("X");this._storeService.dowloadFileFromWareHourse(t,e).subscribe(t=>{const i=new Blob([t],{type:"text/csv"});let r="Farmext-Bill-"+e+".xlsx";qt()(i,r),this.loadingFlag.setResult(!0)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}changeDate(t){this.maxDateFrom=t.value}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(d.gz),g.Y36(h.d),g.Y36(F.D),g.Y36(s.Vn),g.Y36(f.c),g.Y36(m.uw))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-list"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","items-center","justify-between","pb-8"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],["hideToggle","",1,"mb-5"],[3,"svgIcon"],[1,"flex","flex-col","px-8","py-6","pb-3","bg-card","overflow-hidden","w-full"],[1,"flex","items-center",3,"formGroup"],[1,"flex-auto","mr-4",3,"hideRequiredMarker"],["matInput","","formControlName","dateFrom","required","",3,"matDatepicker","max","placeholder","click"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","dateTo","required","",3,"max","matDatepicker","placeholder","dateChange","click"],["toDate",""],["mat-flat-button","",1,"fuse-mat-button","ml-4",3,"disabled","color","click"],[1,"mr-2"],[1,"flex","flex-col","flex-auto","w-full"],[3,"mode",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","w-full","min-w-0"],["class"," p-6 bg-card shadow rounded-2xl overflow-hidden",3,"routerLink",4,"ngFor","ngForOf"],[3,"mode"],[1,"p-6","bg-card","shadow","rounded-2xl","overflow-hidden",3,"routerLink"],[1,"flex","items-start","justify-between"],[1,"text-2xl","font-medium","tracking-tight","leading-6","truncate","text-secondary"],[1,"flex","flex-col","items-center","mt-2"],[1,"text-xl","sm:text-5xl","font-bold","tracking-tight","leading-none",3,"ngStyle"],[1,"text-lg","font-medium",3,"ngStyle"],[1,"flex","items-center","justify-center","w-full","mt-2","text-secondary"],[1,"text-md","font-medium","truncate"],[1,"ml-1.5","text-lg","font-semibold"]],template:function(t,e){1&t&&g.YNc(0,se,39,22,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.INVENTORY")},directives:[s.KI,ee.ib,ee.yz,ee.yK,x.Hw,ee.u4,u.JL,u.sg,v.KE,v.hX,_.Nt,u.Fj,C.hl,u.JJ,u.u,u.Q7,C.nW,v.R9,C.Mq,Z.lW,r.O5,r.sg,T.pW,d.yS,r.PC],styles:[""]}),t})();var ne=i(79765),le=i(46782),ce=i(54395),de=i(5653);function ue(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",14),g.TgZ(1,"div",15),g._UZ(2,"img",16),g.TgZ(3,"p"),g._uU(4),g.qZA(),g.qZA(),g.TgZ(5,"button",17),g.NdJ("click",function(){const e=g.CHM(t).index;return g.oxw().presentRemoveUser(e)}),g._UZ(6,"mat-icon",18),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=g.oxw();g.xp6(2),g.Q6J("src",i.memberService.getSitePath()+"/upload/users/avatars/medium/"+t.photo,g.LSH),g.xp6(2),g.Oqu(t.user_name)}}function pe(t,e){1&t&&g._UZ(0,"mat-progress-bar",19)}function ge(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",20),g.TgZ(2,"div",15),g._UZ(3,"img",16),g.TgZ(4,"p"),g._uU(5),g.qZA(),g.qZA(),g.TgZ(6,"button",21),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw().addPermission(e)}),g._UZ(7,"mat-icon",22),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,i=g.oxw();g.xp6(3),g.Q6J("src",i.memberService.getSitePath()+"/upload/users/avatars/medium/"+t.photo,g.LSH),g.xp6(2),g.Oqu(t.username),g.xp6(1),g.Q6J("disabled",i.disableAddBtn(t))}}let me=(()=>{class t{constructor(t,e,i,r,o,s,a){this.memberService=t,this._translateService=e,this.dialogRef=i,this.reData=r,this._storeService=o,this.alertService=s,this._fuseConfirmationService=a,this.loadingFlag=new p.E,this.searchWord=new u.NI}ngOnInit(){this.oldManager=this._storeService.managers,this.searchWord.valueChanges.pipe((0,ce.b)(300)).subscribe(t=>{this.getListMember(t)})}getListMember(t){t.length>=2&&(this.loadingFlag.setPending(!0),this.members$=this.memberService.searchMember(t).pipe(t=>(this.message=0==t.length?this._translateService.translate("POND.MEMBER.NO_INFO"):"",this.loadingFlag.setResult(!0),t)))}disableAddBtn(t){return this.oldManager.findIndex(e=>e.user_name===t.username)>=0}onSelect(t){this.memberSelected=t}addPermission(t){console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> position",t),this._storeService.addMember({user_manager:t.user_id}).pipe().subscribe(e=>{0==e.status?this.alertService.error(e.error):(this.alertService.success(this._translateService.translate("POND.MEMBER.ADD_SUCCESS")),this._storeService.managers.push(t),this._storeService.onLoaded$.next(1)),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.alertService.error(this._translateService.translate("CONNECT_ERROR"))})}removePermission(t){this._storeService.removeMember(this.oldManager[t].user_id,this.oldManager[t].permission).pipe().subscribe(e=>{0==e.status?this.alertService.error(e.error):(this.alertService.success(this._translateService.translate("POND.MEMBER.DELETED")),this._storeService.managers.splice(t,1),this._storeService.onLoaded$.next(1)),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.alertService.error(this._translateService.translate("CONNECT_ERROR"))})}presentRemoveUser(t){this._fuseConfirmationService.open({title:this._translateService.translate("WARNING"),message:this._translateService.translate("POND.MEMBER.DELETE_CONFIRM")}).afterClosed().subscribe(e=>{e&&"confirmed"==e&&this.removePermission(t)})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(de.n),g.Y36(s.Vn),g.Y36(m.so),g.Y36(m.WI),g.Y36(h.d),g.Y36(f.c),g.Y36(pt.R))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-manager"]],decls:21,vars:11,consts:[[1,"flex","flex-col","max-w-240","md:min-w-120","sm:max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],[1,"title","dialog-title",3,"innerHTML"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","sm:pb-0","overflow-y-auto"],["class","flex justify-between items-center py-1",4,"ngFor","ngForOf"],["mode","indeterminate",4,"ngIf"],["appearance","legacy",1,"w-full"],["matInput","",3,"placeholder","formControl"],[4,"ngFor","ngForOf"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"],[1,"flex","justify-between","items-center","py-1"],[1,"flex","justify-start","items-center"],["onError","this.src='assets/images/avatars/default-profile.jpg'",2,"border-radius","50%","width","32px","margin-right","5px",3,"src"],["mat-icon-button","","color","warn",3,"click"],["svgIcon","mat_solid:delete"],["mode","indeterminate"],[1,"flex","justify-between","items-center","py-1","w-full"],["mat-icon-button","","color","primary",3,"disabled","click"],["svgIcon","mat_solid:add"]],template:function(t,e){1&t&&(g.ynx(0),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g._UZ(4,"span",3),g.qZA(),g.TgZ(5,"button",4),g._UZ(6,"mat-icon",5),g.qZA(),g.qZA(),g.TgZ(7,"div",6),g.YNc(8,ue,7,2,"div",7),g.YNc(9,pe,1,0,"mat-progress-bar",8),g.TgZ(10,"mat-form-field",9),g.TgZ(11,"mat-label"),g._uU(12,"T\xecm"),g.qZA(),g._UZ(13,"input",10),g.qZA(),g.TgZ(14,"div"),g.YNc(15,ge,8,3,"div",11),g.ALo(16,"async"),g.qZA(),g.qZA(),g.TgZ(17,"div",12),g.TgZ(18,"button",13),g.TgZ(19,"span"),g._uU(20," Ho\xe0n T\u1ea5t "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&t&&(g.xp6(4),g.Q6J("innerHTML","Th\xe0nh Vi\xean",g.oJD),g.xp6(1),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(2),g.Q6J("ngForOf",e._storeService.managers),g.xp6(1),g.Q6J("ngIf",e.loadingFlag.pending),g.xp6(4),g.Q6J("placeholder","Nh\u1eadp t\xean t\xe0i kho\u1ea3n")("formControl",e.searchWord),g.xp6(2),g.Q6J("ngForOf",g.lcZ(16,9,e.members$)),g.xp6(3),g.Q6J("color","primary"))},directives:[Z.lW,m.ZT,x.Hw,r.sg,r.O5,v.KE,v.hX,_.Nt,u.Fj,u.JJ,u.oH,T.pW],pipes:[r.Ov],styles:[""]}),t})();function he(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._UZ(4,"span",4),g.qZA(),g.TgZ(5,"button",5),g._UZ(6,"mat-icon",6),g.qZA(),g.qZA(),g.TgZ(7,"div",7),g.TgZ(8,"div",8),g.TgZ(9,"p",9),g._uU(10,"Kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c/ho\xe0n t\xe1c sau khi x\xf3a kho"),g.qZA(),g.TgZ(11,"p",10),g._uU(12,"Nh\u1eadp 'XOA' \u0111\u1ec3 x\xe1c nh\u1eadn x\xf3a kho"),g.qZA(),g.TgZ(13,"mat-form-field"),g.TgZ(14,"input",11),g.NdJ("ngModelChange",function(e){return g.CHM(t),g.oxw().confirm=e}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(15,"div",12),g.TgZ(16,"button",13),g.NdJ("click",function(){return g.CHM(t),g.oxw().dialogRef.close("XOA")}),g._uU(17),g.qZA(),g.TgZ(18,"button",14),g.NdJ("click",function(){return g.CHM(t),g.oxw().dialogRef.close()}),g._uU(19),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=e.$implicit,i=g.oxw();g.xp6(4),g.Q6J("innerHTML","x\xf3a kho",g.oJD),g.xp6(1),g.Q6J("tabIndex",-1),g.xp6(1),g.Q6J("svgIcon","heroicons_outline:x"),g.xp6(8),g.Q6J("ngModel",i.confirm)("placeholder",t("CONFIRM_HINT")),g.xp6(2),g.Q6J("disabled","XOA"!=i.confirm),g.xp6(1),g.hij(" ",t("DELETE")," "),g.xp6(2),g.hij(" ",t("CANCEL")," ")}}let fe=(()=>{class t{constructor(t){this.dialogRef=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.so))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store-remove"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-120","sm:max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],[1,"title","dialog-title",3,"innerHTML"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","sm:pb-0","overflow-y-auto"],[1,"text-center"],[1,"text-xl","text-red-400","py-2"],[1,"text-sm","py-2"],["matInput","",3,"ngModel","placeholder","ngModelChange"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","","color","warn",1,"mr-3",3,"disabled","click"],["mat-stroked-button","",3,"click"]],template:function(t,e){1&t&&g.YNc(0,he,20,8,"ng-container",0),2&t&&g.Q6J("translocoRead","POND.REMOVE")},directives:[s.KI,Z.lW,m.ZT,x.Hw,v.KE,_.Nt,u.Fj,u.JJ,u.On],styles:[""]}),t})();var Ze=i(25578),xe=i(52692),ve=i(11436),_e=i(23017),Te=i(29551);function Ae(t,e){1&t&&g._UZ(0,"mat-progress-bar",28),2&t&&g.Q6J("mode","indeterminate")}function be(t,e){if(1&t){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div"),g.TgZ(5,"a",4),g._uU(6),g.qZA(),g.qZA(),g.TgZ(7,"div",5),g._UZ(8,"mat-icon",6),g.qZA(),g.TgZ(9,"div"),g.TgZ(10,"a",4),g._uU(11),g.qZA(),g.qZA(),g.TgZ(12,"div",5),g._UZ(13,"mat-icon",6),g.qZA(),g.TgZ(14,"div"),g.TgZ(15,"a",4),g._uU(16,"Kho"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(17,"div",7),g.TgZ(18,"a",8),g._UZ(19,"mat-icon",6),g.TgZ(20,"span",9),g._uU(21,"Back"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(22,"div",10),g.TgZ(23,"div",11),g.TgZ(24,"div",12),g.TgZ(25,"h2",13),g._uU(26),g.qZA(),g.qZA(),g.qZA(),g.TgZ(27,"div",14),g.TgZ(28,"button",15),g._UZ(29,"mat-icon",16),g.qZA(),g.TgZ(30,"button",17),g._UZ(31,"mat-icon",16),g.qZA(),g.TgZ(32,"button",18),g.NdJ("click",function(){return g.CHM(t),g.MAs(36).toggle()}),g._UZ(33,"mat-icon",19),g.qZA(),g.qZA(),g.qZA(),g.TgZ(34,"mat-drawer-container",20),g.TgZ(35,"mat-drawer",21,22),g._UZ(37,"fuse-vertical-navigation",23),g.qZA(),g.TgZ(38,"mat-drawer-content",24),g.TgZ(39,"div",25),g.TgZ(40,"div",26),g.TgZ(41,"div"),g.YNc(42,Ae,1,1,"mat-progress-bar",27),g.qZA(),g._UZ(43,"router-outlet"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&t){const t=e.$implicit,i=g.oxw();g.xp6(5),g.Q6J("routerLink","/company/"+(null==i.dbLocalService.company?null:i.dbLocalService.company.code)),g.xp6(1),g.Oqu(i.dbLocalService.company?i.dbLocalService.company.name:"Tepbac"),g.xp6(2),g.Q6J("svgIcon","heroicons_solid:chevron-right"),g.xp6(2),g.Q6J("routerLink","/farm/"+(null==i.farmSelected||null==i.farmSelected.infor?null:i.farmSelected.infor.code)),g.xp6(1),g.Oqu(null==i.farmSelected||null==i.farmSelected.infor?null:i.farmSelected.infor.name),g.xp6(2),g.Q6J("svgIcon","heroicons_solid:chevron-right"),g.xp6(2),g.Q6J("routerLink","/store/"+(null==i.farmSelected||null==i.farmSelected.infor?null:i.farmSelected.infor.code)+"/list-store"),g.xp6(3),g.MGl("routerLink","/farm/",i.fcode,""),g.xp6(1),g.Q6J("svgIcon","heroicons_solid:chevron-left"),g.xp6(7),g.hij(" ",t("TITLE")," "),g.xp6(2),g.Q6J("routerLink","feedingHistory"),g.xp6(1),g.Q6J("svgIcon","mat_outline:history_toggle_off"),g.xp6(1),g.s9C("matTooltip",t("TECHNICAL_REPORT")),g.Q6J("routerLink","chart"),g.xp6(1),g.Q6J("svgIcon","iconsmind:bar_chart2"),g.xp6(2),g.Q6J("svgIcon","heroicons_outline:menu"),g.xp6(2),g.Q6J("autoFocus",!1)("mode",i.drawerMode)("opened",i.drawerOpened)("position","end"),g.xp6(2),g.Q6J("navigation",i.menuData)("inner",!0)("mode","side")("name","company-components-navigation")("opened",!0),g.xp6(5),g.Q6J("ngIf",i.loadingFlag.pending)}}const qe=[{path:"",component:(()=>{class t{constructor(t,e,i,r,o,s,a,n,l){this._fuseMediaWatcherService=t,this._storeService=e,this._farmService=i,this._translateService=r,this._activatedRoute=o,this._matDialog=s,this.dbLocalService=a,this._alertService=n,this._router=l,this._unsubscribeAll=new ne.xQ,this.drawerMode="side",this.drawerOpened=!0,this.loadingFlag=new p.E,this.listStore=[],this.managers=[]}ngOnInit(){this._storeService.setFarmCode(this._activatedRoute.snapshot.paramMap.get("code"));const t=this._storeService.getFarmCode();console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> fcode",t),this.farmSelected=this.dbLocalService.farms.find(e=>e.infor.code==t),this._fuseMediaWatcherService.onMediaChange$.pipe((0,le.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)}),this._storeService.onLoaded$.subscribe(t=>{this.filterSideBar()}),this.initSideBar()}filterSideBar(){const t=this._router.url;this.wcodeImported=this._router.url.split("/")[t.split("/").length-1],this.menuData="list-store"!=t.split("/")[t.split("/").length-1]?[{title:this._translateService.translate("FARM.INVENTORY"),type:"group",children:[{title:this._translateService.translate("STORE.INVENTORY.IMPORT"),icon:"iconsmind:warehouse",type:"basic",function:()=>this.handleOpenPresentImportDialog()},{title:"\u0110\xe3 nh\u1eadp",icon:"mat_outline:history",type:"basic",link:"detail/"+this.wcodeImported+"/imported"},{title:"Th\xf4ng tin",icon:"mat_outline:info",type:"basic",function:()=>this.handleOpenDialogInfo()},{title:"Th\xe0nh vi\xean",badge:{title:this._storeService.managers.length.toString(),classes:"px-2 bg-primary text-on-primary rounded-full"},icon:"mat_outline:group_add",type:"basic",function:()=>this.openManagerSetting()},{title:"X\xf3a",icon:"iconsmind:remove",type:"basic",classes:{icon:"text-red-500",title:"text-red-500"},function:()=>this.handleOpenDeleteDialog()}]}]:[{title:this._translateService.translate("FARM.INVENTORY"),type:"group",children:[{title:"T\u1ea1o kho",icon:"iconsmind:add",type:"basic",function:()=>this.handleOpenCreateDialog()},{title:"B\xe1o c\xe1o",icon:"iconsmind:bar_chart2",type:"basic",link:"chart"},{title:"L\u1ecbch s\u1eed cho \u0103n",icon:"mat_outline:history_toggle_off",type:"basic",link:"feedingHistory"}]}]}initSideBar(){this.menuData=this._storeService.getWCodeStoreCode()?[{title:this._translateService.translate("FARM.INVENTORY"),type:"group",children:[{title:"Nh\u1eadp kho",icon:"iconsmind:warehouse",type:"basic",function:()=>this.handleOpenPresentImportDialog()},{title:"\u0110\xe3 nh\u1eadp",icon:"iconsmind:warehouse",type:"basic",link:"detail/"+this.wcodeImported+"/imported"},{title:"Th\xf4ng tin",icon:"iconsmind:warehouse",type:"basic",link:"store"},{title:"Th\xe0nh vi\xean",icon:"mat_outline:group_add",type:"basic",link:"store"}]}]:[{title:this._translateService.translate("FARM.INVENTORY"),type:"group",children:[{title:"T\u1ea1o kho",icon:"iconsmind:add",type:"basic",function:()=>this.handleOpenCreateDialog()},{title:"B\xe1o c\xe1o",icon:"iconsmind:bar_chart2",type:"basic",link:"chart"}]}]}handleOpenPresentImportDialog(){let t;this._storeService.ferWCodeDetailImported(this.wcodeImported).pipe().subscribe(e=>{console.log(e.data),this.storeDetailList=e.data.list,t=this._matDialog.open(Ct,{autoFocus:!1,data:this.storeDetailList}),t.afterClosed().subscribe(t=>{t&&(this._alertService.success(this._translateService.translate("STORE.IMPORT.ADD_SUCCESS")),this.getDataForListStore(),this._storeService.sendClickEvent())})})}getDataForListStore(){this.loadingFlag.setPending(!0),this._storeService.fetchStoreList().subscribe(t=>{1==t.status?(this.loadingFlag.setResult(!0),this.listStore=t.data.list):this._alertService.error(t.error)},t=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}handleOpenCreateDialog(){this._matDialog.open(b,{width:"650px"}).afterClosed().subscribe(t=>{t&&(this._router.navigate(["store/"+this._storeService.fcode+"/list-store"])&&(this._alertService.success(this._translateService.translate("TH\xcaM TH\xc0NH C\xd4NG")),this.getDataForListStore()),this._alertService.success(this._translateService.translate("TH\xcaM TH\xc0NH C\xd4NG")),this.loadingFlag.setResult(!0),this.getDataForListStore())})}openManagerSetting(){this._matDialog.open(me,{autoFocus:!1,data:{managers:this._storeService.managers}})}handleOpenDeleteDialog(){this._matDialog.open(fe,{autoFocus:!1,width:"500px"}).afterClosed().subscribe(t=>{t&&"XOA"==t&&this._storeService.deleteStore({confirm:"XOA"}).pipe().subscribe(t=>{1==t.status?(this._alertService.success(this._translateService.translate("POND.DELETE_SUCCESSFUL")),this._router.navigate(["store/"+this._storeService.fcode+"/list-store"])):this._alertService.error(t.error)})})}handleOpenDialogInfo(){this._matDialog.open(At,{autoFocus:!1,width:"650px"}).afterClosed().subscribe(t=>{t&&(this._alertService.success(this._translateService.translate("STORE.IMPORT.ADD_SUCCESS")),this.getDataForListStore())})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(Ze.T),g.Y36(h.d),g.Y36(F.D),g.Y36(s.Vn),g.Y36(d.gz),g.Y36(m.uw),g.Y36(Nt.T),g.Y36(f.c),g.Y36(d.F0))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-store"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-y-auto"],[1,"px-6","pt-6","sm:pt-6","sm:px-10","bg-card","dark:bg-transparent"],[1,"hidden","sm:flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500",3,"routerLink"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","pb-22","sm:pt-6","sm:pb-28","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","font-uppercase","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-stroked-button","","color","primary","matTooltip","L\u1ecbch s\u1eed cho \u0103n",1,"mr-2",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","","color","primary",1,"mr-2",3,"routerLink","matTooltip"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"flex-auto","-mt-16","rounded-t-2xl","shadow","bg-default"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened","position"],["matDrawer",""],[3,"navigation","inner","mode","name","opened"],[1,"flex","flex-col"],[1,"flex-auto","p-6","sm:p-10"],[1,"min-h-200","rounded-2xl"],[3,"mode",4,"ngIf"],[3,"mode"]],template:function(t,e){1&t&&g.YNc(0,be,44,26,"ng-container",0),2&t&&g.Q6J("translocoRead","STORE.INVENTORY")},directives:[s.KI,xe.PQ,d.yS,x.Hw,Z.lW,ve.gM,d.rH,_e.kh,_e.jA,Te.j,_e.LW,r.O5,d.lC,T.pW],styles:[""]}),t})(),children:[{path:"list-store",component:ae},{path:"detail/:code",component:te},{path:"detail/:code/imported",component:xt},{path:"chart",component:q},{path:"feedingHistory",component:P},{path:"add-store",component:b},{path:"info",component:At}]}];let Se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[d.Bz.forChild(qe)],d.Bz]}),t})(),we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[r.ez,Se,s.y4,l.m,n.q,o.PU,a.Z,c.N]]}),t})()}}]);