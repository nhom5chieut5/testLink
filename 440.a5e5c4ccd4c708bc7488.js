(self.webpackChunk_fuse_demo=self.webpackChunk_fuse_demo||[]).push([[440],{48440:(e,t,i)=>{"use strict";i.r(t),i.d(t,{CompanyModule:()=>ki});var o=i(38583),r=i(95987),a=i(44151),n=i(5396),s=i(82958),l=i(92340),c=i(22238),d=i(37716),u=i(8394),m=i(51095),p=i(76627);function g(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._uU(4),d.qZA(),d.TgZ(5,"button",4),d._UZ(6,"mat-icon",5),d.qZA(),d.qZA(),d.TgZ(7,"div",6),d._UZ(8,"div",7),d.qZA(),d.TgZ(9,"div",8),d.TgZ(10,"button",9),d.TgZ(11,"span"),d._uU(12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()),2&e){const e=t.$implicit;d.xp6(4),d.Oqu(e("TITLE")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(4),d.Q6J("color","secondary"),d.xp6(2),d.hij(" ",e("CLOSE")," ")}}let f=(()=>{class e{constructor(e){this.data=e}ngOnInit(){}ngAfterViewInit(){this.loadMap()}loadMap(){s.accessToken=l.Jj.TOKEN,this.map=new s.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[this.data[0].longitude,this.data[0].latitude],zoom:8}),this.data.forEach(e=>{let t=new s.Popup({offset:25}).setText(e.name);new s.Marker({draggable:!1}).setLngLat([e.longitude,e.latitude]).setPopup(t).addTo(this.map)})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(c.WI))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-map"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","w-240","md:min-w-160","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto"],["id","map",1,"mapbox"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"]],template:function(e,t){1&e&&d.YNc(0,g,13,5,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.MAP")},directives:[u.KI,m.lW,c.ZT,p.Hw],styles:[".mapbox[_ngcontent-%COMP%]{width:100%;height:400px}"]}),e})();var h=i(44342),Z=i(42120),x=i(40704),v=i(12178),_=i(93104);function A(e,t){1&e&&d._UZ(0,"mat-progress-bar",7)}function T(e,t){if(1&e&&(d.TgZ(0,"div",4),d.TgZ(1,"div",8),d.TgZ(2,"p"),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(3),d.Oqu(e("NO_FARM"))}}function q(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",9),d.TgZ(1,"button",10),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).presentMap()}),d.TgZ(2,"span",11),d._uU(3),d.qZA(),d._UZ(4,"mat-icon",12),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.xp6(1),d.Q6J("color","primary"),d.xp6(2),d.Oqu(e("FARM_MAP")),d.xp6(1),d.Q6J("svgIcon","heroicons_solid:map")}}function b(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",13),d.TgZ(1,"div",14),d.TgZ(2,"div",15),d.TgZ(3,"div"),d.TgZ(4,"div",16),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).goToFarm(t.code)}),d._uU(5),d.qZA(),d.TgZ(6,"div",17),d._uU(7),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",18),d.TgZ(9,"div",19),d.TgZ(10,"div",20),d.TgZ(11,"div",21),d._uU(12),d.qZA(),d.TgZ(13,"div",22),d._UZ(14,"div",23),d.qZA(),d.qZA(),d.TgZ(15,"div",24),d.TgZ(16,"div",25),d.TgZ(17,"div",26),d.TgZ(18,"div",21),d._uU(19),d.qZA(),d.qZA(),d.TgZ(20,"div",27),d.TgZ(21,"div",28),d.TgZ(22,"div",29),d._uU(23),d.ALo(24,"number"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(25,"div",25),d.TgZ(26,"div",26),d.TgZ(27,"div",21),d._uU(28),d.qZA(),d.qZA(),d.TgZ(29,"div",27),d.TgZ(30,"div",28),d.TgZ(31,"div",29),d._uU(32),d.ALo(33,"number"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(34,"div",25),d.TgZ(35,"div",26),d.TgZ(36,"div",21),d._uU(37),d.qZA(),d.qZA(),d.TgZ(38,"div",27),d.TgZ(39,"div",28),d.TgZ(40,"div",29),d._uU(41),d.ALo(42,"number"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw().$implicit,o=d.oxw();d.xp6(5),d.Oqu(e.name),d.xp6(2),d.hij("",e.address," "),d.xp6(5),d.Oqu(i("POND")),d.xp6(2),d.Q6J("options",o.initOptions(e.pond)),d.xp6(5),d.Oqu(i("REVENUE")),d.xp6(4),d.hij(" ",d.lcZ(24,10,e.money_in),"\u0111 "),d.xp6(5),d.Oqu(i("COSTS")),d.xp6(4),d.hij(" ",d.lcZ(33,12,e.money_out),"\u0111 "),d.xp6(5),d.Oqu(i("PROFIT")),d.xp6(4),d.hij(" ",d.lcZ(42,14,e.money_profit),"\u0111 ")}}function C(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"div",1),d.YNc(2,A,1,0,"mat-progress-bar",2),d.YNc(3,T,4,1,"div",3),d.TgZ(4,"div",4),d.YNc(5,q,5,3,"div",5),d.YNc(6,b,43,16,"div",6),d.qZA(),d.qZA(),d.BQk()),2&e){const e=d.oxw();d.xp6(2),d.Q6J("ngIf",e.loadingFlag.pending),d.xp6(1),d.Q6J("ngIf",0==e.listFarms.length),d.xp6(2),d.Q6J("ngIf",e.loadingFlag.result&&e.listFarms.length>0),d.xp6(1),d.Q6J("ngForOf",e.listFarms)}}let y=(()=>{class e{constructor(e,t,i,o,r,a){this.companyService=e,this.dbLocalService=t,this._alertService=i,this._router=o,this._matDialog=r,this._translate=a,this.loadingFlag=new n.E,this.listFarms=[],this.view=!1}ngOnInit(){this.loadFarms()}loadFarms(){this.loadingFlag.setPending(!0),this.companyService.loadFarms().pipe().subscribe(e=>{0==e.status?this._alertService.error(e.error):this.listFarms=e.data,this.loadingFlag.setResult(!0)},e=>{this._alertService.error(this._translate.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}initOptions(e){return{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"Th\xf4ng tin",type:"pie",radius:"55%",data:[{value:e.warning,name:this._translate.translate("BAD_POND")},{value:e.empty,name:this._translate.translate("EMPTY_POND")},{value:e.good,name:this._translate.translate("GOOD_POND")}]}]}}presentMap(){this._matDialog.open(f,{autoFocus:!1,data:this.listFarms})}goToFarm(e){this._router.navigateByUrl("farm/"+e)}ngAfterViewInit(){}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(h.J),d.Y36(Z.T),d.Y36(x.c),d.Y36(r.F0),d.Y36(c.uw),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-dashboard"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"grid","grid-cols-1","w-full"],["mode","indeterminate",4,"ngIf"],["class","flex flex-col w-full",4,"ngIf"],[1,"flex","flex-col","w-full"],["class","mb-4",4,"ngIf"],["class","mt-8",4,"ngFor","ngForOf"],["mode","indeterminate"],[1,"text-center"],[1,"mb-4"],["mat-stroked-button","",1,"fuse-mat-button",3,"color","click"],[1,"mr-2"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-8"],[1,"flex","flex-wrap","w-full","max-w-screen-xl"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8","cursor-pointer","hover:text-blue-500",3,"click"],[1,"font-medium","tracking-tight","text-secondary"],[1,"grid","grid-cols-1","w-full","mt-8"],[1,"grid","grid-cols-1","sm:grid-cols-6","gap-6","w-full","min-w-0"],[1,"sm:col-span-3","lg:col-span-4","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","flex-col","flex-auto"],["echarts","",3,"options"],[1,"sm:col-span-3","lg:col-span-2","grid","grid-cols-1","gap-y-6"],[1,"sm:col-span-2","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","items-start","justify-between"],[1,"flex","items-center","mt-1"],[1,"flex","flex-col"],[1,"text-3xl","font-semibold","tracking-tight","leading-tight"]],template:function(e,t){1&e&&d.YNc(0,C,7,4,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.DASHBOARD")},directives:[u.KI,o.O5,o.sg,v.pW,m.lW,p.Hw,_.w],pipes:[o.JJ],styles:["#map[_ngcontent-%COMP%]{width:100%;height:250px}"]}),e})(),w=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-edit"]],decls:2,vars:0,template:function(e,t){1&e&&(d.TgZ(0,"p"),d._uU(1,"company-edit works!"),d.qZA())},styles:[""]}),e})();var I=i(16738),U=i.n(I),N=i(13994);function E(e,t){if(1&e&&(d.TgZ(0,"fuse-alert",6),d._UZ(1,"mat-icon",7),d.TgZ(2,"p"),d.TgZ(3,"b"),d._uU(4),d.qZA(),d._uU(5),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(2);d.Q6J("routerLink",e.link)("appearance","outline")("type","primary"),d.xp6(1),d.Q6J("svgIcon",i.filterIcon(e.mod_name)),d.xp6(3),d.Oqu(e.time),d.xp6(1),d.hij(" | ",e.content,"")}}function S(e,t){1&e&&d._UZ(0,"mat-progress-bar",8)}function O(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.YNc(2,E,6,6,"fuse-alert",2),d.YNc(3,S,1,0,"mat-progress-bar",3),d.TgZ(4,"div",4),d.TgZ(5,"button",5),d.NdJ("click",function(){return d.CHM(e),d.oxw().loadMore()}),d._uU(6),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(2),d.Q6J("ngForOf",i.listHistory),d.xp6(1),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(3),d.Oqu(e("SEE_MORE"))}}let J=(()=>{class e{constructor(e,t,i,o){this.companyService=e,this._alertService=t,this.dbLocalService=i,this._translate=o,this.loadingFlag=new n.E,this.page=0,this.listHistory=[]}ngOnInit(){this.getList()}getList(){this.loadingFlag.setPending(!0),this.companyService.listNotifications(this.page).subscribe(e=>{1==e.status?(e.data.list.forEach(e=>{e.time=U()(new Date(1e3*e.add_time),"YYYYMMDD").fromNow(),e.link=this.filterLink(e.mod_name,e.item_code),e.content=e.content.replaceAll(this.dbLocalService.farmextUser.username,"B\u1ea1n"),this.listHistory.push(e)}),this.loadingFlag.setResult(!0)):(this._alertService.error(e.error),this.loadingFlag.setResult(!1))},()=>{this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}filterLink(e,t){switch(e){case"farm":return"/farm/"+t+"/pond";case"pond":return"/pond/"+t;case"store_farm":return"/store/"+t;case"money":return"/money/"+t;default:return"/home"}}loadMore(){this.page+=1,this.getList()}filterIcon(e){switch(e){case"farm":return"mat_outline:streetview";case"pond":return"mat_outline:water";case"store_farm":return"iconsmind:clothing_store";case"money":return"iconsmind:money_bag";default:return"heroicons_solid:user"}}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(h.J),d.Y36(x.c),d.Y36(Z.T),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-history"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"grid","grid-cols-1","gap-4","w-full"],["class","w-full",3,"routerLink","appearance","type",4,"ngFor","ngForOf"],["class","w-full","mode","indeterminate",4,"ngIf"],[1,"text-center"],["mat-button","",3,"click"],[1,"w-full",3,"routerLink","appearance","type"],["fuseAlertIcon","",1,"icon-size-5",3,"svgIcon"],["mode","indeterminate",1,"w-full"]],template:function(e,t){1&e&&d.YNc(0,O,7,3,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY")},directives:[u.KI,o.sg,o.O5,m.lW,N.W,r.rH,p.Hw,v.pW],styles:[""]}),e})();var F=i(21611),R=i(3679),k=i(28288),Q=i(19602),D=i(98295),Y=i(49983);const P=["fuseCard"];function L(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"fuse-card",1,2),d.ynx(3,3),d.TgZ(4,"div",4),d.TgZ(5,"div",5),d._uU(6),d.qZA(),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d._UZ(9,"mat-icon",8),d.TgZ(10,"div",9),d.TgZ(11,"span",10),d._uU(12),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"span",11),d._uU(14),d.qZA(),d.qZA(),d.TgZ(15,"div",6),d.TgZ(16,"div",7),d._UZ(17,"mat-icon",12),d.TgZ(18,"div",9),d.TgZ(19,"span",10),d._uU(20),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"span",11),d._uU(22),d.qZA(),d.qZA(),d.TgZ(23,"div",6),d.TgZ(24,"div",7),d._UZ(25,"mat-icon",13),d.TgZ(26,"div",9),d.TgZ(27,"span",10),d._uU(28),d.qZA(),d.qZA(),d.qZA(),d.TgZ(29,"span",11),d._uU(30),d.qZA(),d.qZA(),d.TgZ(31,"div",6),d.TgZ(32,"div",7),d._UZ(33,"mat-icon",14),d.TgZ(34,"div",9),d.TgZ(35,"span",10),d._uU(36,"Email"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(37,"span",11),d._uU(38),d.qZA(),d.qZA(),d.TgZ(39,"div",6),d.TgZ(40,"div",7),d._UZ(41,"mat-icon",15),d.TgZ(42,"div",9),d.TgZ(43,"span",10),d._uU(44,"Website"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(45,"span",11),d._uU(46),d.qZA(),d.qZA(),d.TgZ(47,"div",16),d.TgZ(48,"button",17),d.NdJ("click",function(){return d.CHM(e),d.MAs(2).face="back"}),d._UZ(49,"mat-icon",18),d._uU(50),d.qZA(),d.qZA(),d.qZA(),d.BQk(),d.ynx(51,19),d.TgZ(52,"div",20),d.TgZ(53,"div",21),d.TgZ(54,"button",22),d.NdJ("click",function(){return d.CHM(e),d.MAs(2).face="front"}),d._UZ(55,"mat-icon",18),d.qZA(),d.qZA(),d.TgZ(56,"div",23),d.TgZ(57,"p",24),d._uU(58),d.qZA(),d.TgZ(59,"div",25),d.TgZ(60,"div",26),d.TgZ(61,"mat-form-field",27),d._UZ(62,"input",28),d._UZ(63,"mat-icon",29),d.qZA(),d.TgZ(64,"mat-form-field",27),d._UZ(65,"input",30),d._UZ(66,"mat-icon",29),d.qZA(),d.qZA(),d.TgZ(67,"div",26),d.TgZ(68,"mat-form-field",27),d._UZ(69,"input",31),d._UZ(70,"mat-icon",29),d.qZA(),d.TgZ(71,"mat-form-field",32),d._UZ(72,"input",33),d._UZ(73,"mat-icon",29),d.qZA(),d.qZA(),d.TgZ(74,"div",26),d.TgZ(75,"mat-form-field",27),d._UZ(76,"input",34),d._UZ(77,"mat-icon",29),d.qZA(),d.TgZ(78,"mat-form-field",32),d._UZ(79,"input",35),d._UZ(80,"mat-icon",29),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(81,"div",16),d.TgZ(82,"button",36),d.NdJ("click",function(){return d.CHM(e),d.oxw().saveInfor()}),d._UZ(83,"mat-icon",18),d._uU(84),d.qZA(),d.qZA(),d.qZA(),d.BQk(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(1),d.Q6J("flippable",!0),d.xp6(5),d.Oqu(e("TITLE")),d.xp6(6),d.Oqu(e("FULLNAME")),d.xp6(2),d.Oqu(null==i.dbLocalService.company?null:i.dbLocalService.company.fullname),d.xp6(6),d.Oqu(e("ADDRESS")),d.xp6(2),d.Oqu(null==i.dbLocalService.company?null:i.dbLocalService.company.address),d.xp6(6),d.Oqu(e("PHONE")),d.xp6(2),d.Oqu(null==i.dbLocalService.company?null:i.dbLocalService.company.phone),d.xp6(8),d.Oqu(null==i.dbLocalService.company?null:i.dbLocalService.company.email),d.xp6(8),d.Oqu(null==i.dbLocalService.company?null:i.dbLocalService.company.website),d.xp6(2),d.Q6J("color","primary"),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:pencil-alt"),d.xp6(1),d.hij(" ",e("UPDATE")," "),d.xp6(4),d.Q6J("color","primary"),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:arrow-left"),d.xp6(1),d.Q6J("formGroup",i.editCompany),d.xp6(2),d.Oqu(e("UPDATE_PROFILE")),d.xp6(4),d.Q6J("placeholder",e("NAME")),d.xp6(1),d.Q6J("svgIcon","mat_solid:account_circle"),d.xp6(2),d.Q6J("placeholder",e("FULLNAME")),d.xp6(1),d.Q6J("svgIcon","mat_solid:business"),d.xp6(3),d.Q6J("placeholder","Email"),d.xp6(1),d.Q6J("svgIcon","mat_solid:email"),d.xp6(2),d.Q6J("placeholder","Website"),d.xp6(1),d.Q6J("svgIcon","heroicons_solid:globe-alt"),d.xp6(3),d.Q6J("placeholder",e("PHONE")),d.xp6(1),d.Q6J("svgIcon","mat_solid:phone"),d.xp6(2),d.Q6J("placeholder",e("ADDRESS")),d.xp6(1),d.Q6J("svgIcon","mat_solid:location_on"),d.xp6(2),d.Q6J("disabled",i.editCompany.invalid)("color","primary"),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:check"),d.xp6(1),d.hij(" ",e("SAVE")," ")}}let M=(()=>{class e{constructor(e,t,i,o){this.companyService=e,this.dbLocalService=t,this._alertService=i,this._translate=o,this.loadingFlag=new n.E,this.settingChanged=!1,this.editCompany=new R.cw({name:new R.NI("",[R.kI.required,R.kI.minLength(3)]),address:new R.NI("",R.kI.required),fullname:new R.NI("",R.kI.required),phone:new R.NI("",R.kI.required),email:new R.NI("",R.kI.required),website:new R.NI("")})}ngOnInit(){this.getData()}getData(){var e=this;return(0,F.Z)(function*(){yield e.dbLocalService.getLocalData(),void 0===e.dbLocalService.company?e.loadCompany():e.companyService.setCompany(e.dbLocalService.company),e.initForm()})()}loadCompany(){var e=this;return(0,F.Z)(function*(){const t=yield e.companyService.loadCompany().toPromise().catch(()=>{e._alertService.error(e._translate.translate("CONNECT_ERROR"))});t&&1==t.status?(e.companyService.setCompany(t.data),e.dbLocalService.company=t.data,e.dbLocalService.setLocalData("company",e.dbLocalService.company)):e._alertService.error(t.error)})()}initForm(){var e,t,i,o,r,a;this.editCompany=new R.cw({name:new R.NI(null===(e=this.companyService.company)||void 0===e?void 0:e.name,[R.kI.required,R.kI.minLength(3)]),address:new R.NI(null===(t=this.companyService.company)||void 0===t?void 0:t.address,R.kI.required),fullname:new R.NI(null===(i=this.companyService.company)||void 0===i?void 0:i.fullname,R.kI.required),phone:new R.NI(null===(o=this.companyService.company)||void 0===o?void 0:o.phone,R.kI.required),email:new R.NI(null===(r=this.companyService.company)||void 0===r?void 0:r.email,R.kI.required),website:new R.NI(null===(a=this.companyService.company)||void 0===a?void 0:a.website)})}saveInfor(){this.editCompany.value.website&&this.editCompany.value.website.length>0&&!this.editCompany.value.website.includes("http")&&this.editCompany.patchValue({website:"http://"+this.editCompany.value.website}),this.companyService.updateInforCompany(this.editCompany.value).pipe().subscribe(e=>{0==e.status?this._alertService.error(e.error):(this._alertService.success(this._translate.translate("UPDATE_SUCCESS")),this.fuseCard.face="front",this.companyService.company.name=this.editCompany.value.name,this.companyService.company.address=this.editCompany.value.address,this.companyService.company.fullname=this.editCompany.value.fullname,this.companyService.company.phone=this.editCompany.value.phone,this.companyService.company.email=this.editCompany.value.email,this.companyService.company.website=this.editCompany.value.website,this.dbLocalService.company=this.companyService.company,this.dbLocalService.setLocalData("company",this.dbLocalService.company))},e=>{this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(h.J),d.Y36(Z.T),d.Y36(x.c),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-info"]],viewQuery:function(e,t){if(1&e&&d.Gf(P,5),2&e){let e;d.iGM(e=d.CRH())&&(t.fuseCard=e.first)}},decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","w-full",3,"flippable"],["fuseCard",""],["fuseCardFront",""],[1,"flex","flex-col","px-8","py-6","pb-3"],[1,"text-lg","font-bold"],[1,"p-4","flex","justify-between","fuse-vertical-navigation-item-wrapper"],[1,"flex","justify-start","fuse-vertical-navigation-item-wrapper"],["svgIcon","mat_solid:business"],[1,"text-base","fuse-vertical-navigation-item-wrapper"],[2,"vertical-align","sub"],[1,"text-base"],["svgIcon","mat_solid:location_on"],["svgIcon","mat_solid:email"],["svgIcon","mat_solid:phone"],["svgIcon","heroicons_solid:globe-alt"],[1,"mt-3","-mx-3","self-end"],["mat-button","",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],["fuseCardBack",""],[1,"flex","flex-col","flex-auto","px-8","py-6","pt-3"],[1,"mb-2","-mx-3"],["mat-icon-button","",3,"color","click"],[1,"flex","flex-col","px-8",3,"formGroup"],[1,"text-lg","font-medium"],[1,"mt-4"],[1,"flex","flex-row"],[1,"w-full","pr-1"],["matInput","","formControlName","name",3,"placeholder"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","formControlName","fullname",3,"placeholder"],["matInput","","formControlName","email",3,"placeholder"],[1,"w-full"],["matInput","","formControlName","website",3,"placeholder"],["matInput","","formControlName","phone",3,"placeholder"],["matInput","","formControlName","address",3,"placeholder"],["mat-raised-button","",3,"disabled","color","click"]],template:function(e,t){1&e&&d.YNc(0,L,85,33,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY")},directives:[u.KI,Q.y,p.Hw,m.lW,R.JL,R.sg,D.KE,Y.Nt,R.Fj,R.JJ,R.u,D.qo],styles:[""],data:{animation:k.L}}),e})();var j=i(64245),H=i(39761),$=i(88002),B=i(28049),W=i(21554),V=i(72458);function G(e,t){1&e&&d._UZ(0,"mat-progress-bar",18)}function K(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-option",19),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).onSelect(t)}),d._uU(1),d.qZA()}if(2&e){const e=t.$implicit;d.Q6J("value",e.product_name),d.xp6(1),d.hij(" ",e.product_name," ")}}function z(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",20),d.TgZ(1,"div",21),d.TgZ(2,"p"),d._uU(3),d.qZA(),d.TgZ(4,"p"),d._uU(5),d.qZA(),d.qZA(),d.TgZ(6,"button",22),d.NdJ("click",function(){const t=d.CHM(e).index;return d.oxw(2).onRemove(t)}),d._uU(7),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw().$implicit;d.xp6(3),d.Oqu(e.product_name),d.xp6(2),d.Oqu(e.manufacturer_name),d.xp6(2),d.Oqu(i("DELETE"))}}function X(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"span",4),d._uU(5),d.qZA(),d.qZA(),d.TgZ(6,"button",5),d._UZ(7,"mat-icon",6),d.qZA(),d.qZA(),d.TgZ(8,"div",7),d.TgZ(9,"div"),d.YNc(10,G,1,0,"mat-progress-bar",8),d.qZA(),d.TgZ(11,"div",9),d.TgZ(12,"mat-form-field",10),d.TgZ(13,"mat-label"),d._uU(14),d.qZA(),d._UZ(15,"input",11),d.TgZ(16,"mat-autocomplete",null,12),d.YNc(18,K,2,2,"mat-option",13),d.ALo(19,"async"),d.qZA(),d.qZA(),d.YNc(20,z,8,3,"div",14),d.qZA(),d.qZA(),d.TgZ(21,"div",15),d._uU(22),d.qZA(),d.TgZ(23,"div",16),d.TgZ(24,"button",17),d.NdJ("click",function(){return d.CHM(e),d.oxw().onSave()}),d.TgZ(25,"span"),d._uU(26),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.MAs(17),o=d.oxw();d.xp6(5),d.Oqu(e("TITLE")),d.xp6(1),d.Q6J("tabIndex",-1)("mat-dialog-close",o.dataChanged),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(3),d.Q6J("ngIf",o.loadingFlag.pending),d.xp6(4),d.Oqu(e("SEARCH")),d.xp6(1),d.Q6J("placeholder",e("ENTER_PRODUCT"))("formControl",o.searchWord)("matAutocomplete",i),d.xp6(3),d.Q6J("ngForOf",d.lcZ(19,15,o.products$)),d.xp6(2),d.Q6J("ngForOf",o.productsSelected),d.xp6(2),d.Oqu(e("NOTE")),d.xp6(2),d.Q6J("color","primary")("disabled",0==o.productsSelected.length),d.xp6(2),d.hij(" ",e("SAVE")," ")}}let ee=(()=>{class e{constructor(e,t,i,o){this._companyService=e,this._alertService=t,this._translateService=i,this.dialogRef=o,this.loadingFlag=new n.E,this.searchWord=new R.NI,this.productsSelected=[],this.dataChanged=!1,this.listProduct=[]}ngOnInit(){this.products$=this.searchWord.valueChanges.pipe((0,H.O)(""),(0,$.U)(e=>this._filter(e||"")))}_filter(e){this._companyService.searchStore(e).pipe().subscribe(e=>{this.listProduct=e.data});const t=e.toLowerCase();if(null!=this.listProduct)return this.listProduct.filter(e=>e.product_name.toLowerCase().includes(t));this.listProduct=[]}onSelect(e){this.productsSelected.includes(e)?this._alertService.warn(this._translateService.translate("STORE.PRODUCT_ADD.PRODUCT_SELECTED")):this.productsSelected.push(e)}onRemove(e){this.productsSelected.splice(e,1)}onSave(){let e=[];this.productsSelected.forEach(t=>{e.push(t.id)}),0!==e.length?(this.loadingFlag.setPending(!0),this._companyService.createAddItem({row:e}).pipe((0,B.P)()).subscribe(e=>{this.loadingFlag.setResult(!0),1===e.status&&this.dialogRef.close(!0),e.error?this._alertService.error(e.error):this._alertService.success(e.message)},e=>{this.loadingFlag.setResult(!1),this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})):this._alertService.error(this._translateService.translate("STORE.PRODUCT_ADD.WARN_MIN"))}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(h.J),d.Y36(x.c),d.Y36(u.Vn),d.Y36(c.so))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-product-add"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],[1,"title","dialog-title"],["mat-icon-button","",3,"tabIndex","mat-dialog-close"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","overflow-y-auto","p-6","sm:p-8","sm:pb-0"],["mode","indeterminate",4,"ngIf"],[1,"w-full"],["appearance","legacy",1,"w-full"],["type","text","matInput","",3,"placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["class","flex justify-between items-center py-1",4,"ngFor","ngForOf"],[1,"text-secondary","py-4","pr-4","pl-8"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-raised-button","",1,"fuse-mat-button",3,"color","disabled","click"],["mode","indeterminate"],[3,"value","click"],[1,"flex","justify-between","items-center","py-1"],[1,"flex","justify-start","items-center"],["mat-stroked-button","","color","warn",3,"click"]],template:function(e,t){1&e&&d.YNc(0,X,27,17,"ng-container",0),2&e&&d.Q6J("translocoRead","STORE.PRODUCT_ADD")},directives:[u.KI,m.lW,c.ZT,p.Hw,o.O5,D.KE,D.hX,Y.Nt,R.Fj,W.ZL,R.JJ,R.oH,W.XC,o.sg,v.pW,V.ey],pipes:[o.Ov],styles:[""]}),e})();var te=i(67441);function ie(e,t){1&e&&d._UZ(0,"mat-progress-bar",28),2&e&&d.Q6J("mode","indeterminate")}function oe(e,t){if(1&e&&(d.TgZ(0,"mat-option",33),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e),d.xp6(1),d.hij("",e," ")}}function re(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-form-field",11),d.TgZ(1,"mat-label"),d._uU(2),d.qZA(),d.TgZ(3,"mat-select",29),d.NdJ("selectionChange",function(t){return d.CHM(e),d.oxw(2).changeSelect(t)}),d.TgZ(4,"mat-option",30),d._uU(5,"Kg "),d.qZA(),d.TgZ(6,"mat-option",31),d._uU(7),d.qZA(),d.YNc(8,oe,2,2,"mat-option",32),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw();d.xp6(2),d.Oqu(e("UNIT")),d.xp6(1),d.Q6J("placeholder",e("SELECT")),d.xp6(4),d.hij("",e("LITER")," "),d.xp6(1),d.Q6J("ngForOf",t.unitCreate)}}function ae(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-form-field",11),d.TgZ(1,"mat-label"),d._uU(2),d.qZA(),d.TgZ(3,"input",34),d.NdJ("focusout",function(){return d.CHM(e),d.oxw(2).saveUnit()}),d.qZA(),d.TgZ(4,"button",35),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).saveUnit()}),d._UZ(5,"mat-icon",36),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.xp6(2),d.Oqu(e("ADD_UNIT")),d.xp6(1),d.Q6J("placeholder",e("ADD_UNIT"))}}function ne(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-icon",37),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2);return t.isFalshy=!t.isFalshy}),d.qZA()}}function se(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-icon",38),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2);return t.isFalshy=!t.isFalshy}),d.qZA()}}function le(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-form-field",39),d.TgZ(1,"mat-label"),d._uU(2),d.qZA(),d.TgZ(3,"input",40),d.NdJ("keypress",function(t){return d.CHM(e),d.oxw(2).validNo(t)}),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.xp6(2),d.Oqu(e("NORM_UNIT")),d.xp6(1),d.Q6J("placeholder",e("NORM_UNIT"))}}function ce(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._uU(4),d.qZA(),d.TgZ(5,"button",4),d._UZ(6,"mat-icon",5),d.qZA(),d.qZA(),d.TgZ(7,"div",6),d.TgZ(8,"div"),d.YNc(9,ie,1,1,"mat-progress-bar",7),d.qZA(),d.TgZ(10,"div",8),d.TgZ(11,"div",9),d.TgZ(12,"div",10),d.TgZ(13,"mat-form-field",11),d.TgZ(14,"mat-label"),d._uU(15),d.qZA(),d._UZ(16,"input",12),d.qZA(),d.qZA(),d.TgZ(17,"div",10),d.TgZ(18,"mat-form-field",11),d.TgZ(19,"mat-label"),d._uU(20),d.qZA(),d.TgZ(21,"mat-select",13),d.TgZ(22,"mat-option",14),d._uU(23),d.qZA(),d.TgZ(24,"mat-option",15),d._uU(25),d.qZA(),d.TgZ(26,"mat-option",16),d._uU(27),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(28,"div",17),d.YNc(29,re,9,4,"mat-form-field",18),d.YNc(30,ae,6,2,"mat-form-field",18),d.YNc(31,ne,1,0,"mat-icon",19),d.YNc(32,se,1,0,"mat-icon",20),d.qZA(),d.TgZ(33,"div",17),d.YNc(34,le,4,2,"mat-form-field",21),d.TgZ(35,"mat-form-field",11),d.TgZ(36,"mat-label"),d._uU(37),d.qZA(),d._UZ(38,"input",22),d.qZA(),d.qZA(),d.TgZ(39,"div",10),d.TgZ(40,"mat-form-field",11),d.TgZ(41,"mat-label"),d._uU(42),d.qZA(),d._UZ(43,"input",23),d.qZA(),d.qZA(),d.TgZ(44,"div",10),d.TgZ(45,"mat-form-field",11),d.TgZ(46,"mat-label"),d._uU(47),d.qZA(),d._UZ(48,"input",24),d.TgZ(49,"mat-error"),d._uU(50,"L\u1edbn h\u01a1n 0 "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(51,"div",25),d.TgZ(52,"button",26),d.NdJ("click",function(){return d.CHM(e),d.oxw().onSubmit()}),d.TgZ(53,"span"),d._uU(54),d.qZA(),d.qZA(),d.TgZ(55,"button",27),d.TgZ(56,"span"),d._uU(57),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(4),d.Oqu(e("ADD_TITLE")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(1),d.Q6J("formGroup",i.form),d.xp6(2),d.Q6J("ngIf",i.savingFlag.pending),d.xp6(6),d.Oqu(e("NAME")),d.xp6(1),d.Q6J("placeholder",e("NAME")),d.xp6(4),d.Oqu(e("USES")),d.xp6(1),d.Q6J("placeholder",e("SELECT")),d.xp6(2),d.hij("",e("FEED")," "),d.xp6(2),d.hij("",e("SUPPLEMENT")," "),d.xp6(2),d.hij("",e("CHEMICAL")," "),d.xp6(2),d.Q6J("ngIf",!i.isFalshy),d.xp6(1),d.Q6J("ngIf",i.isFalshy),d.xp6(1),d.Q6J("ngIf",!i.isFalshy),d.xp6(1),d.Q6J("ngIf",i.isFalshy),d.xp6(2),d.Q6J("ngIf",i.normBoolean),d.xp6(3),d.Oqu(e("MANUFACTURER")),d.xp6(1),d.Q6J("placeholder",e("MANUFACTURER")),d.xp6(4),d.Oqu(e("USAGE")),d.xp6(1),d.Q6J("placeholder",e("USAGE")),d.xp6(4),d.Oqu(e("DOSAGE")),d.xp6(1),d.Q6J("placeholder",e("DOSAGE_NOTE")),d.xp6(4),d.Q6J("color","primary")("disabled",!i.form.valid),d.xp6(2),d.hij(" ",e("SAVE")," "),d.xp6(1),d.Q6J("color","secondary"),d.xp6(2),d.hij(" ",e("CANCEL")," ")}}let de=(()=>{class e{constructor(e,t,i,o,r){this.dialogRef=e,this._companyService=t,this._alertService=i,this._translateService=o,this._formBuilder=r,this.savingFlag=new n.E,this.isFalshy=!1,this.normBoolean=!1,this.unitCreate=[]}ngOnInit(){this.createForm()}createForm(){this.form=this._formBuilder.group({name:["",[R.kI.required]],group:["",[R.kI.required]],unit:["",[R.kI.required]],manufacturer:["",[R.kI.required]],uses:["",[R.kI.required]],dosage:[""],add_unit:[""],packing:["",R.kI.required]})}validNo(e){const t=e.which?e.which:e.keycode;return!(t>31&&(t<48||t>58))}checkNormUnit(){let e=this.unitCreate.filter(e=>"kg"!=e&&"lit"!=e);this.normBoolean=0!=e.length}saveUnit(){""!=this.form.value.add_unit&&(this.unitCreate.push(this.form.value.add_unit),this.form.patchValue({unit:this.form.value.add_unit}),this.isFalshy=!1,this.unitCreate=this.unitCreate.filter((e,t,i)=>i.indexOf(e)==t),this.checkNormUnit())}changeSelect(e){"lit"!=e.value&&"kg"!=e.value||(this.normBoolean=!1,this.form.patchValue({packing:1}))}onSubmit(){this.savingFlag.setPending(!0),this._companyService.createNewProduct(this.form.value).pipe((0,B.P)()).subscribe(e=>{1==e.status?this.dialogRef.close(!0):this._alertService.error(e.error),this.savingFlag.setResult(!0)},e=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.savingFlag.setResult(!1)})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(c.so),d.Y36(h.J),d.Y36(x.c),d.Y36(u.Vn),d.Y36(R.qu))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-product-create"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","sm:pb-0","overflow-y-auto",3,"formGroup"],[3,"mode",4,"ngIf"],[1,"w-full"],[1,"flex","flex-col","w-full"],[1,"flex"],[1,"flex-auto"],["matInput","","formControlName","name",3,"placeholder"],["formControlName","group",3,"placeholder"],["value","1"],["value","2"],["value","3"],[1,"flex","items-center"],["class","flex-auto",4,"ngIf"],["class","cursor-pointer h-full text-blue-700","svgIcon","mat_outline:add_circle_outline",3,"click",4,"ngIf"],["class","cursor-pointer h-full text-blue-700","svgIcon","mat_outline:close",3,"click",4,"ngIf"],["class","flex-auto mr-6",4,"ngIf"],["matInput","","formControlName","manufacturer",3,"placeholder"],["matInput","","formControlName","uses",3,"placeholder"],["matInput","","type","number","id","","formControlName","dosage","min","0",3,"placeholder"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","",1,"fuse-mat-button","mr-3",3,"color","disabled","click"],["mat-flat-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"],[3,"mode"],["formControlName","unit",3,"placeholder","selectionChange"],["value","kg"],["value","lit"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","formControlName","add_unit",3,"placeholder","focusout"],[3,"click"],["svgIcon","mat_outline:check_circle"],["svgIcon","mat_outline:add_circle_outline",1,"cursor-pointer","h-full","text-blue-700",3,"click"],["svgIcon","mat_outline:close",1,"cursor-pointer","h-full","text-blue-700",3,"click"],[1,"flex-auto","mr-6"],["matInput","","type","number","formControlName","packing",3,"placeholder","keypress"]],template:function(e,t){1&e&&d.YNc(0,ce,58,28,"ng-container",0),2&e&&d.Q6J("translocoRead","STORE.PRODUCT_EDIT")},directives:[u.KI,m.lW,c.ZT,p.Hw,R.JL,R.sg,o.O5,D.KE,D.hX,Y.Nt,R.Fj,R.JJ,R.u,te.gD,V.ey,R.wV,R.qQ,D.TO,v.pW,o.sg],styles:[""]}),e})();function ue(e,t){1&e&&d._UZ(0,"mat-progress-bar",28),2&e&&d.Q6J("mode","indeterminate")}function me(e,t){if(1&e&&(d.TgZ(0,"mat-option",33),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e),d.xp6(1),d.hij("",e," ")}}function pe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-form-field",13),d.TgZ(1,"mat-label"),d._uU(2),d.qZA(),d.TgZ(3,"mat-select",29),d.NdJ("selectionChange",function(t){return d.CHM(e),d.oxw(2).changeOption(t)}),d.TgZ(4,"mat-option",30),d._uU(5,"Kg "),d.qZA(),d.TgZ(6,"mat-option",31),d._uU(7),d.qZA(),d.YNc(8,me,2,2,"mat-option",32),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw();d.xp6(2),d.Oqu(e("UNIT")),d.xp6(1),d.Q6J("placeholder",e("SELECT")),d.xp6(4),d.hij("",e("LITER")," "),d.xp6(1),d.Q6J("ngForOf",t.unitCreate)}}function ge(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-form-field",13),d.TgZ(1,"mat-label"),d._uU(2),d.qZA(),d.TgZ(3,"input",34),d.NdJ("focusout",function(){return d.CHM(e),d.oxw(2).saveUnit()}),d.qZA(),d.TgZ(4,"button",35),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).saveUnit()}),d._UZ(5,"mat-icon",36),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.xp6(2),d.Oqu(e("ADD_UNIT")),d.xp6(1),d.Q6J("placeholder",e("ADD_UNIT"))}}function fe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-icon",37),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2);return t.isFalshy=!t.isFalshy}),d.qZA()}}function he(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-icon",38),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2);return t.isFalshy=!t.isFalshy}),d.qZA()}}function Ze(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-form-field",11),d.TgZ(1,"mat-label"),d._uU(2),d.qZA(),d.TgZ(3,"input",39),d.NdJ("keypress",function(t){return d.CHM(e),d.oxw(2).validNo(t)}),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.xp6(2),d.Oqu(e("NORM_UNIT")),d.xp6(1),d.Q6J("placeholder",e("NORM_UNIT"))}}function xe(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._uU(4),d.qZA(),d.TgZ(5,"button",4),d._UZ(6,"mat-icon",5),d.qZA(),d.qZA(),d.TgZ(7,"div",6),d.TgZ(8,"div"),d.YNc(9,ue,1,1,"mat-progress-bar",7),d.qZA(),d.TgZ(10,"div",8),d.TgZ(11,"div",9),d.TgZ(12,"div",10),d.TgZ(13,"mat-form-field",11),d.TgZ(14,"mat-label"),d._uU(15),d.qZA(),d._UZ(16,"input",12),d.qZA(),d.TgZ(17,"mat-form-field",13),d.TgZ(18,"mat-label"),d._uU(19),d.qZA(),d.TgZ(20,"mat-select",14),d.TgZ(21,"mat-option",15),d._uU(22),d.qZA(),d.TgZ(23,"mat-option",16),d._uU(24),d.qZA(),d.TgZ(25,"mat-option",17),d._uU(26),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(27,"div",10),d.YNc(28,pe,9,4,"mat-form-field",18),d.YNc(29,ge,6,2,"mat-form-field",18),d.YNc(30,fe,1,0,"mat-icon",19),d.YNc(31,he,1,0,"mat-icon",20),d.qZA(),d.TgZ(32,"div",10),d.YNc(33,Ze,4,2,"mat-form-field",21),d.TgZ(34,"mat-form-field",13),d.TgZ(35,"mat-label"),d._uU(36),d.qZA(),d._UZ(37,"input",22),d.qZA(),d.qZA(),d.qZA(),d.TgZ(38,"div",10),d.TgZ(39,"mat-form-field",11),d.TgZ(40,"mat-label"),d._uU(41),d.qZA(),d._UZ(42,"input",23),d.qZA(),d.TgZ(43,"mat-form-field",13),d.TgZ(44,"mat-label"),d._uU(45),d.qZA(),d._UZ(46,"input",24),d.TgZ(47,"mat-error"),d._uU(48,"L\u1edbn h\u01a1n 0 "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"div",25),d.TgZ(50,"button",26),d.TgZ(51,"span"),d._uU(52),d.qZA(),d.qZA(),d.TgZ(53,"button",27),d.NdJ("click",function(){return d.CHM(e),d.oxw().onSubmit()}),d.TgZ(54,"span"),d._uU(55),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(4),d.lnq("",e("TITLE")," (",i.data.name_prefix," - ",i.data.name,")"),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(1),d.Q6J("formGroup",i.form),d.xp6(2),d.Q6J("ngIf",i.savingFlag.pending),d.xp6(6),d.Oqu(e("NAME")),d.xp6(1),d.Q6J("placeholder",e("NAME")),d.xp6(3),d.Oqu(e("USES")),d.xp6(1),d.Q6J("placeholder",e("SELECT")),d.xp6(2),d.hij("",e("FEED")," "),d.xp6(2),d.hij("",e("SUPPLEMENT")," "),d.xp6(2),d.hij("",e("CHEMICAL")," "),d.xp6(2),d.Q6J("ngIf",!i.isFalshy),d.xp6(1),d.Q6J("ngIf",i.isFalshy),d.xp6(1),d.Q6J("ngIf",!i.isFalshy),d.xp6(1),d.Q6J("ngIf",i.isFalshy),d.xp6(2),d.Q6J("ngIf",i.normBoolean),d.xp6(3),d.Oqu(e("MANUFACTURER")),d.xp6(1),d.Q6J("placeholder",e("MANUFACTURER")),d.xp6(4),d.Oqu(e("USAGE")),d.xp6(1),d.Q6J("placeholder",e("USAGE")),d.xp6(3),d.Oqu(e("DOSAGE")),d.xp6(1),d.Q6J("placeholder",e("DOSAGE_NOTE")),d.xp6(4),d.Q6J("color","secondary"),d.xp6(2),d.hij(" ",e("CANCEL")," "),d.xp6(1),d.Q6J("color","primary")("disabled",!i.form.valid),d.xp6(2),d.hij(" ",e("SAVE")," ")}}let ve=(()=>{class e{constructor(e,t,i,o,r,a){this.data=e,this.dialogRef=t,this._companyService=i,this._alertService=o,this._translateService=r,this._formBuilder=a,this.savingFlag=new n.E,this.unitCreate=[],this.isFalshy=!1,this.normBoolean=!0}ngOnInit(){this.createForm(),"kg"!=this.data.unit&&this.unitCreate.push(this.data.unit),this.checkNormUnit()}checkNormUnit(){let e=this.unitCreate.filter(e=>"kg"!=e&&"lit"!=e);this.normBoolean=0!=e.length}changeOption(e){"kg"!=e.value&&"lit"!=e.value||(this.normBoolean=!1,this.form.patchValue({packing:1}))}createForm(){this.form=this._formBuilder.group({name:[this.data.name,[R.kI.required]],group_id:[this.data.group_id,[R.kI.required]],unit:[this.data.unit,[R.kI.required]],manufacturer_name:[this.data.manufacturer_name,[R.kI.required]],uses:[this.data.uses,[R.kI.required]],dosage:[this.data.dosage],packing:[this.data.packing,R.kI.required],add_unit:[""]})}saveUnit(){""!=this.form.value.add_unit&&(this.unitCreate.push(this.form.value.add_unit),this.form.patchValue({unit:this.form.value.add_unit}),this.isFalshy=!1,this.unitCreate=this.unitCreate.filter((e,t,i)=>i.indexOf(e)==t),this.checkNormUnit())}validNo(e){const t=e.which?e.which:e.keycode;return!(t>31&&t<48&&t>58)}onSubmit(){this.savingFlag.setPending(!0),this._companyService.editProductPrivate(this.data.id,this.form.value).pipe((0,B.P)()).subscribe(e=>{1===e.status?(this.data.name=this.form.value.name,this.data.group_id=this.form.value.group_id,this.data.manufacturer_name=this.form.value.manufacturer_name,this.data.uses=this.form.value.uses,this.data.unit=this.form.value.unit,this.data.dosage=this.form.value.dosage,this.data.packing=this.form.value.packing,this.dialogRef.close(this.data)):this._alertService.error(e.error),this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this._alertService.error(this._translateService.translate("CONNECT_ERROR"))})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(c.WI),d.Y36(c.so),d.Y36(h.J),d.Y36(x.c),d.Y36(u.Vn),d.Y36(R.qu))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-product-edit"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-160","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto",3,"formGroup"],[3,"mode",4,"ngIf"],[1,"w-full"],[1,"flex","flex-col","w-full"],[1,"flex","items-center"],[1,"flex-auto","mr-6"],["matInput","","formControlName","name",3,"placeholder"],[1,"flex-auto"],["formControlName","group_id",3,"placeholder"],["value","1"],["value","2"],["value","3"],["class","flex-auto",4,"ngIf"],["class","cursor-pointer h-full text-blue-700","svgIcon","mat_outline:add_circle_outline",3,"click",4,"ngIf"],["class","cursor-pointer h-full text-blue-700","svgIcon","mat_outline:close",3,"click",4,"ngIf"],["class","flex-auto mr-6",4,"ngIf"],["matInput","","formControlName","manufacturer_name",3,"placeholder"],["matInput","","formControlName","uses",3,"placeholder"],["matInput","","formControlName","dosage","type","number","min","0",3,"placeholder"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-flat-button","","mat-dialog-close","",1,"fuse-mat-button",3,"color"],["mat-flat-button","",1,"fuse-mat-button","mr-3",3,"color","disabled","click"],[3,"mode"],["formControlName","unit",3,"placeholder","selectionChange"],["value","kg"],["value","lit"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","formControlName","add_unit",3,"placeholder","focusout"],[3,"click"],["svgIcon","mat_outline:check_circle"],["svgIcon","mat_outline:add_circle_outline",1,"cursor-pointer","h-full","text-blue-700",3,"click"],["svgIcon","mat_outline:close",1,"cursor-pointer","h-full","text-blue-700",3,"click"],["matInput","","type","number","formControlName","packing",3,"placeholder","keypress"]],template:function(e,t){1&e&&d.YNc(0,xe,56,30,"ng-container",0),2&e&&d.Q6J("translocoRead","STORE.PRODUCT_EDIT")},directives:[u.KI,m.lW,c.ZT,p.Hw,R.JL,R.sg,o.O5,D.KE,D.hX,Y.Nt,R.Fj,R.JJ,R.u,te.gD,V.ey,R.wV,R.qQ,D.TO,v.pW,o.sg],styles:[""]}),e})();var _e=i(33935),Ae=i(11436);let Te=(()=>{class e{transform(e,t){return e.filter(e=>e.group_id==t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Yjl({name:"groupIdTypeFilter",type:e,pure:!0}),e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})();function qe(e,t){1&e&&d._UZ(0,"mat-progress-bar",17),2&e&&d.Q6J("mode","indeterminate")}function be(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",23),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(3).presentEditProduct(t)}),d._UZ(1,"mat-icon",24),d.qZA()}if(2&e){const e=d.oxw(3).$implicit;d.s9C("matTooltip",e("EDIT"))}}function Ce(e,t){if(1&e&&(d.TgZ(0,"div",20),d.TgZ(1,"div",11),d.TgZ(2,"span",21),d._uU(3),d.qZA(),d._uU(4),d.qZA(),d.TgZ(5,"div",11),d._uU(6),d.qZA(),d.TgZ(7,"div",12),d._uU(8),d.qZA(),d.TgZ(9,"div",12),d._uU(10),d.qZA(),d.TgZ(11,"div",12),d.YNc(12,be,2,1,"button",22),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(3),d.hij("",e.name_prefix," -"),d.xp6(1),d.hij(" ",e.name," "),d.xp6(2),d.hij(" ",e.manufacturer_name," "),d.xp6(2),d.hij(" ",e.uses," "),d.xp6(2),d.hij(" ",e.dosage," "),d.xp6(2),d.Q6J("ngIf",1==e.extend)}}function ye(e,t){if(1&e&&(d.TgZ(0,"div",18),d.YNc(1,Ce,13,6,"div",19),d.ALo(2,"groupIdTypeFilter"),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",d.xi3(2,1,e.detailStore,1))}}function we(e,t){1&e&&d._UZ(0,"mat-progress-bar",17),2&e&&d.Q6J("mode","indeterminate")}function Ie(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",23),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(3).presentEditProduct(t)}),d._UZ(1,"mat-icon",24),d.qZA()}if(2&e){const e=d.oxw(3).$implicit;d.s9C("matTooltip",e("EDIT"))}}function Ue(e,t){if(1&e&&(d.TgZ(0,"div",20),d.TgZ(1,"div",11),d.TgZ(2,"span",21),d._uU(3),d.qZA(),d._uU(4),d.qZA(),d.TgZ(5,"div",11),d._uU(6),d.qZA(),d.TgZ(7,"div",12),d._uU(8),d.qZA(),d.TgZ(9,"div",12),d._uU(10),d.qZA(),d.TgZ(11,"div",12),d.YNc(12,Ie,2,1,"button",22),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(3),d.hij("",e.name_prefix," -"),d.xp6(1),d.hij(" ",e.name," "),d.xp6(2),d.hij(" ",e.manufacturer_name," "),d.xp6(2),d.hij(" ",e.uses," "),d.xp6(2),d.hij(" ",e.dosage," "),d.xp6(2),d.Q6J("ngIf",1==e.extend)}}function Ne(e,t){if(1&e&&(d.TgZ(0,"div",18),d.YNc(1,Ue,13,6,"div",19),d.ALo(2,"groupIdTypeFilter"),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",d.xi3(2,1,e.detailStore,2))}}function Ee(e,t){1&e&&d._UZ(0,"mat-progress-bar",17),2&e&&d.Q6J("mode","indeterminate")}function Se(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",23),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(3).presentEditProduct(t)}),d._UZ(1,"mat-icon",24),d.qZA()}if(2&e){const e=d.oxw(3).$implicit;d.s9C("matTooltip",e("EDIT"))}}function Oe(e,t){if(1&e&&(d.TgZ(0,"div",20),d.TgZ(1,"div",11),d.TgZ(2,"span",21),d._uU(3),d.qZA(),d._uU(4),d.qZA(),d.TgZ(5,"div",11),d._uU(6),d.qZA(),d.TgZ(7,"div",12),d._uU(8),d.qZA(),d.TgZ(9,"div",12),d._uU(10),d.qZA(),d.TgZ(11,"div",12),d.YNc(12,Se,2,1,"button",22),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(3),d.hij("",e.name_prefix," -"),d.xp6(1),d.hij(" ",e.name," "),d.xp6(2),d.hij(" ",e.manufacturer_name," "),d.xp6(2),d.hij(" ",e.uses," "),d.xp6(2),d.hij(" ",e.dosage," "),d.xp6(2),d.Q6J("ngIf",1==e.extend)}}function Je(e,t){if(1&e&&(d.TgZ(0,"div",18),d.YNc(1,Oe,13,6,"div",19),d.ALo(2,"groupIdTypeFilter"),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",d.xi3(2,1,e.detailStore,3))}}function Fe(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._uU(4),d.qZA(),d.TgZ(5,"div",4),d.TgZ(6,"button",5),d.NdJ("click",function(){return d.CHM(e),d.oxw().handleOpenSearchDialog()}),d._UZ(7,"mat-icon",6),d._uU(8),d.qZA(),d.TgZ(9,"button",5),d.NdJ("click",function(){return d.CHM(e),d.oxw().handleOpenNewProductDialog()}),d._UZ(10,"mat-icon",6),d._uU(11),d.qZA(),d.TgZ(12,"button",5),d.NdJ("click",function(){return d.CHM(e),d.oxw().presentImportFile()}),d._UZ(13,"mat-icon",6),d._uU(14),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"p",7),d._uU(16),d.qZA(),d.TgZ(17,"div",8),d.TgZ(18,"div",9),d.TgZ(19,"div",10),d.TgZ(20,"div",11),d._uU(21),d.qZA(),d.TgZ(22,"div",11),d._uU(23),d.qZA(),d.TgZ(24,"div",12),d._uU(25),d.qZA(),d.TgZ(26,"div",12),d._uU(27),d.qZA(),d.TgZ(28,"div",12),d._uU(29),d.qZA(),d.qZA(),d.TgZ(30,"div"),d.YNc(31,qe,1,1,"mat-progress-bar",13),d.qZA(),d.YNc(32,ye,3,4,"div",14),d.qZA(),d.qZA(),d.TgZ(33,"p",15),d._uU(34),d.qZA(),d.TgZ(35,"div",8),d.TgZ(36,"div",9),d.TgZ(37,"div",10),d.TgZ(38,"div",11),d._uU(39),d.qZA(),d.TgZ(40,"div",11),d._uU(41),d.qZA(),d.TgZ(42,"div",12),d._uU(43),d.qZA(),d.TgZ(44,"div",12),d._uU(45),d.qZA(),d.TgZ(46,"div",12),d._uU(47),d.qZA(),d.qZA(),d.TgZ(48,"div"),d.YNc(49,we,1,1,"mat-progress-bar",13),d.qZA(),d.YNc(50,Ne,3,4,"div",14),d.qZA(),d.qZA(),d.TgZ(51,"p",16),d._uU(52,"X\u1eed l\xfd m\xf4i tr\u01b0\u1eddng"),d.qZA(),d.TgZ(53,"div",8),d.TgZ(54,"div",9),d.TgZ(55,"div",10),d.TgZ(56,"div",11),d._uU(57),d.qZA(),d.TgZ(58,"div",11),d._uU(59),d.qZA(),d.TgZ(60,"div",12),d._uU(61),d.qZA(),d.TgZ(62,"div",12),d._uU(63),d.qZA(),d.TgZ(64,"div",12),d._uU(65),d.qZA(),d.qZA(),d.TgZ(66,"div"),d.YNc(67,Ee,1,1,"mat-progress-bar",13),d.qZA(),d.YNc(68,Je,3,4,"div",14),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(4),d.hij(" ",e("CATEGORY")," "),d.xp6(3),d.Q6J("svgIcon","mat_solid:bookmark_add"),d.xp6(1),d.hij(" ",e("ADD_OLD")," "),d.xp6(2),d.Q6J("svgIcon","mat_solid:create"),d.xp6(1),d.hij(" ",e("ADD_NEW")," "),d.xp6(2),d.Q6J("svgIcon","iconsmind:folder_upload"),d.xp6(1),d.hij(" ",e("IMPORT_FILE")," "),d.xp6(2),d.Oqu(e("FEED")),d.xp6(5),d.hij(" ",e("PRODUCT")," "),d.xp6(2),d.hij(" ",e("MANUFACTURER")," "),d.xp6(2),d.hij(" ",e("USES")," "),d.xp6(2),d.hij(" ",e("DOSAGE")," "),d.xp6(2),d.hij(" ",e("ACTION")," "),d.xp6(2),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(1),d.Q6J("ngIf",i.detailStore&&!i.loadingFlag.pending),d.xp6(2),d.hij(" ",e("SUPPLEMENT"),""),d.xp6(5),d.hij(" ",e("PRODUCT")," "),d.xp6(2),d.hij(" ",e("MANUFACTURER")," "),d.xp6(2),d.hij(" ",e("USES")," "),d.xp6(2),d.hij(" ",e("DOSAGE")," "),d.xp6(2),d.hij(" ",e("ACTION")," "),d.xp6(2),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(1),d.Q6J("ngIf",i.detailStore&&!i.loadingFlag.pending),d.xp6(7),d.hij(" ",e("PRODUCT")," "),d.xp6(2),d.hij(" ",e("MANUFACTURER")," "),d.xp6(2),d.hij(" ",e("USES")," "),d.xp6(2),d.hij(" ",e("DOSAGE")," "),d.xp6(2),d.hij(" ",e("ACTION")," "),d.xp6(2),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(1),d.Q6J("ngIf",i.detailStore&&!i.loadingFlag.pending)}}let Re=(()=>{class e{constructor(e,t,i,o){this._companyService=e,this._alertService=t,this._translateService=i,this._matDialog=o,this.loadingFlag=new n.E,this.detailStore=[]}ngOnInit(){this.getDataForListStore()}getDataForListStore(){this._companyService.getListStore().subscribe(e=>{console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> data",e),1==e.status?(this.loadingFlag.setResult(!0),this.detailStore=e.data,console.log("\ud83d\ude80\ud83d\ude80\ud83c\udf89 >>> this.detailStore",this.detailStore)):this._alertService.error(e.error)},e=>{this._alertService.error(this._translateService.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}presentEditProduct(e){this._matDialog.open(ve,{autoFocus:!1,data:e}).afterClosed().subscribe(e=>{e&&(this.getDataForListStore(),this._alertService.success(this._translateService.translate("STORE.PRODUCT_EDIT.SUCCESS")))})}handleOpenSearchDialog(){this._matDialog.open(ee,{autoFocus:!1}).afterClosed().subscribe(e=>{e&&this.getDataForListStore()})}handleOpenNewProductDialog(){this._matDialog.open(de,{autoFocus:!1}).afterClosed().subscribe(e=>{e&&(this.getDataForListStore(),this._alertService.success(this._translateService.translate("STORE.PRODUCT_EDIT.ADD_SUCCESS")))})}presentImportFile(){this._matDialog.open(j.P,{autoFocus:!1}).afterClosed().subscribe(e=>{e&&(this.getDataForListStore(),this._alertService.success(this._translateService.translate("STORE.PRODUCT_EDIT.ADD_SUCCESS")))})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(h.J),d.Y36(x.c),d.Y36(u.Vn),d.Y36(c.uw))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-list-store"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"w-full"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","items-center","justify-between","pb-8"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"justify-items-end","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","","color","primary",1,"mb-4","w-max","mr-3",3,"click"],["color","warn",1,"icon-size-5","mt-0.5","mr-2",3,"svgIcon"],[1,"text-xl","font-semibold","pb-3","text-orange-500"],[1,"bg-card","shadow","rounded-2xl","overflow-hidden","w-full","mb-8"],[1,"grid"],[1,"grid-cols-12","z-10","sticky","top-0","grid","gap-4","py-4","px-8","shadow","text-md","font-semibold","bg-gray-50"],[1,"col-span-3"],[1,"col-span-2"],[3,"mode",4,"ngIf"],["class","max-h-80 overflow-y-auto",4,"ngIf"],[1,"text-xl","font-semibold","pb-3","text-purple-500"],[1,"text-xl","font-semibold","pb-3","text-blue-500"],[3,"mode"],[1,"max-h-80","overflow-y-auto"],["class","grid-cols-12 grid items-center gap-4 py-3 px-8 border-b",4,"ngFor","ngForOf"],[1,"grid-cols-12","grid","items-center","gap-4","py-3","px-8","border-b"],[1,"text-secondary"],["mat-menu-item","","class","text-red-600",3,"matTooltip","click",4,"ngIf"],["mat-menu-item","",1,"text-red-600",3,"matTooltip","click"],["svgIcon","heroicons_outline:pencil-alt",1,"text-red-600"]],template:function(e,t){1&e&&d.YNc(0,Fe,69,30,"ng-container",0),2&e&&d.Q6J("translocoRead","STORE.INVENTORY")},directives:[u.KI,m.lW,p.Hw,o.O5,v.pW,o.sg,_e.OP,Ae.gM],pipes:[Te],styles:[""]}),e})();var ke=i(66373),Qe=i(12522),De=i(4885);function Ye(e,t){1&e&&(d.TgZ(0,"div",14),d._UZ(1,"mat-spinner"),d.qZA())}function Pe(e,t){if(1&e&&(d.TgZ(0,"li"),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.xp6(1),d.Oqu(e)}}function Le(e,t){if(1&e&&(d.TgZ(0,"li"),d.TgZ(1,"div"),d.TgZ(2,"div",21),d._uU(3),d.qZA(),d.TgZ(4,"div",22),d.TgZ(5,"ul"),d.YNc(6,Pe,2,1,"li",20),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(3),d.hij(" ",e.day," "),d.xp6(3),d.Q6J("ngForOf",e.todo)}}function Me(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"ul",19),d.YNc(2,Le,7,2,"li",20),d.qZA(),d.qZA()),2&e){const e=d.oxw(3);d.xp6(2),d.Q6J("ngForOf",e.procedureDetail)}}function je(e,t){if(1&e&&(d.TgZ(0,"div",15),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.TgZ(3,"div"),d.TgZ(4,"p",16),d._uU(5),d.qZA(),d.TgZ(6,"div",17),d._UZ(7,"div",18),d.qZA(),d.qZA(),d.YNc(8,Me,3,1,"div",13),d.qZA()),2&e){const e=d.oxw().$implicit,t=d.oxw();d.xp6(2),d.Oqu(t.procedureInfo.description),d.xp6(3),d.hij("",e("PROCEDURE_CHART")," "),d.xp6(2),d.Q6J("options",t.options),d.xp6(1),d.Q6J("ngIf",t.procedureDetail)}}function He(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",23),d._uU(2),d.qZA(),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(2),d.hij(" ",e("NO_INFO")," ")}}function $e(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"span",4),d._uU(5),d.qZA(),d.qZA(),d.TgZ(6,"button",5),d.NdJ("click",function(){return d.CHM(e),d.oxw().onClose()}),d.TgZ(7,"mat-icon",6),d._uU(8,"close"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"div",2),d.TgZ(10,"mat-toolbar-row",7),d.TgZ(11,"p",8),d._uU(12),d.TgZ(13,"sup"),d._uU(14,"2"),d.qZA(),d.qZA(),d._UZ(15,"br"),d.TgZ(16,"p",9),d._uU(17),d.qZA(),d._UZ(18,"br"),d.qZA(),d.qZA(),d.YNc(19,Ye,2,0,"div",10),d.TgZ(20,"div",11),d.YNc(21,je,9,4,"div",12),d.YNc(22,He,3,1,"div",13),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(5),d.Oqu(i.procedureInfo.name),d.xp6(7),d.lnq("",i.procedureInfo.species_name," | ",i.procedureInfo.density," ",e("PIECE"),""),d.xp6(5),d.Oqu(i.procedureInfo.company_name),d.xp6(2),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(2),d.Q6J("ngIf",i.procedureDetail),d.xp6(1),d.Q6J("ngIf",!i.procedureDetail)}}let Be=(()=>{class e{constructor(e,t,i,o,r){this.procedureService=e,this._alertService=t,this.dialogRef=i,this.data=o,this._translate=r,this.options={tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{title:this._translate.translate("COMPANY.PROCEDURES.DOWNLOAD")}}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{name:this._translate.translate("COMPANY.PROCEDURES.WEIGHT"),type:"line",stack:"detail",data:[]},{name:this._translate.translate("FEED"),type:"line",stack:"detail",data:[]}]},this.loadingFlag=new n.E,this.lineChartColors=[{backgroundColor:"rgba(148,159,177,0.2)",borderColor:"#1B5E20",pointBackgroundColor:"#1B5E20",pointBorderColor:"#1B5E20",pointHoverBackgroundColor:"#1B5E20",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(77,83,96,0.2)",borderColor:"#CC3333",pointBackgroundColor:"#CC3333",pointBorderColor:"#CC3333",pointHoverBackgroundColor:"#CC3333",pointHoverBorderColor:"rgba(77,83,96,1)"}],this.lineChartLegend=!0,this.lineChartType="line"}ngOnInit(){this.data&&(this.PROCEDURE_ID=this.data.procedure_id),this.getProcedureDetail(this.PROCEDURE_ID)}getProcedureDetail(e){return this.loadingFlag.setPending(!0),this.procedureService.getProcedureDetail(e).subscribe(e=>{e.error||1!=e.status?this._alertService.error(e.error):(this.procedureInfo=e.data.info,e.data.timeline&&(this.procedureDetail=e.data.timeline),e.data.chart&&(this.options.xAxis.data=e.data.chart.labels,this.options.series[0].data=e.data.chart.data1,this.options.series[1].data=e.data.chart.data2)),this.loadingFlag.setResult(!0)},e=>{this._alertService.error(e),this.loadingFlag.setResult(!1)})}onClose(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(ke.d),d.Y36(x.c),d.Y36(c.so),d.Y36(c.WI),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-procedure-detail"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"dialog-content-wrapper","flex","flex-col","max-w-240","md:min-w-120","sm:max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],[1,"title","dialog-title","bg-primary"],["mat-icon-button","","aria-label","Close dialog",3,"click"],[1,"text-current"],[1,"font-bold"],[1,"text-sm"],[1,"text-base"],["class","justify-between",4,"ngIf"],[1,"flex","flex-col","flex-auto","px-6","sm:pb-0","overflow-y-auto"],["mat-dialog-content","","class","p-8 m-0","fusePerfectScrollbar","","style","width: 100%",4,"ngIf"],[4,"ngIf"],[1,"justify-between"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-8","m-0",2,"width","100%"],[1,""],[2,"width","100%"],["echarts","",3,"options"],[1,"timeline"],[4,"ngFor","ngForOf"],[1,"text-white","flex","flex-shrink-0","items-center","justify-center","w-10","h-10","mr-4","rounded-full","bg-primary",2,"transform","translateX(-50%)"],[1,"timeline-item"],[1,"message-box","warning"]],template:function(e,t){1&e&&d.YNc(0,$e,23,8,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,p.Hw,Qe.rD,o.O5,De.$g,c.xY,_.w,o.sg],styles:[".app-procedure-detail[_ngcontent-%COMP%], .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.mat-dialog-container[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{flex:1 0 auto;min-height:auto}.mat-dialog-container[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-weight:400;font-size:.8em}.mat-dialog-container[_ngcontent-%COMP%]   .toolbar-bottom[_ngcontent-%COMP%]{height:auto}.timeline[_ngcontent-%COMP%]{position:relative;margin:15px 0 0;list-style:none;border-style:solid;border-left-width:3px}.timeline[_ngcontent-%COMP%]   .timeline-thumb[_ngcontent-%COMP%]{border-radius:500px;width:24px;z-index:2;position:absolute;left:24px;color:green}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{margin-left:30px;padding-bottom:4px}"]}),e})();var We=i(1769);function Ve(e,t){if(1&e&&(d.TgZ(0,"fuse-alert",11),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.Q6J("type","success")("appearance","outline"),d.xp6(1),d.hij(" ",e("NOTE_ADD_CUSTOM")," ")}}function Ge(e,t){if(1&e&&(d.TgZ(0,"fuse-alert",11),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.Q6J("type","error")("appearance","outline"),d.xp6(1),d.hij(" ",e("YOU_NEED_UPGRADE")," ")}}function Ke(e,t){1&e&&(d.TgZ(0,"div",12),d._UZ(1,"mat-spinner"),d.qZA())}function ze(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"mat-toolbar",1),d.TgZ(2,"mat-toolbar-row",2),d.TgZ(3,"span"),d._uU(4),d.qZA(),d.TgZ(5,"button",3),d.NdJ("click",function(){return d.CHM(e),d.oxw().onClose()}),d.TgZ(6,"mat-icon"),d._uU(7,"close"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(8,"mat-divider"),d.TgZ(9,"mat-dialog-content"),d.TgZ(10,"mat-toolbar-row",2),d.TgZ(11,"h3",4),d._uU(12),d.qZA(),d.qZA(),d.TgZ(13,"mat-toolbar-row",2),d.TgZ(14,"p",5),d._uU(15),d.TgZ(16,"sup"),d._uU(17,"2"),d.qZA(),d._uU(18),d.qZA(),d.qZA(),d.TgZ(19,"mat-toolbar-row",2),d.TgZ(20,"p"),d._uU(21),d.qZA(),d.qZA(),d.YNc(22,Ve,2,3,"fuse-alert",6),d.YNc(23,Ge,2,3,"fuse-alert",6),d.qZA(),d.YNc(24,Ke,2,0,"div",7),d.TgZ(25,"mat-dialog-actions",8),d.TgZ(26,"button",9),d.NdJ("click",function(){return d.CHM(e),d.oxw().onClose()}),d._uU(27),d.qZA(),d._uU(28,"\xa0 "),d.TgZ(29,"button",10),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.onCloseConfirm(t.procedureInfo.id)}),d._uU(30),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(4),d.Oqu(e("CHOOSE_CUSTOM")),d.xp6(8),d.Oqu(i.procedureInfo.name),d.xp6(3),d.AsE("",i.procedureInfo.species," | ",i.procedureInfo.density," con/m"),d.xp6(3),d.hij(" | ",i.procedureInfo.manufacturer,""),d.xp6(3),d.Oqu(i.procedureInfo.description),d.xp6(1),d.Q6J("ngIf",i.permissionPass),d.xp6(1),d.Q6J("ngIf",!i.permissionPass),d.xp6(1),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(3),d.Oqu(e("CANCEL")),d.xp6(2),d.Q6J("disabled",!i.permissionPass||i.loadingFlag.pending),d.xp6(1),d.hij(" ",e("SELECT")," ")}}let Xe=(()=>{class e{constructor(e,t,i,o,r){this.route=e,this.procedureService=t,this.alertService=i,this.dialogRef=o,this.data=r,this.permissionPass=!1,this.loadingFlag=new n.E}ngOnInit(){this.data?(this.PROCEDURE_ID=this.data.id,this.procedureInfo=this.data):this.PROCEDURE_ID=this.route.snapshot.paramMap.get("id"),this.checkPackage()}checkPackage(){this.loadingFlag.setPending(!0),this.procedureService.checkPackage().subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):this.permissionPass=e.packagePass,this.loadingFlag.setResult(!0)},e=>{this.alertService.error(e),this.loadingFlag.setResult(!1)})}onCloseConfirm(e){return this.loadingFlag.setPending(!0),this.procedureService.addToCustom(e).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.onClose()),this.loadingFlag.setResult(!0)},e=>{this.alertService.error(e),this.loadingFlag.setResult(!1)})}onClose(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(r.gz),d.Y36(ke.d),d.Y36(x.c),d.Y36(c.so),d.Y36(c.WI))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-procedure-add-private"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],["matDialogTitle",""],[1,"justify-between"],["mat-icon-button","","aria-label","Close dialog",3,"click"],[1,"text-dark"],[1,"mt-0","subtitle"],["class","w-full my-2",3,"type","appearance",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end none"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"w-full","my-2",3,"type","appearance"],["fxLayout","row","fxLayoutAlign","center center"]],template:function(e,t){1&e&&d.YNc(0,ze,31,12,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,Qe.Ye,c.uh,Qe.rD,m.lW,p.Hw,We.d,c.xY,o.O5,c.H8,N.W,De.$g],styles:[""]}),e})();function et(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"mat-spinner"),d.qZA())}function tt(e,t){1&e&&d._UZ(0,"mat-icon",23),2&e&&d.Q6J("svgIcon","heroicons_solid:check-circle")}function it(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"fuse-card",15),d.TgZ(1,"div",16),d.TgZ(2,"div",17),d.YNc(3,tt,1,1,"mat-icon",18),d._uU(4),d.qZA(),d.qZA(),d.TgZ(5,"div",19),d.TgZ(6,"div",20),d._UZ(7,"mat-icon",9),d.TgZ(8,"div"),d._uU(9),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",21),d.TgZ(11,"button",22),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).openProcedureAddPrivate(t)}),d._uU(12),d.qZA(),d.TgZ(13,"button",22),d.NdJ("click",function(){const t=d.CHM(e).index;return d.oxw(2).showDetail(t)}),d._uU(14),d.qZA(),d.TgZ(15,"button",22),d.NdJ("click",function(){const t=d.CHM(e),i=t.$implicit,o=t.index;return d.oxw(2).add(i,o)}),d._uU(16),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw().$implicit;d.xp6(3),d.Q6J("ngIf",1==e.verify),d.xp6(1),d.hij(" ",e.species," "),d.xp6(3),d.Q6J("svgIcon","iconsmind:address_book2"),d.xp6(2),d.Oqu(e.name),d.xp6(2),d.Q6J("color","success"),d.xp6(1),d.hij(" ",i("CUSTOM")," "),d.xp6(1),d.Q6J("color","primary"),d.xp6(1),d.hij(" ",i("SEE")," "),d.xp6(1),d.Q6J("color","warn"),d.xp6(1),d.hij(" ",i("SELECT")," ")}}function ot(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._uU(4),d.qZA(),d.TgZ(5,"button",4),d._UZ(6,"mat-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"mat-toolbar",6),d.TgZ(8,"mat-toolbar-row",7),d.TgZ(9,"mat-form-field",8),d._UZ(10,"mat-icon",9),d.TgZ(11,"input",10),d.NdJ("keyup",function(t){return d.CHM(e),d.oxw().searchProcedure(t)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(12,et,2,0,"div",11),d.TgZ(13,"div",12),d.TgZ(14,"div",13),d.YNc(15,it,17,10,"fuse-card",14),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(4),d.Oqu(e("ADD_TITLE")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(4),d.Q6J("svgIcon","iconsmind:file_search"),d.xp6(1),d.Q6J("placeholder",e("SEARCH")),d.xp6(1),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(3),d.Q6J("ngForOf",i.procedures)}}let rt=(()=>{class e{constructor(e,t,i,o,r,a){this.dialogRef=e,this.activatedRoute=t,this.router=i,this.procedureService=o,this._alertService=r,this.dialog=a,this.loadingFlag=new n.E}ngOnInit(){this.getProceduresV2()}getProceduresV2(){return this.loadingFlag.setPending(!0),this.procedureService.getProceduresV2().subscribe(e=>{e.error||1!=e.status?e.error&&this._alertService.error(e.error):this.procedures=e.data,this.loadingFlag.setResult(!0)},e=>{this.loadingFlag.setResult(!1)})}searchProcedure(e){var t=this;return(0,F.Z)(function*(){if(t.keyword=e.target.value,t.keyword&&""!=t.keyword.trim()&&Array.isArray(t.procedures))return yield t.delay(300),t.procedureService.searchProcedure(t.keyword).subscribe(e=>{e.error||1!=e.status||(t.procedures=e.data)});t.getProceduresV2()})()}add(e,t){return this.procedureService.insertProcedure(e.id).subscribe(e=>{e.error||1!=e.status?this._alertService.error(e.error):(this.procedures.splice(t,1),this._alertService.success(e.message))},e=>{this._alertService.error(e)})}openProcedureDetail(e){this.dialog.open(Be,{width:"800px",panelClass:"app-procedure-detail",data:{procedure_id:e}})}showDetail(e){console.log(this.procedures[e]),this.dialog.open(Be,{data:{procedure_id:this.procedures[e].id}})}onClose(){this.dialogRef.close()}delay(e){return new Promise(t=>setTimeout(t,e))}openProcedureAddPrivate(e){this.dialog.open(Xe,{width:"500px",panelClass:"app-procedure-add-private",data:e})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(c.so),d.Y36(r.gz),d.Y36(r.F0),d.Y36(ke.d),d.Y36(x.c),d.Y36(c.uw))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-procedure-add"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6","overflow-y-hidden"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],["matDialogTitle",""],[1,"toolbar-bottom","pt-16"],[1,"w-1/2"],[1,"icon-size-5","mt-0.5","mr-2",3,"svgIcon"],["matInput","",3,"placeholder","keyup"],[4,"ngIf"],["mat-dialog-content","","fusePerfectScrollbar","",1,"bg-accent-300","p-2"],[1,"grid","grid-cols-1","md:grid-cols-3"],["class","flex flex-col max-w-80 px-8 pt-6 pb-4 filter-list m-1",4,"ngFor","ngForOf"],[1,"flex","flex-col","max-w-80","px-8","pt-6","pb-4","filter-list","m-1"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","leading-tight"],["color","primary","class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","flex-col","mt-5"],[1,"flex"],[1,"flex","flex-wrap","content-end","mt-4","-mx-3","h-full"],["mat-button","",1,"px-3",3,"color","click"],["color","primary",1,"icon-size-5",3,"svgIcon"]],template:function(e,t){1&e&&d.YNc(0,ot,16,7,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,c.ZT,p.Hw,Qe.Ye,c.uh,Qe.rD,D.KE,Y.Nt,o.O5,c.xY,o.sg,De.$g,Q.y],styles:[""]}),e})();var at=i(1400);function nt(e,t){1&e&&d._UZ(0,"mat-progress-bar",9)}function st(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"fuse-card",12),d.TgZ(1,"div",13),d.TgZ(2,"div"),d.TgZ(3,"p",14),d._uU(4),d.qZA(),d.TgZ(5,"p"),d.TgZ(6,"small"),d._uU(7),d.TgZ(8,"sup"),d._uU(9,"2"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",15),d.TgZ(11,"button",16),d._UZ(12,"mat-icon",17),d.qZA(),d.TgZ(13,"mat-menu",null,18),d.TgZ(15,"button",19),d.NdJ("click",function(){const t=d.CHM(e).index;return d.oxw(3).changeLock(t)}),d._UZ(16,"mat-icon",20),d._UZ(17,"span",21),d.qZA(),d.TgZ(18,"button",19),d.NdJ("click",function(){const t=d.CHM(e).index;return d.oxw(3).remove(t)}),d._UZ(19,"mat-icon",5),d._uU(20),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",22),d.TgZ(22,"div",23),d._UZ(23,"mat-icon",24),d.TgZ(24,"div"),d._uU(25),d.qZA(),d.qZA(),d.qZA(),d.TgZ(26,"div",25),d.TgZ(27,"button",26),d.NdJ("click",function(){const t=d.CHM(e).index;return d.oxw(3).showDetail(t)}),d._uU(28),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,i=d.MAs(14),o=d.oxw(2).$implicit;d.xp6(4),d.Oqu(e.species),d.xp6(3),d.lnq("",o("DENSITY")," : ",e.density," ",o("PIECE"),""),d.xp6(4),d.Q6J("matMenuTriggerFor",i),d.xp6(1),d.Q6J("svgIcon","heroicons_solid:dots-vertical"),d.xp6(4),d.Q6J("svgIcon",1==e.status?"mat_solid:lock":"mat_solid:lock_open"),d.xp6(1),d.Q6J("innerHTML",o(1==e.status?"LOCK":"UNLOCK"),d.oJD),d.xp6(2),d.Q6J("svgIcon","heroicons_solid:trash"),d.xp6(1),d.hij(" ",o("DELETE")," "),d.xp6(3),d.Q6J("svgIcon","iconsmind:address_book2"),d.xp6(2),d.Oqu(e.name),d.xp6(2),d.Q6J("color","primary"),d.xp6(1),d.hij(" ",o("DETAILS")," ")}}function lt(e,t){if(1&e&&(d.TgZ(0,"div",10),d.YNc(1,st,29,14,"fuse-card",11),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",e.listProcedure)}}function ct(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),i=t.$implicit,o=t.index;return d.oxw(3).addToUse(i.id,o)}),d._UZ(1,"mat-icon",29),d._uU(2),d.qZA()}if(2&e){const e=d.oxw(3).$implicit;d.xp6(2),d.hij(" ",e("CHOOSE")," ")}}function dt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"fuse-card",12),d.TgZ(1,"div",13),d.TgZ(2,"div"),d.TgZ(3,"p"),d.TgZ(4,"small"),d._uU(5,"C\xe1 nh\xe2n"),d.qZA(),d.qZA(),d.TgZ(6,"p"),d.TgZ(7,"b"),d.TgZ(8,"small"),d._uU(9),d.TgZ(10,"sup"),d._uU(11,"2"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"div",15),d.TgZ(13,"button",16),d._UZ(14,"mat-icon",17),d.qZA(),d.TgZ(15,"mat-menu",null,18),d.YNc(17,ct,3,1,"button",27),d.TgZ(18,"button",28),d._UZ(19,"mat-icon",24),d._uU(20),d.qZA(),d.TgZ(21,"button",19),d.NdJ("click",function(){const t=d.CHM(e),i=t.$implicit,o=t.index;return d.oxw(3).removeCustom(i.id,o)}),d._UZ(22,"mat-icon",5),d._uU(23),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(24,"div",22),d.TgZ(25,"div",23),d._UZ(26,"mat-icon",24),d.TgZ(27,"div"),d._uU(28),d.qZA(),d.qZA(),d.qZA(),d.TgZ(29,"div",25),d.TgZ(30,"button",26),d.NdJ("click",function(){const t=d.CHM(e).index;return d.oxw(3).showDetail(t)}),d._uU(31),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,i=d.MAs(16),o=d.oxw(2).$implicit;d.xp6(9),d.lnq("",o("DENSITY")," : ",e.density," ",o("PIECE"),""),d.xp6(4),d.Q6J("matMenuTriggerFor",i),d.xp6(1),d.Q6J("svgIcon","heroicons_solid:dots-vertical"),d.xp6(3),d.Q6J("ngIf",!(1==(null==e?null:e.used))),d.xp6(1),d.MGl("routerLink","../procedure-edit/",e.id,""),d.xp6(1),d.Q6J("svgIcon","mat_outline:edit"),d.xp6(1),d.hij(" ",o("EDIT")," "),d.xp6(2),d.Q6J("svgIcon","heroicons_solid:trash"),d.xp6(1),d.hij(" ",o("DELETE")," "),d.xp6(3),d.Q6J("svgIcon","iconsmind:address_book2"),d.xp6(2),d.Oqu(e.name),d.xp6(2),d.Q6J("color","primary"),d.xp6(1),d.hij(" ",o("DETAILS")," ")}}function ut(e,t){if(1&e&&(d.TgZ(0,"div",10),d.YNc(1,dt,32,15,"fuse-card",11),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",e.listProcedurePrivate)}}function mt(e,t){if(1&e&&(d.TgZ(0,"p"),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.hij(" ",e("NO_PROCEDURE"),"")}}function pt(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,nt,1,0,"mat-progress-bar",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"button",4),d.NdJ("click",function(){return d.CHM(e),d.oxw().presentInsertPage()}),d._UZ(5,"mat-icon",5),d._uU(6),d.qZA(),d.qZA(),d.YNc(7,lt,2,1,"div",6),d.YNc(8,ut,2,1,"div",6),d.TgZ(9,"div",7),d.YNc(10,mt,2,1,"p",8),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(1),d.Q6J("ngIf",i.loadingFlag.pending),d.xp6(4),d.Q6J("svgIcon","iconsmind:folder_add"),d.xp6(1),d.hij(" ",e("ADD")," "),d.xp6(1),d.Q6J("ngIf",i.listProcedure),d.xp6(1),d.Q6J("ngIf",i.listProcedurePrivate),d.xp6(2),d.Q6J("ngIf",0==i.listProcedure.length&&(!i.listProcedurePrivate||0==i.listProcedurePrivate.length))}}let gt=(()=>{class e{constructor(e,t,i,o,r,a,s){this.companyService=e,this.dbLocalService=t,this.procedureService=i,this._alertServive=o,this._fuseConfirmationService=r,this.dialog=a,this._translate=s,this.loadingFlag=new n.E,this.listProcedure=[],this.view=!1}ngOnInit(){this.procedureService.setCompanyCode(this.dbLocalService.company.code),this.getList(),this.getListPrivate()}ionViewDidEnter(){this.view=!0}getList(){this.loadingFlag.setPending(!0),this.procedureService.getProcedures().pipe().subscribe(e=>{0==e.status?(this._alertServive.error(e.error),this.loadingFlag.setResult(!1)):(this.loadingFlag.setResult(!0),this.listProcedure=e.data)},e=>{this._alertServive.error(this._translate.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!1)})}changeLock(e){let t=0;0==this.listProcedure[e].status&&(t=1),this.procedureService.lock(this.listProcedure[e].id,t).pipe().subscribe(i=>{0==i.status?this._alertServive.error(i.error):(this.listProcedure[e].status=t,this._alertServive.success(this._translate.translate(0==t?"COMPANY.PROCEDURES.LOCKED":"COMPANY.PROCEDURES.UNLOCKED")))},e=>{this._alertServive.error(this._translate.translate("CONNECT_ERROR"))})}remove(e){this._fuseConfirmationService.open({title:this._translate.translate("WARNING"),message:this._translate.translate("COMPANY.PROCEDURES.DELETE_CONFIRM")}).afterClosed().subscribe(t=>{t&&"confirmed"==t&&this.procedureService.delete(this.listProcedure[e].procedure_id).pipe().subscribe(t=>{0==t.status?this._alertServive.error(t.error):(this.listProcedure.splice(e,1),this._alertServive.success(this._translate.translate("COMPANY.PROCEDURES.DELETED")))},e=>{this._alertServive.error(this._translate.translate("CONNECT_ERROR"))})})}showDetail(e){console.log(this.listProcedure[e]),this.dialog.open(Be,{data:this.listProcedure[e],width:"800px"})}presentInsertPage(){this.dialog.open(rt,{width:"800px"}).afterClosed().subscribe(e=>{this.getList(),this.getListPrivate()})}getListPrivate(){return this.loadingFlag.setPending(!0),this.procedureService.getProceduresPrivate().subscribe(e=>{e.error||1!=e.status?e.error&&this._alertServive.error(e.error):this.listProcedurePrivate=e.data,this.loadingFlag.setResult(!0)},e=>{console.log(e),this.loadingFlag.setResult(!1)})}addToUse(e,t){this.procedureService.insertProcedure(e).subscribe(e=>{e.error||1!=e.status?this._alertServive.error(e.error):(this.listProcedurePrivate[t]=Object.assign({used:!0},this.listProcedurePrivate[t]),console.log(this.listProcedurePrivate[t]),this._alertServive.success(e.message))},e=>{this._alertServive.error(e)})}removeCustom(e,t){this._fuseConfirmationService.open({title:this._translate.translate("WARNING"),message:this._translate.translate("COMPANY.PROCEDURES.DELETE_CONFIRM")}).afterClosed().subscribe(i=>{i&&"confirmed"==i&&(this.loadingFlag.setPending(!0),this.procedureService.removeProceduresPrivate(e).subscribe(e=>{e.error||1!=e.status?e.error&&this._alertServive.error(e.error):(this.listProcedurePrivate.splice(t,1),this._alertServive.success(e.message)),this.loadingFlag.setResult(!0)},e=>{console.log(e),this.loadingFlag.setResult(!1)}))})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(h.J),d.Y36(Z.T),d.Y36(ke.d),d.Y36(x.c),d.Y36(at.R),d.Y36(c.uw),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company-procedure"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],["class","w-full","mode","indeterminate",4,"ngIf"],[1,"w-full"],[1,"grid","grid-cols-1","justify-items-end"],["mat-raised-button","","color","primary",1,"mb-4","w-max",3,"click"],["color","warn",1,"icon-size-5","mt-0.5","mr-2",3,"svgIcon"],["class","grid grid-cols-1 md:grid-cols-3",4,"ngIf"],[1,"grid","grid-cols-1","justify-items-center"],[4,"ngIf"],["mode","indeterminate",1,"w-full"],[1,"grid","grid-cols-1","md:grid-cols-3"],["class","flex flex-col max-w-100 m-2 px-8 pt-6 pb-4 filter-list",4,"ngFor","ngForOf"],[1,"flex","flex-col","max-w-100","m-2","px-8","pt-6","pb-4","filter-list"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listCard01Menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary",1,"icon-size-5","mt-0.5","mr-2",3,"svgIcon"],[3,"innerHTML"],[1,"flex","flex-col","mt-5"],[1,"flex"],[1,"icon-size-5","mt-0.5","mr-2",3,"svgIcon"],[1,"flex","flex-wrap","content-end","mt-4","-mx-3","h-full"],["mat-button","",1,"px-3",3,"color","click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"routerLink"],["svgIcon","mat_outline:add_circle_outline"]],template:function(e,t){1&e&&d.YNc(0,pt,11,6,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,o.O5,m.lW,p.Hw,v.pW,o.sg,Q.y,_e.p6,_e.VK,_e.OP,r.rH],styles:[""]}),e})();var ft=i(32091);function ht(e,t){1&e&&d._UZ(0,"mat-progress-bar",18)}function Zt(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div"),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d._uU(5),d.qZA(),d.TgZ(6,"button",4),d._UZ(7,"mat-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"form",6),d.TgZ(9,"mat-dialog-content"),d.TgZ(10,"div",7),d.TgZ(11,"div",8),d.TgZ(12,"mat-form-field",9),d._UZ(13,"input",10),d.qZA(),d.TgZ(14,"mat-form-field",9),d._UZ(15,"input",11),d.qZA(),d.TgZ(16,"mat-form-field",9),d._UZ(17,"input",12),d.qZA(),d.TgZ(18,"mat-form-field",9),d._UZ(19,"textarea",13),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(20,ht,1,0,"mat-progress-bar",14),d.TgZ(21,"mat-dialog-actions",15),d.TgZ(22,"button",16),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseCancel()}),d._uU(23),d.qZA(),d._uU(24,"\xa0 "),d.TgZ(25,"button",17),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseConfirm()}),d._uU(26),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(5),d.Oqu(e("ADD_COMMON")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(1),d.Q6J("formGroup",i.addForm),d.xp6(5),d.Q6J("placeholder",e("BEGIN")),d.xp6(2),d.Q6J("placeholder",e("END")),d.xp6(2),d.Q6J("placeholder",e("REPEAT")),d.xp6(2),d.Q6J("placeholder",e("CONTENT")),d.xp6(1),d.Q6J("ngIf",i.saveLoadingFlag.pending),d.xp6(3),d.Oqu(e("CANCEL")),d.xp6(2),d.Q6J("disabled",!i.addForm.valid),d.xp6(1),d.hij(" ",e("SAVE")," ")}}let xt=(()=>{class e{constructor(e,t,i,o,r){this.alertService=e,this._formBuilder=t,this.thisDialogRef=i,this.procedureService=o,this._translateService=r,this.saveLoadingFlag=new n.E}ngOnInit(){this.buildForm()}buildForm(){this.addForm=this._formBuilder.group({begin:["",R.kI.required],end:["",R.kI.required],repeat:["",R.kI.required],todo:["",R.kI.required]})}onCloseCancel(){this.thisDialogRef.close(!1)}onCloseConfirm(){this.saveLoadingFlag.setPending(!0),this.procedureService.commonAdd(this.addForm.value).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({id:e.data.id,begin:this.addForm.value.begin,end:this.addForm.value.end,repeat:this.addForm.value.repeat,todo:this.addForm.value.todo})),this.saveLoadingFlag.setResult(!0)},()=>{this.alertService.error(this._translateService.translate("CONNECT_ERROR")),this.saveLoadingFlag.setResult(!1)})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(x.c),d.Y36(R.qu),d.Y36(c.so),d.Y36(ke.d),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-common-add"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","sm:w-120","sm:max-h-140","sm:overflow-auto","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","px-1","pt-10",3,"formGroup"],[1,"company-container","w-full"],[1,"grid","grid-cols-1","md:grid-cols-1"],["fxFlex","100%"],["matInput","","type","number","formControlName","begin",3,"placeholder"],["matInput","","type","number","formControlName","end",3,"placeholder"],["matInput","","type","number","formControlName","repeat",3,"placeholder"],["matInput","","formControlName","todo",3,"placeholder"],["mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end none",1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","indeterminate"]],template:function(e,t){1&e&&d.YNc(0,Zt,27,12,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,c.ZT,p.Hw,R._Y,R.JL,R.sg,c.xY,D.KE,Y.Nt,R.wV,R.Fj,R.JJ,R.u,o.O5,c.H8,v.pW],styles:[""]}),e})();function vt(e,t){1&e&&d._UZ(0,"mat-progress-bar",19)}function _t(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div"),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d._uU(5),d.qZA(),d.TgZ(6,"button",4),d._UZ(7,"mat-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",6),d.TgZ(9,"form",7),d.TgZ(10,"mat-dialog-content"),d.TgZ(11,"div",8),d.TgZ(12,"div",9),d.TgZ(13,"mat-form-field",10),d._UZ(14,"input",11),d.qZA(),d.TgZ(15,"mat-form-field",10),d._UZ(16,"input",12),d.qZA(),d.TgZ(17,"mat-form-field",10),d._UZ(18,"input",13),d.qZA(),d.TgZ(19,"mat-form-field",10),d._UZ(20,"textarea",14),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(21,vt,1,0,"mat-progress-bar",15),d.TgZ(22,"mat-dialog-actions",16),d.TgZ(23,"button",17),d.NdJ("click",function(){return d.CHM(e),d.oxw().onDelete()}),d._uU(24),d.qZA(),d._uU(25,"\xa0 "),d.TgZ(26,"button",18),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseConfirm()}),d._uU(27),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(5),d.Oqu(e("UPDATE_COMMON")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(2),d.Q6J("formGroup",i.editForm),d.xp6(5),d.Q6J("placeholder",e("BEGIN")),d.xp6(2),d.Q6J("placeholder",e("END")),d.xp6(2),d.Q6J("placeholder",e("REPEAT")),d.xp6(2),d.Q6J("placeholder",e("CONTENT")),d.xp6(1),d.Q6J("ngIf",i.saveLoadingFlag.pending),d.xp6(3),d.Oqu(e("DELETE")),d.xp6(2),d.Q6J("disabled",!i.editForm.valid),d.xp6(1),d.hij(" ",e("SAVE")," ")}}let At=(()=>{class e{constructor(e,t,i,o,r,a,s){this.alertService=e,this._formBuilder=t,this.thisDialogRef=i,this.procedureService=o,this.data=r,this._translateService=a,this._fuseConfirmationService=s,this.saveLoadingFlag=new n.E}ngOnInit(){this.common=this.data.common,this.index=this.data.index,console.log(this.common),this.buildForm()}buildForm(){this.editForm=this._formBuilder.group({begin:[this.common.begin,R.kI.required],end:[this.common.end,R.kI.required],repeat:[this.common.repeat,R.kI.required],todo:[this.common.todo,R.kI.required]})}onCloseCancel(){this.thisDialogRef.close(!1)}onCloseConfirm(){this.saveLoadingFlag.setPending(!0),this.procedureService.commonEdit({id:this.common.id,begin:this.editForm.value.begin,end:this.editForm.value.end,repeat:this.editForm.value.repeat,todo:this.editForm.value.todo}).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({id:this.common.id,begin:this.editForm.value.begin,end:this.editForm.value.end,repeat:this.editForm.value.repeat,todo:this.editForm.value.todo,index:this.index})),this.saveLoadingFlag.setResult(!0)},()=>{this.alertService.error(this._translateService.translate("CONNECT_ERROR")),this.saveLoadingFlag.setResult(!1)})}onDelete(){this._fuseConfirmationService.open({title:this._translateService.translate("WARNING"),message:this._translateService.translate("COMPANY.PROCEDURES.DELETE_CONFIRM_ITEM")}).afterClosed().subscribe(e=>{e&&"confirmed"==e&&this.procedureService.commonDelete(this.common.id).subscribe(e=>{console.log(e),e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({type:"delete",index:this.index}))})})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(x.c),d.Y36(R.qu),d.Y36(c.so),d.Y36(ke.d),d.Y36(c.WI),d.Y36(u.Vn),d.Y36(at.R))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-common-edit"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","sm:w-120","sm:max-h-140","sm:overflow-auto","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","px-1","pt-10"],[3,"formGroup"],[1,"company-container","w-full"],[1,"grid","grid-cols-1","md:grid-cols-1"],["fxFlex","100%"],["matInput","","type","number","formControlName","begin",3,"placeholder"],["matInput","","type","number","formControlName","end",3,"placeholder"],["matInput","","type","number","formControlName","repeat",3,"placeholder"],["matInput","","formControlName","todo",3,"placeholder"],["mode","indeterminate",4,"ngIf"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","indeterminate"]],template:function(e,t){1&e&&d.YNc(0,_t,28,12,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,c.ZT,p.Hw,R._Y,R.JL,R.sg,c.xY,D.KE,Y.Nt,R.wV,R.Fj,R.JJ,R.u,o.O5,c.H8,v.pW],styles:[""]}),e})();function Tt(e,t){1&e&&d._UZ(0,"mat-progress-bar",17)}function qt(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div"),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d._uU(5),d.qZA(),d.TgZ(6,"button",4),d._UZ(7,"mat-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"form",6),d.TgZ(9,"mat-dialog-content"),d.TgZ(10,"div",7),d.TgZ(11,"div",8),d.TgZ(12,"mat-form-field",9),d._UZ(13,"input",10),d.qZA(),d.TgZ(14,"mat-form-field",9),d._UZ(15,"input",11),d.qZA(),d.TgZ(16,"mat-form-field",9),d._UZ(17,"input",12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(18,Tt,1,0,"mat-progress-bar",13),d.TgZ(19,"mat-dialog-actions",14),d.TgZ(20,"button",15),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseCancel()}),d._uU(21),d.qZA(),d._uU(22,"\xa0 "),d.TgZ(23,"button",16),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseConfirm()}),d._uU(24),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(5),d.Oqu(e("ADD_CURVE")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(1),d.Q6J("formGroup",i.curveAddForm),d.xp6(5),d.Q6J("placeholder",e("OLD")),d.xp6(2),d.Q6J("placeholder",e("FOOD")),d.xp6(2),d.Q6J("placeholder",e("WEIGHT")),d.xp6(1),d.Q6J("ngIf",i.saveLoadingFlag.pending),d.xp6(3),d.Oqu(e("CANCEL")),d.xp6(2),d.Q6J("disabled",!i.curveAddForm.valid),d.xp6(1),d.hij(" ",e("SAVE")," ")}}let bt=(()=>{class e{constructor(e,t,i,o,r){this.alertService=e,this._formBuilder=t,this.thisDialogRef=i,this.procedureService=o,this._translateService=r,this.saveLoadingFlag=new n.E}ngOnInit(){this.buildForm()}buildForm(){this.curveAddForm=this._formBuilder.group({day:["",R.kI.required],weight:["",R.kI.required],feed:["",R.kI.required]})}onCloseCancel(){this.thisDialogRef.close(!1)}onCloseConfirm(){this.saveLoadingFlag.setPending(!0),this.procedureService.curveAdd(this.curveAddForm.value).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({id:e.data.id,day:this.curveAddForm.value.day,feed:this.curveAddForm.value.feed,weight:this.curveAddForm.value.weight})),this.saveLoadingFlag.setResult(!0)},()=>{this.alertService.error(this._translateService.translate("CONNECT_ERROR")),this.saveLoadingFlag.setResult(!1)})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(x.c),d.Y36(R.qu),d.Y36(c.so),d.Y36(ke.d),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-curve-add"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","sm:w-120","sm:max-h-140","sm:overflow-auto","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","px-1","pt-10",3,"formGroup"],[1,"company-container","w-full"],[1,"grid","grid-cols-1","md:grid-cols-1"],["fxFlex","100%"],["matInput","","type","number","formControlName","day",3,"placeholder"],["matInput","","type","number","formControlName","feed",3,"placeholder"],["matInput","","type","number","formControlName","weight",3,"placeholder"],["mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end none",1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","indeterminate"]],template:function(e,t){1&e&&d.YNc(0,qt,25,11,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,c.ZT,p.Hw,R._Y,R.JL,R.sg,c.xY,D.KE,Y.Nt,R.wV,R.Fj,R.JJ,R.u,o.O5,c.H8,v.pW],styles:[""]}),e})();function Ct(e,t){1&e&&d._UZ(0,"mat-progress-bar",20)}function yt(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._uU(4),d.qZA(),d.TgZ(5,"button",4),d._UZ(6,"mat-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"div",6),d.TgZ(8,"form",7),d.TgZ(9,"mat-dialog-content"),d.TgZ(10,"div",8),d.TgZ(11,"div",9),d.TgZ(12,"mat-form-field",10),d._UZ(13,"input",11),d.qZA(),d.TgZ(14,"mat-form-field",12),d._UZ(15,"input",13),d.qZA(),d.TgZ(16,"mat-form-field",12),d._UZ(17,"input",14),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(18,Ct,1,0,"mat-progress-bar",15),d.TgZ(19,"mat-dialog-actions",16),d.TgZ(20,"div",17),d.TgZ(21,"button",18),d.NdJ("click",function(){return d.CHM(e),d.oxw().onDelete()}),d._uU(22),d.qZA(),d.TgZ(23,"button",19),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseConfirm()}),d._uU(24),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(4),d.Oqu(e("UPDATE_CURVE")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(2),d.Q6J("formGroup",i.curveEditForm),d.xp6(5),d.Q6J("placeholder",e("OLD")),d.xp6(2),d.Q6J("placeholder",e("FOOD")),d.xp6(2),d.Q6J("placeholder",e("WEIGHT")),d.xp6(1),d.Q6J("ngIf",i.saveLoadingFlag.pending),d.xp6(4),d.Oqu(e("DELETE")),d.xp6(1),d.Q6J("disabled",!i.curveEditForm.valid),d.xp6(1),d.hij(" ",e("SAVE")," ")}}let wt=(()=>{class e{constructor(e,t,i,o,r,a,s){this.alertService=e,this._formBuilder=t,this.thisDialogRef=i,this.procedureService=o,this.data=r,this._translateService=a,this._fuseConfirmationService=s,this.saveLoadingFlag=new n.E}ngOnInit(){this.curve=this.data.curve,this.index=this.data.index,console.log(this.curve),this.buildForm()}buildForm(){this.curveEditForm=this._formBuilder.group({day:[this.curve.day,R.kI.required],weight:[this.curve.weight,R.kI.required],feed:[this.curve.feed,R.kI.required]})}onCloseCancel(){this.thisDialogRef.close(!1)}onCloseConfirm(){this.saveLoadingFlag.setPending(!0),this.procedureService.curveEdit({id:this.curve.id,day:this.curveEditForm.value.day,feed:this.curveEditForm.value.feed,weight:this.curveEditForm.value.weight}).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({id:this.curve.id,day:this.curveEditForm.value.day,feed:this.curveEditForm.value.feed,weight:this.curveEditForm.value.weight,index:this.index})),this.saveLoadingFlag.setResult(!0)},()=>{this.alertService.error(this._translateService.translate("CONNECT_ERROR")),this.saveLoadingFlag.setResult(!1)})}onDelete(){this._fuseConfirmationService.open({title:this._translateService.translate("WARNING"),message:this._translateService.translate("COMPANY.PROCEDURES.DELETE_CONFIRM_ITEM")}).afterClosed().subscribe(e=>{e&&"confirmed"==e&&this.procedureService.curveDelete(this.curve.id).subscribe(e=>{console.log(e),e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({type:"delete",index:this.index}))})})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(x.c),d.Y36(R.qu),d.Y36(c.so),d.Y36(ke.d),d.Y36(c.WI),d.Y36(u.Vn),d.Y36(at.R))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-curve-edit"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","sm:w-120","sm:max-h-140","sm:overflow-auto","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","px-1","pt-10"],[3,"formGroup"],[1,"company-container","w-full"],[1,"grid","grid-cols-1","md:grid-cols-1"],["fxFlex","100%","appearance","fill",1,"example-full-width"],["matInput","","type","number","formControlName","day",3,"placeholder"],["fxFlex","100%"],["matInput","","type","number","formControlName","feed",3,"placeholder"],["matInput","","type","number","formControlName","weight",3,"placeholder"],["mode","indeterminate",4,"ngIf"],[1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["fxFlex","70"],["mat-button","","color","warn",3,"click"],["mat-raised-button","",1,"bg-primary","text-on-primary",3,"disabled","click"],["mode","indeterminate"]],template:function(e,t){1&e&&d.YNc(0,yt,25,11,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,c.ZT,p.Hw,R._Y,R.JL,R.sg,c.xY,D.KE,Y.Nt,R.wV,R.Fj,R.JJ,R.u,o.O5,c.H8,v.pW],styles:[""]}),e})();function It(e,t){1&e&&d._UZ(0,"mat-progress-bar",19)}function Ut(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div"),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d._uU(5),d.qZA(),d.TgZ(6,"button",4),d._UZ(7,"mat-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"form",6),d.TgZ(9,"mat-dialog-content"),d.TgZ(10,"div",7),d.TgZ(11,"div",8),d.TgZ(12,"mat-form-field",9),d._UZ(13,"input",10),d.qZA(),d.TgZ(14,"mat-form-field",9),d._UZ(15,"input",11),d.qZA(),d.TgZ(16,"mat-form-field",9),d._UZ(17,"input",12),d.qZA(),d.TgZ(18,"mat-form-field",9),d._UZ(19,"input",13),d.qZA(),d.TgZ(20,"mat-form-field",9),d._UZ(21,"textarea",14),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(22,It,1,0,"mat-progress-bar",15),d.TgZ(23,"mat-dialog-actions",16),d.TgZ(24,"button",17),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseCancel()}),d._uU(25),d.qZA(),d._uU(26,"\xa0 "),d.TgZ(27,"button",18),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseConfirm()}),d._uU(28),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(5),d.Oqu(e("ADD_PROBLEM")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(1),d.Q6J("formGroup",i.addForm),d.xp6(5),d.Q6J("placeholder",e("LOCK")),d.xp6(2),d.Q6J("placeholder",e("COMPARE")),d.xp6(2),d.Q6J("placeholder",e("VALUE")),d.xp6(2),d.Q6J("placeholder",e("TIME")),d.xp6(2),d.Q6J("placeholder",e("CONTENT")),d.xp6(1),d.Q6J("ngIf",i.saveLoadingFlag.pending),d.xp6(3),d.Oqu(e("CANCEL")),d.xp6(2),d.Q6J("disabled",!i.addForm.valid),d.xp6(1),d.hij(" ",e("SAVE")," ")}}let Nt=(()=>{class e{constructor(e,t,i,o,r){this.alertService=e,this._formBuilder=t,this.thisDialogRef=i,this.procedureService=o,this._translateService=r,this.saveLoadingFlag=new n.E}ngOnInit(){this.buildForm()}buildForm(){this.addForm=this._formBuilder.group({keyword:["",R.kI.required],inday:[""],val_match:[""],val_int:[""],todo:["",R.kI.required]})}onCloseCancel(){this.thisDialogRef.close(!1)}onCloseConfirm(){this.saveLoadingFlag.setPending(!0),this.procedureService.problemAdd(this.addForm.value).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({id:e.data.id,inday:this.addForm.value.inday,keyword:this.addForm.value.keyword,val_match:this.addForm.value.val_match,val_int:this.addForm.value.val_int,todo:this.addForm.value.todo})),this.saveLoadingFlag.setResult(!0)},()=>{this.alertService.error(this._translateService.translate("CONNECT_ERROR")),this.saveLoadingFlag.setResult(!1)})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(x.c),d.Y36(R.qu),d.Y36(c.so),d.Y36(ke.d),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-problem-add"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","sm:w-120","sm:max-h-140","sm:overflow-auto","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","px-1","pt-10",3,"formGroup"],[1,"company-container","w-full"],[1,"grid","grid-cols-1","md:grid-cols-1"],["fxFlex","100%"],["matInput","","type","text","formControlName","keyword",3,"placeholder"],["matInput","","type","text","formControlName","val_match",3,"placeholder"],["matInput","","type","text","formControlName","val_int",3,"placeholder"],["matInput","","type","number","formControlName","inday",3,"placeholder"],["matInput","","formControlName","todo",3,"placeholder"],["mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end none",1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","indeterminate"]],template:function(e,t){1&e&&d.YNc(0,Ut,29,13,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,c.ZT,p.Hw,R._Y,R.JL,R.sg,c.xY,D.KE,Y.Nt,R.Fj,R.JJ,R.u,R.wV,o.O5,c.H8,v.pW],styles:[""]}),e})();function Et(e,t){1&e&&d._UZ(0,"mat-progress-bar",19)}function St(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div"),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d._uU(5),d.qZA(),d.TgZ(6,"button",4),d._UZ(7,"mat-icon",5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"form",6),d.TgZ(9,"mat-dialog-content"),d.TgZ(10,"div",7),d.TgZ(11,"div",8),d.TgZ(12,"mat-form-field",9),d._UZ(13,"input",10),d.qZA(),d.TgZ(14,"mat-form-field",9),d._UZ(15,"input",11),d.qZA(),d.TgZ(16,"mat-form-field",9),d._UZ(17,"input",12),d.qZA(),d.TgZ(18,"mat-form-field",9),d._UZ(19,"input",13),d.qZA(),d.TgZ(20,"mat-form-field",9),d._UZ(21,"textarea",14),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(22,Et,1,0,"mat-progress-bar",15),d.TgZ(23,"mat-dialog-actions",16),d.TgZ(24,"button",17),d.NdJ("click",function(){return d.CHM(e),d.oxw().onDelete()}),d._uU(25),d.qZA(),d._uU(26,"\xa0 "),d.TgZ(27,"button",18),d.NdJ("click",function(){return d.CHM(e),d.oxw().onCloseConfirm()}),d._uU(28),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(5),d.Oqu(e("UPDATE_PROBLEM")),d.xp6(1),d.Q6J("tabIndex",-1),d.xp6(1),d.Q6J("svgIcon","heroicons_outline:x"),d.xp6(1),d.Q6J("formGroup",i.editForm),d.xp6(5),d.Q6J("placeholder",e("LOCK")),d.xp6(2),d.Q6J("placeholder",e("COMPARE")),d.xp6(2),d.Q6J("placeholder",e("VALUE")),d.xp6(2),d.Q6J("placeholder",e("TIME")),d.xp6(2),d.Q6J("placeholder",e("CONTENT")),d.xp6(1),d.Q6J("ngIf",i.saveLoadingFlag.pending),d.xp6(3),d.Oqu(e("DELETE")),d.xp6(2),d.Q6J("disabled",!i.editForm.valid),d.xp6(1),d.hij(" ",e("SAVE")," ")}}let Ot=(()=>{class e{constructor(e,t,i,o,r,a,s){this.alertService=e,this._formBuilder=t,this.thisDialogRef=i,this.procedureService=o,this.data=r,this._translateService=a,this._fuseConfirmationService=s,this.saveLoadingFlag=new n.E}ngOnInit(){this.problem=this.data.problem,this.index=this.data.index,console.log(this.problem),this.buildForm()}buildForm(){this.editForm=this._formBuilder.group({inday:[this.problem.inday,R.kI.required],keyword:[this.problem.keyword,R.kI.required],val_match:[this.problem.val_match,R.kI.required],val_int:[this.problem.val_int,R.kI.required],todo:[this.problem.todo,R.kI.required]})}onCloseCancel(){this.thisDialogRef.close(!1)}onCloseConfirm(){this.saveLoadingFlag.setPending(!0),this.procedureService.problemEdit({id:this.problem.id,inday:this.editForm.value.inday,keyword:this.editForm.value.keyword,val_match:this.editForm.value.val_match,val_int:this.editForm.value.val_int,todo:this.editForm.value.todo}).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({id:this.problem.id,inday:this.editForm.value.inday,keyword:this.editForm.value.keyword,val_match:this.editForm.value.val_match,val_int:this.editForm.value.val_int,todo:this.editForm.value.todo,index:this.index})),this.saveLoadingFlag.setResult(!0)},()=>{this.alertService.error(this._translateService.translate("CONNECT_ERROR")),this.saveLoadingFlag.setResult(!1)})}onDelete(){this._fuseConfirmationService.open({title:this._translateService.translate("WARNING"),message:this._translateService.translate("COMPANY.PROCEDURES.DELETE_CONFIRM_ITEM")}).afterClosed().subscribe(e=>{e&&"confirmed"==e&&this.procedureService.curveDelete(this.problem.id).subscribe(e=>{e.error||1!=e.status?this.alertService.error(e.error):(this.alertService.success(e.message),this.thisDialogRef.close({type:"delete",index:this.index}))})})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(x.c),d.Y36(R.qu),d.Y36(c.so),d.Y36(ke.d),d.Y36(c.WI),d.Y36(u.Vn),d.Y36(at.R))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-problem-edit"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","sm:w-120","sm:max-h-140","sm:overflow-auto","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","px-1","pt-10",3,"formGroup"],[1,"company-container","w-full"],[1,"grid","grid-cols-1","md:grid-cols-1"],["fxFlex","100%"],["matInput","","type","number","formControlName","keyword",3,"placeholder"],["matInput","","type","text","formControlName","val_match",3,"placeholder"],["matInput","","type","text","formControlName","val_int",3,"placeholder"],["matInput","","type","number","formControlName","inday",3,"placeholder"],["matInput","","formControlName","todo",3,"placeholder"],["mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end none",1,"flex","flex-0","items-center","justify-end","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","indeterminate"]],template:function(e,t){1&e&&d.YNc(0,St,29,13,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,m.lW,c.ZT,p.Hw,R._Y,R.JL,R.sg,c.xY,D.KE,Y.Nt,R.wV,R.Fj,R.JJ,R.u,o.O5,c.H8,v.pW],styles:[""]}),e})();var Jt=i(90171),Ft=i(20552);function Rt(e,t){1&e&&d._UZ(0,"mat-progress-bar",4)}function kt(e,t){1&e&&d._UZ(0,"mat-progress-bar",4)}function Qt(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.TgZ(2,"small"),d._uU(3),d.qZA(),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.hij("",e("OLD")," "),d.xp6(2),d.hij("(",e("DATE"),")")}}function Dt(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",36),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.Oqu(e.day)}}function Yt(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.TgZ(2,"small"),d._uU(3,"(kg)"),d.qZA(),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.hij("",e("FOOD")," ")}}function Pt(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",36),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.feed," ")}}function Lt(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.TgZ(2,"small"),d._uU(3,"(gr)"),d.qZA(),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.hij("",e("WEIGHT")," ")}}function Mt(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",36),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.weight," ")}}function jt(e,t){1&e&&d._UZ(0,"mat-header-cell")}function Ht(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-cell"),d.TgZ(1,"div",37),d.TgZ(2,"button",38),d.NdJ("click",function(){const t=d.CHM(e),i=t.$implicit,o=t.index;return d.oxw(3).openEditCurve(i,o)}),d.TgZ(3,"mat-icon",39),d._uU(4,"edit"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}}function $t(e,t){1&e&&d._UZ(0,"mat-header-row")}function Bt(e,t){1&e&&d._UZ(0,"mat-row")}function Wt(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.Oqu(e("BEGIN"))}}function Vt(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",40),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.Oqu(e.begin)}}function Gt(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.Oqu(e("FINISH"))}}function Kt(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",41),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.end," ")}}function zt(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.Oqu(e("REPEAT"))}}function Xt(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",42),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.repeat," ")}}function ei(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.Oqu(e("CONTENT"))}}function ti(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",43),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.todo," ")}}function ii(e,t){1&e&&d._UZ(0,"mat-header-cell")}function oi(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-cell"),d.TgZ(1,"div",37),d.TgZ(2,"button",38),d.NdJ("click",function(){const t=d.CHM(e),i=t.$implicit,o=t.index;return d.oxw(3).openEditCommon(i,o)}),d.TgZ(3,"mat-icon",39),d._uU(4,"edit"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}}function ri(e,t){1&e&&d._UZ(0,"mat-header-row")}function ai(e,t){1&e&&d._UZ(0,"mat-row")}function ni(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.Oqu(e("PROBLEM"))}}function si(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",36),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.Oqu(e.keyword)}}function li(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.Oqu(e("VALUE"))}}function ci(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p",36),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.val_int," ")}}function di(e,t){if(1&e&&(d.TgZ(0,"mat-header-cell"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.xp6(1),d.Oqu(e("CONTENT"))}}function ui(e,t){if(1&e&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e.todo," ")}}function mi(e,t){1&e&&d._UZ(0,"mat-header-cell")}function pi(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-cell"),d.TgZ(1,"div",37),d.TgZ(2,"button",38),d.NdJ("click",function(){const t=d.CHM(e),i=t.$implicit,o=t.index;return d.oxw(3).openEditProblem(i,o)}),d.TgZ(3,"mat-icon",39),d._uU(4,"edit"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}}function gi(e,t){1&e&&d._UZ(0,"mat-header-row")}function fi(e,t){1&e&&d._UZ(0,"mat-row")}function hi(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",5),d.TgZ(1,"div",6),d.TgZ(2,"span",7),d._uU(3),d.qZA(),d.TgZ(4,"h1",8),d._uU(5),d.qZA(),d.qZA(),d.TgZ(6,"mat-accordion",5),d.TgZ(7,"mat-expansion-panel",9),d.TgZ(8,"mat-expansion-panel-header"),d.TgZ(9,"mat-panel-title"),d._uU(10),d.qZA(),d.qZA(),d.TgZ(11,"form",10),d.TgZ(12,"mat-form-field",1),d._UZ(13,"input",11),d.qZA(),d.TgZ(14,"mat-form-field",1),d._UZ(15,"input",12),d.qZA(),d.qZA(),d.YNc(16,kt,1,0,"mat-progress-bar",2),d.TgZ(17,"div",13),d.TgZ(18,"button",14),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).saveInfo()}),d._uU(19),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"mat-expansion-panel",15),d.NdJ("opened",function(){return d.CHM(e),d.oxw(2).panelOpenState=!0})("closed",function(){return d.CHM(e),d.oxw(2).panelOpenState=!1}),d.TgZ(21,"mat-expansion-panel-header"),d.TgZ(22,"mat-panel-title"),d._uU(23),d.qZA(),d.qZA(),d.TgZ(24,"div",16),d.TgZ(25,"mat-table",17,18),d.ynx(27,19),d.YNc(28,Qt,4,2,"mat-header-cell",20),d.YNc(29,Dt,3,1,"mat-cell",21),d.BQk(),d.ynx(30,22),d.YNc(31,Yt,4,1,"mat-header-cell",20),d.YNc(32,Pt,3,1,"mat-cell",21),d.BQk(),d.ynx(33,23),d.YNc(34,Lt,4,1,"mat-header-cell",20),d.YNc(35,Mt,3,1,"mat-cell",21),d.BQk(),d.ynx(36,24),d.YNc(37,jt,1,0,"mat-header-cell",20),d.YNc(38,Ht,5,0,"mat-cell",21),d.BQk(),d.YNc(39,$t,1,0,"mat-header-row",25),d.YNc(40,Bt,1,0,"mat-row",26),d.qZA(),d.qZA(),d.TgZ(41,"div",13),d.TgZ(42,"button",27),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).openAddCurve()}),d._uU(43),d.qZA(),d.qZA(),d.qZA(),d.TgZ(44,"mat-expansion-panel"),d.TgZ(45,"mat-expansion-panel-header"),d.TgZ(46,"mat-panel-title"),d._uU(47),d.qZA(),d.qZA(),d.TgZ(48,"div",28),d.TgZ(49,"mat-table",17,18),d.ynx(51,29),d.YNc(52,Wt,2,1,"mat-header-cell",20),d.YNc(53,Vt,3,1,"mat-cell",21),d.BQk(),d.ynx(54,30),d.YNc(55,Gt,2,1,"mat-header-cell",20),d.YNc(56,Kt,3,1,"mat-cell",21),d.BQk(),d.ynx(57,31),d.YNc(58,zt,2,1,"mat-header-cell",20),d.YNc(59,Xt,3,1,"mat-cell",21),d.BQk(),d.ynx(60,32),d.YNc(61,ei,2,1,"mat-header-cell",20),d.YNc(62,ti,3,1,"mat-cell",21),d.BQk(),d.ynx(63,24),d.YNc(64,ii,1,0,"mat-header-cell",20),d.YNc(65,oi,5,0,"mat-cell",21),d.BQk(),d.YNc(66,ri,1,0,"mat-header-row",25),d.YNc(67,ai,1,0,"mat-row",26),d.qZA(),d.qZA(),d.TgZ(68,"div",13),d.TgZ(69,"button",27),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).openAddCommon()}),d._uU(70),d.qZA(),d.qZA(),d.qZA(),d.TgZ(71,"mat-expansion-panel"),d.TgZ(72,"mat-expansion-panel-header"),d.TgZ(73,"mat-panel-title"),d._uU(74),d.qZA(),d.qZA(),d.TgZ(75,"div",33),d.TgZ(76,"mat-table",17,18),d.ynx(78,34),d.YNc(79,ni,2,1,"mat-header-cell",20),d.YNc(80,si,3,1,"mat-cell",21),d.BQk(),d.ynx(81,35),d.YNc(82,li,2,1,"mat-header-cell",20),d.YNc(83,ci,3,1,"mat-cell",21),d.BQk(),d.ynx(84,32),d.YNc(85,di,2,1,"mat-header-cell",20),d.YNc(86,ui,3,1,"mat-cell",21),d.BQk(),d.ynx(87,24),d.YNc(88,mi,1,0,"mat-header-cell",20),d.YNc(89,pi,5,0,"mat-cell",21),d.BQk(),d.YNc(90,gi,1,0,"mat-header-row",25),d.YNc(91,fi,1,0,"mat-row",26),d.qZA(),d.qZA(),d.TgZ(92,"div",13),d.TgZ(93,"button",27),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).openAddProblem()}),d._uU(94),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw();d.xp6(3),d.Oqu(t.procedureDetail.species_name),d.xp6(2),d.hij(" ",t.procedureDetail.name,""),d.xp6(5),d.hij(" ",e("INFORMATION")," "),d.xp6(1),d.Q6J("formGroup",t.formGroupInfo),d.xp6(2),d.Q6J("placeholder",e("NAME")),d.xp6(2),d.Q6J("placeholder",e("DENSITY")),d.xp6(1),d.Q6J("ngIf",t.saveLoading.pending),d.xp6(2),d.Q6J("disabled",t.formGroupInfo.invalid||t.saveLoading.pending),d.xp6(1),d.Oqu(e("SAVE")),d.xp6(4),d.hij(" ",e("STANDARD")," "),d.xp6(2),d.Q6J("dataSource",t.dataSourceCurves),d.xp6(14),d.Q6J("cdkHeaderRowDef",t.displayedColumnsCurve),d.xp6(1),d.Q6J("cdkRowDefColumns",t.displayedColumnsCurve),d.xp6(3),d.Oqu(e("ADD")),d.xp6(4),d.hij(" ",e("PERIODIC")," "),d.xp6(2),d.Q6J("dataSource",t.dataSourceCommons),d.xp6(17),d.Q6J("cdkHeaderRowDef",t.displayedColumnsCommon),d.xp6(1),d.Q6J("cdkRowDefColumns",t.displayedColumnsCommon),d.xp6(3),d.Oqu(e("ADD")),d.xp6(4),d.hij(" ",e("SOLVE")," "),d.xp6(2),d.Q6J("dataSource",t.dataSourceProblems),d.xp6(14),d.Q6J("cdkHeaderRowDef",t.displayedColumnsProblem),d.xp6(1),d.Q6J("cdkRowDefColumns",t.displayedColumnsProblem),d.xp6(3),d.Oqu(e("ADD"))}}function Zi(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"div",1),d.YNc(2,Rt,1,0,"mat-progress-bar",2),d.YNc(3,hi,95,24,"div",3),d.qZA(),d.BQk()),2&e){const e=d.oxw();d.xp6(2),d.Q6J("ngIf",e.reqLoading.pending),d.xp6(1),d.Q6J("ngIf",!e.reqLoading.pending)}}let xi=(()=>{class e{constructor(e,t,i,o,r,a,s){this.route=e,this._formBuilder=t,this.procedureService=i,this.alertService=o,this.dialog=r,this._translateService=a,this.dbLocalService=s,this.reqLoading=new n.E,this.saveLoading=new n.E,this.dataOriginCurves=[],this.displayedColumnsCurve=["day","feed","weight","buttons"],this.dataOriginCommons=[],this.displayedColumnsCommon=["begin","end","repeat","todo","buttons"],this.dataOriginProblems=[],this.displayedColumnsProblem=["keyword","val_int","todo","buttons"]}ngOnInit(){console.log(this._translateService.translate("CONNECT_ERROR")),this.PROCEDURE_ID=parseInt(this.route.snapshot.paramMap.get("id")),this.procedureService.setSelectedId(this.PROCEDURE_ID),this.getProcedureDetail(this.PROCEDURE_ID),this.procedureService.setCompanyCode(this.dbLocalService.company.code)}getProcedureDetail(e){return this.reqLoading.setPending(!0),this.procedureService.getProcedureRawDetail(e).subscribe(e=>{e.error||1!=e.status||(this.procedureDetail=e.data.info,this.dataSourceCommons=e.data.commons,this.dataOriginCommons=e.data.commons,this.dataSourceCurves=e.data.curves,this.dataOriginCurves=e.data.curves,this.dataSourceProblems=e.data.problems,this.dataOriginProblems=e.data.problems,this.buildInfoForm()),this.reqLoading.setResult(!0)},e=>{this.alertService.error(e),this.reqLoading.setResult(!1)})}buildInfoForm(){this.formGroupInfo=this._formBuilder.group({name:[this.procedureDetail.name,R.kI.required],density:[this.procedureDetail.density,R.kI.required]})}saveInfo(){this.saveLoading.setPending(!0);let e={id:this.procedureDetail.id,name:this.formGroupInfo.value.name,density:this.formGroupInfo.value.density};this.procedureService.updateProcedureInfo(e).subscribe(t=>{1!=t.status?this.alertService.error(t.error):(this.procedureDetail.name=e.name,this.procedureDetail.density=e.density,this.alertService.success(t.message)),this.saveLoading.setResult(!0)},()=>{this.alertService.error(this._translateService.translate("CONNECT_ERROR")),this.saveLoading.setResult(!1)})}openEditCurve(e,t){this.dialog.open(wt,{width:"480px",data:{curve:e,index:t}}).afterClosed().subscribe(e=>{e&&("delete"==e.type?this.dataOriginCurves.splice(e.index,1):(this.dataOriginCurves[e.index].day=e.day,this.dataOriginCurves[e.index].feed=e.feed,this.dataOriginCurves[e.index].weight=e.weight),this.dataSourceCurves=new ft.by(this.dataOriginCurves))})}openAddCurve(){this.dialog.open(bt,{width:"480px"}).afterClosed().subscribe(e=>{e&&(this.dataOriginCurves.push(e),this.dataSourceCurves=new ft.by(this.dataOriginCurves))})}openAddCommon(){this.dialog.open(xt,{width:"480px"}).afterClosed().subscribe(e=>{e&&(this.dataOriginCommons.push(e),this.dataSourceCommons=new ft.by(this.dataOriginCommons))})}openEditCommon(e,t){this.dialog.open(At,{width:"480px",data:{common:e,index:t}}).afterClosed().subscribe(e=>{e&&("delete"==e.type?this.dataOriginCommons.splice(e.index,1):(this.dataOriginCommons[e.index].day=e.day,this.dataOriginCommons[e.index].begin=e.begin,this.dataOriginCommons[e.index].end=e.end,this.dataOriginCommons[e.index].repeat=e.repeat,this.dataOriginCommons[e.index].todo=e.todo),this.dataSourceCommons=new ft.by(this.dataOriginCommons))})}openAddProblem(){this.dialog.open(Nt,{width:"480px"}).afterClosed().subscribe(e=>{e&&(this.dataOriginProblems.push(e),this.dataSourceProblems=new ft.by(this.dataOriginProblems))})}openEditProblem(e,t){this.dialog.open(Ot,{width:"480px",data:{problem:e,index:t}}).afterClosed().subscribe(e=>{e&&("delete"==e.type?this.dataOriginProblems.splice(e.index,1):(this.dataOriginProblems[e.index].keyword=e.keyword,this.dataOriginProblems[e.index].inday=e.inday,this.dataOriginProblems[e.index].val_match=e.val_match,this.dataOriginProblems[e.index].val_int=e.val_int,this.dataOriginProblems[e.index].todo=e.todo),this.dataSourceProblems=new ft.by(this.dataOriginProblems))})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(r.gz),d.Y36(R.qu),d.Y36(ke.d),d.Y36(x.c),d.Y36(c.uw),d.Y36(u.Vn),d.Y36(Z.T))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-procedure-edit"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"w-full"],["mode","indeterminate",4,"ngIf"],["class","pt-2",4,"ngIf"],["mode","indeterminate"],[1,"pt-2"],[1,"pl-4"],[1,"secondary-text","text-2xl","font-semibold","tracking-tight","leading-8"],[1,"mt-4","text-1xl","font-semibold","tracking-tight","leading-8","pb-5","text-yellow-400"],["expanded","true"],[1,"ff-form",3,"formGroup"],["matInput","","formControlName","name",3,"placeholder"],["matInput","","formControlName","density",3,"placeholder"],[1,"text-right","mt-8"],["mat-button","","color","accent",1,"bg-primary","text-on-primary",3,"disabled","click"],[3,"opened","closed"],[1,"curve"],[3,"dataSource"],["table",""],["cdkColumnDef","day"],[4,"cdkHeaderCellDef"],[4,"cdkCellDef"],["cdkColumnDef","feed"],["cdkColumnDef","weight"],["cdkColumnDef","buttons"],[4,"cdkHeaderRowDef"],[4,"cdkRowDef","cdkRowDefColumns"],["mat-button","",1,"bg-primary","text-on-primary",3,"click"],[1,"common"],["cdkColumnDef","begin"],["cdkColumnDef","end"],["cdkColumnDef","repeat"],["cdkColumnDef","todo"],[1,"problem"],["cdkColumnDef","keyword"],["cdkColumnDef","val_int"],[1,"font-weight-600"],["fxFlex","row","fxLayoutAlign","end center"],["mat-icon-button","",3,"click"],[1,"secondary-text"],[1,"text-truncate","font-weight-600"],[1,"email","text-truncate"],[1,"phone","text-truncate"],[1,"job-title","text-truncate"]],template:function(e,t){1&e&&d.YNc(0,Zi,4,2,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.PROCEDURES")},directives:[u.KI,o.O5,v.pW,Jt.pp,Jt.ib,Jt.yz,Jt.yK,R._Y,R.JL,R.sg,D.KE,Y.Nt,R.Fj,R.JJ,R.u,m.lW,ft.BZ,Ft.fo,Ft.D5,Ft.O_,Ft.s$,Ft.Sq,ft.ge,ft.ev,p.Hw,ft.XQ,ft.Gk],styles:[""]}),e})();var vi=i(79765),_i=i(46782),Ai=i(25578),Ti=i(52692),qi=i(23017),bi=i(29551);function Ci(e,t){if(1&e&&(d.TgZ(0,"mat-option",26),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.id),d.xp6(1),d.Oqu(e.name)}}function yi(e,t){if(1&e&&(d.TgZ(0,"mat-option",26),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.id),d.xp6(1),d.Oqu(e.name)}}function wi(e,t){if(1&e&&(d.TgZ(0,"mat-option",26),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.id),d.xp6(1),d.Oqu(e.name)}}function Ii(e,t){if(1&e&&(d.TgZ(0,"mat-option",26),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.id),d.xp6(1),d.Oqu(e.name)}}function Ui(e,t){1&e&&d._UZ(0,"mat-progress-bar",27)}function Ni(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"div",1),d.TgZ(2,"form",2),d.TgZ(3,"p",3),d._uU(4),d.qZA(),d.TgZ(5,"p",4),d._uU(6),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"mat-form-field",6),d._UZ(9,"input",7),d._UZ(10,"mat-icon",8),d.qZA(),d.qZA(),d.TgZ(11,"div",5),d.TgZ(12,"mat-form-field",9),d._UZ(13,"input",10),d._UZ(14,"mat-icon",11),d.qZA(),d.TgZ(15,"mat-form-field",6),d.TgZ(16,"mat-select",12),d.YNc(17,Ci,2,2,"mat-option",13),d.qZA(),d._UZ(18,"mat-icon",14),d.qZA(),d.qZA(),d.TgZ(19,"div",5),d.TgZ(20,"mat-form-field",6),d._UZ(21,"input",15),d._UZ(22,"mat-icon",16),d.qZA(),d.qZA(),d.TgZ(23,"div",5),d.TgZ(24,"mat-form-field",9),d.TgZ(25,"mat-select",17),d.NdJ("selectionChange",function(t){return d.CHM(e),d.oxw().changeProvince(t)}),d.YNc(26,yi,2,2,"mat-option",13),d.qZA(),d.qZA(),d.TgZ(27,"mat-form-field",9),d.TgZ(28,"mat-select",18),d.NdJ("selectionChange",function(t){return d.CHM(e),d.oxw().changeDistrict(t)}),d.YNc(29,wi,2,2,"mat-option",13),d.qZA(),d.qZA(),d.TgZ(30,"mat-form-field",6),d.TgZ(31,"mat-select",19),d.YNc(32,Ii,2,2,"mat-option",13),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",5),d.TgZ(34,"mat-form-field",9),d._UZ(35,"input",20),d.qZA(),d.TgZ(36,"mat-form-field",6),d._UZ(37,"input",21),d.qZA(),d.qZA(),d._UZ(38,"div",22),d.YNc(39,Ui,1,0,"mat-progress-bar",23),d.TgZ(40,"div",24),d.TgZ(41,"button",25),d.NdJ("click",function(){return d.CHM(e),d.oxw().save()}),d._uU(42),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.BQk()}if(2&e){const e=t.$implicit,i=d.oxw();d.xp6(2),d.Q6J("formGroup",i.form),d.xp6(2),d.Oqu(e("TITLE")),d.xp6(2),d.hij(" ",e("NOTE")," "),d.xp6(3),d.Q6J("placeholder",e("NAME")),d.xp6(4),d.Q6J("placeholder",e("AREA")),d.xp6(3),d.Q6J("placeholder",e("SPECIES")),d.xp6(1),d.Q6J("ngForOf",i.species),d.xp6(4),d.Q6J("placeholder",e("ADDRESS")),d.xp6(1),d.Q6J("svgIcon","heroicons_solid:location-marker"),d.xp6(3),d.Q6J("placeholder",e("PROVINCE")),d.xp6(1),d.Q6J("ngForOf",i.listProvince),d.xp6(2),d.Q6J("placeholder",e("DISTRICT")),d.xp6(1),d.Q6J("ngForOf",i.listDistrict),d.xp6(2),d.Q6J("placeholder",e("WARD")),d.xp6(1),d.Q6J("ngForOf",i.listWards),d.xp6(3),d.Q6J("placeholder",e("LONGITUDE"))("readonly",!0),d.xp6(2),d.Q6J("placeholder",e("LATITUDE"))("readonly",!0),d.xp6(2),d.Q6J("ngIf",i.savingFlag.pending),d.xp6(2),d.Q6J("disabled",i.form.invalid),d.xp6(1),d.Oqu(e("SUBMIT"))}}const Ei=[{path:"",component:(()=>{class e{constructor(e,t,i,o,r,a){this._fuseMediaWatcherService=e,this.route=t,this.companyService=i,this.dbLocalService=o,this._alertService=r,this._translate=a,this.drawerMode="side",this.drawerOpened=!0,this._unsubscribeAll=new vi.xQ,this.loadingFlag=new n.E,this.menuData=[{title:"Menu",type:"group"},{title:this._translate.translate("COMPANY.INFO"),icon:"mat_outline:info",type:"basic",link:"info"},{title:this._translate.translate("COMPANY.FARM_CREATE"),icon:"mat_outline:add_business",type:"basic",link:"farm-create"},{title:this._translate.translate("COMPANY.PROCEDURE"),icon:"mat_outline:checklist",type:"basic",link:"procedure"},{title:this._translate.translate("COMPANY.HISTORY"),icon:"mat_outline:history",type:"basic",link:"history"},{title:this._translate.translate("COMPANY.INVENTORYLIST"),icon:"heroicons_outline:book-open",type:"basic",link:"category"},{title:this._translate.translate("COMPANY.PACKAGE"),icon:"mat_outline:shopping_bag",type:"basic",link:"../../package"}]}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,_i.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)}),this.ccode=this.route.snapshot.paramMap.get("code"),this.companyService.setCode(this.ccode),this.getData()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getData(){var e=this;return(0,F.Z)(function*(){yield e.dbLocalService.getLocalData(),void 0===e.dbLocalService.company?yield e.getInfor():e.companyService.company.code==e.ccode?e.companyService.setCompany(e.dbLocalService.company):yield e.getInfor(),void 0===e.dbLocalService.package&&(yield e.loadPackage())})()}getInfor(){var e=this;return(0,F.Z)(function*(){const t=yield e.companyService.loadCompany().toPromise().catch(()=>{e._alertService.error(e._translate.translate("CONNECT_ERROR"))});t&&1==t.status?(e.companyService.setCompany(t.data),e.dbLocalService.company=t.data,e.dbLocalService.setLocalData("company",e.dbLocalService.company)):e._alertService.error(t.error)})()}loadPackage(){this.companyService.loadPackages().subscribe(e=>{1==e.status?(e.data.currentOrder&&(e.data.currentOrder=e.data.currentOrder[0]),this.dbLocalService.package=e.data,this.dbLocalService.setLocalData("package",this.dbLocalService.package)):this._alertService.error(e.error)},()=>{this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(Ai.T),d.Y36(r.gz),d.Y36(h.J),d.Y36(Z.T),d.Y36(x.c),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-company"]],decls:29,vars:16,consts:[["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-y-auto"],[1,"px-6","pt-6","sm:pt-6","sm:px-10","bg-card","dark:bg-transparent"],[1,"hidden","sm:flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500",3,"routerLink"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","pb-22","sm:pt-6","sm:pb-28","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","font-uppercase","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","flex-shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"flex-auto","-mt-16","rounded-t-2xl","shadow","bg-default"],[1,"w-72","dark:bg-gray-900",3,"autoFocus","mode","opened","position"],["matDrawer",""],[3,"navigation","inner","mode","name","opened"],[1,"flex","flex-col"],[1,"flex-auto","p-6","sm:p-10"],[1,"min-h-200","rounded-2xl"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div"),d.TgZ(4,"a",3),d._uU(5),d.qZA(),d.qZA(),d.TgZ(6,"div",4),d._UZ(7,"mat-icon",5),d.qZA(),d.qZA(),d.TgZ(8,"div",6),d.TgZ(9,"a",7),d._UZ(10,"mat-icon",5),d.TgZ(11,"span",8),d._uU(12,"Back"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",9),d.TgZ(14,"div",10),d.TgZ(15,"div",11),d.TgZ(16,"h2",12),d._uU(17),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"div",13),d.TgZ(19,"button",14),d.NdJ("click",function(){return d.CHM(e),d.MAs(23).toggle()}),d._UZ(20,"mat-icon",15),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"mat-drawer-container",16),d.TgZ(22,"mat-drawer",17,18),d._UZ(24,"fuse-vertical-navigation",19),d.qZA(),d.TgZ(25,"mat-drawer-content",20),d.TgZ(26,"div",21),d.TgZ(27,"div",22),d._UZ(28,"router-outlet"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(4),d.MGl("routerLink","/company/",null==t.dbLocalService.company?null:t.dbLocalService.company.code,""),d.xp6(1),d.Oqu(null==t.dbLocalService.company?null:t.dbLocalService.company.name),d.xp6(2),d.Q6J("svgIcon","heroicons_solid:chevron-right"),d.xp6(2),d.Q6J("routerLink","./.."),d.xp6(1),d.Q6J("svgIcon","heroicons_solid:chevron-left"),d.xp6(7),d.hij(" ",null==t.dbLocalService.company?null:t.dbLocalService.company.fullname," "),d.xp6(3),d.Q6J("svgIcon","heroicons_outline:menu"),d.xp6(2),d.Q6J("autoFocus",!1)("mode",t.drawerMode)("opened",t.drawerOpened)("position","end"),d.xp6(2),d.Q6J("navigation",t.menuData)("inner",!0)("mode","side")("name","company-components-navigation")("opened",!0))},directives:[Ti.PQ,r.yS,p.Hw,m.lW,qi.kh,qi.jA,bi.j,qi.LW,r.lC],styles:[""],encapsulation:2}),e})(),children:[{path:"",component:y},{path:"farm-create",component:(()=>{class e{constructor(e,t,i,o,r,a){this.dbLocalService=e,this._formBuilder=t,this.companyService=i,this._alertService=o,this.route=r,this._translate=a,this.savingFlag=new n.E,this.species=[]}ngOnInit(){this.createForm(),this.getSpecies(),this.getListProvince(0)}checkPackage(){let e=0;this.dbLocalService.farms.forEach(t=>{"company_manager"==t.infor.permission&&(e+=1)}),e>=this.dbLocalService.package.current.farm_quantity&&this._alertService.warn(this._translate.translate("COMPANY.CREATE_FARM.PACKAGE_ERROR"))}createForm(){this.form=this._formBuilder.group({name:["",R.kI.required],address:["",R.kI.required],area:["",R.kI.required],species_id:["",R.kI.required],longitude:"",latitude:"",province:"",district:"",wards:""})}save(){let e={name:this.form.value.name,address:this.form.value.address,species:this.form.value.species_id,area:this.form.value.area,latitude:this.form.value.latitude,longitude:this.form.value.longitude,province:this.form.value.province,district:this.form.value.district,wards:this.form.value.wards,pond:{all:0,empty:0,good:0,stocking:0,warning:0}};this.savingFlag.setPending(!0),this.companyService.createFarm(e).subscribe(t=>{if(t.error||1!=t.status)this._alertService.error(t.error);else{this._alertService.success(this._translate.translate("COMPANY.CREATE_FARM.SUCCESS"));let i={id:t.data.id,code:t.data.code,name:this.form.value.name,public:t.data.public,address:this.form.value.address,species:this.form.value.species_id,area:this.form.value.area,latitude:this.form.value.latitude,longitude:this.form.value.longitude,province_id:t.data.province_id,district_id:t.data.district_id,wards_id:t.data.wards_id,permission:"company_manager"};e.id=t.data.id,e.code=t.data.code,this.companyService.listFarm.push(e),this.dbLocalService.farms&&(this.dbLocalService.farms.push({infor:i,store:[]}),this.dbLocalService.setLocalData("farms",this.dbLocalService.farms)),this.route.navigate(["company/"+this.companyService.ccode])}this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}changeProvince(e){console.log(e);let t=e.value;this.listDistrict=[],this.form.value.district_id=0,this.getListDistrict(t)}changeDistrict(e){let t=e.value;this.listWards=[],this.form.value.wards_id=0,this.getListWards(t)}getSpecies(){this.companyService.loadSpecies().subscribe(e=>{e.error||1!=e.status?this._alertService.error(e.error):this.species=e.data},e=>{this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}getListProvince(e){this.companyService.listAddress(e).subscribe(e=>{1==e.status?this.listProvince=e.data:this._alertService.error(e.error)},()=>{this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}getListDistrict(e){this.companyService.listAddress(e).subscribe(e=>{1==e.status?this.listDistrict=e.data:this._alertService.error(e.error)},()=>{this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}getListWards(e){this.companyService.listAddress(e).subscribe(e=>{1==e.status?this.listWards=e.data:this._alertService.error(e.error)},()=>{this._alertService.error(this._translate.translate("CONNECT_ERROR"))})}getLocation(){navigator.geolocation.getCurrentPosition(e=>{this.form.patchValue({latitude:e.coords.latitude,longitude:e.coords.longitude}),this.loadMap()},()=>{this._alertService.warn(this._translate.translate("DASHBOARD.NO_POSITION"))},{timeout:1e4})}loadMap(){s.accessToken=l.Jj.TOKEN,this.mapa=new s.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[this.form.value.longitude,this.form.value.latitude],zoom:5});let e=new s.Marker({draggable:!1}).setLngLat([this.form.value.longitude,this.form.value.latitude]).addTo(this.mapa);this.mapa.on("click",t=>{this.form.patchValue({latitude:t.lngLat.wrap().lat,longitude:t.lngLat.wrap().lng}),e.setLngLat([t.lngLat.wrap().lng,t.lngLat.wrap().lat])})}clearLocate(){this.form.controls.latitude.setValue(""),this.form.controls.longitude.setValue("")}ngAfterViewInit(){this.getLocation()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(Z.T),d.Y36(R.qu),d.Y36(h.J),d.Y36(x.c),d.Y36(r.F0),d.Y36(u.Vn))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-farm-create"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"w-full"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","w-full",3,"formGroup"],[1,"text-lg","font-medium"],[1,"text-secondary","mb-6"],[1,"flex"],[1,"flex-auto"],["matInput","","formControlName","name",3,"placeholder"],["matPrefix","","svgIcon","iconsmind:tree_2",1,"icon-size-5"],[1,"flex-auto","mr-1"],["matInput","","formControlName","area",3,"placeholder"],["matPrefix","","svgIcon","iconsmind:globe",1,"icon-size-5"],["formControlName","species_id",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matPrefix","","svgIcon","iconsmind:fish",1,"icon-size-5"],["matInput","","formControlName","address",3,"placeholder"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["formControlName","province",3,"placeholder","selectionChange"],["formControlName","district",3,"placeholder","selectionChange"],["formControlName","wards",3,"placeholder"],["matInput","","formControlName","longitude",3,"placeholder","readonly"],["matInput","","formControlName","latitude",3,"placeholder","readonly"],["id","map",1,"mb-4"],["mode","indeterminate",4,"ngIf"],[1,"flex","justify-end"],["mat-button","",1,"bg-primary","text-on-primary","mb-4","mt-2",3,"disabled","click"],[3,"value"],["mode","indeterminate"]],template:function(e,t){1&e&&d.YNc(0,Ni,43,22,"ng-container",0),2&e&&d.Q6J("translocoRead","COMPANY.CREATE_FARM")},directives:[u.KI,R._Y,R.JL,R.sg,D.KE,Y.Nt,R.Fj,R.JJ,R.u,p.Hw,D.qo,te.gD,o.sg,o.O5,m.lW,V.ey,v.pW],styles:["#map[_ngcontent-%COMP%]{width:100%;height:250px}"],data:{animation:k.L}}),e})()},{path:"info",component:M},{path:"edit",component:w},{path:"history",component:J},{path:"procedure",component:gt},{path:"procedure-edit/:id",component:xi},{path:"category",component:Re}]},{path:"create",component:a.t}];let Si=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[r.Bz.forChild(Ei)],r.Bz]}),e})();var Oi=i(44466),Ji=i(82808),Fi=i(4083),Ri=i(84900);let ki=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[u.y4],imports:[[o.ez,Oi.m,Si,Ji.PU,_.N,Fi.q,Ft.HT,Ri.Z,u.y4]]}),e})()}}]);