(self.webpackChunk_fuse_demo=self.webpackChunk_fuse_demo||[]).push([[757],{49457:function(t,e){var i,a;void 0===(a="function"==typeof(i=function(){"use strict";function e(t,e,i){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){s(a.response,e,i)},a.onerror=function(){console.error("could not download file")},a.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,n=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(t,n,s){var r=o.URL||o.webkitURL,l=document.createElement("a");l.download=n=n||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?a(l):i(l.href)?e(t,n,s):a(l,l.target="_blank")):(l.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(l.href)},4e4),setTimeout(function(){a(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,n){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,n),o);else if(i(t))e(t,o,n);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){a(s)})}}:function(t,i,a,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,a);var r="application/octet-stream"===t.type,l=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||r&&l||n)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},c.readAsDataURL(t)}else{var p=o.URL||o.webkitURL,d=p.createObjectURL(t);s?s.location=d:location.href=d,s=null,setTimeout(function(){p.revokeObjectURL(d)},4e4)}});o.saveAs=s.saveAs=s,t.exports=s})?i.apply(e,[]):i)||(t.exports=a)},42757:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SeasonModule:()=>St});var a=i(38583),o=i(95987),n=i(21611),s=i(3679),r=i(5396),l=i(71291),u=i(16738),c=i.n(u),p=i(37716),d=i(48682),Z=i(40704),g=i(72458),A=i(8394),m=i(22238),h=i(97832),T=i(98295),q=i(49983),x=i(43220),f=i(67441),_=i(51095),v=i(11436),O=i(76627),S=i(7539),U=i(12178);function b(t,e){if(1&t&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&t){const t=p.oxw(2).$implicit;p.xp6(1),p.hij("(",t("TODAY"),")")}}function E(t,e){if(1&t&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&t){const t=p.oxw(2).$implicit,e=p.oxw();p.xp6(1),p.AsE("(",e.dateAgo," ",t("DAY_AGO"),")")}}function w(t,e){if(1&t&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&t){const t=p.oxw(2).$implicit,e=p.oxw();p.xp6(1),p.AsE("(",e.dateAgo," ",t("DAYS_AGO"),")")}}function y(t,e){if(1&t&&(p._uU(0),p.YNc(1,b,2,1,"span",27),p.YNc(2,E,2,2,"span",27),p.YNc(3,w,2,2,"span",27)),2&t){const t=p.oxw().$implicit,e=p.oxw();p.hij("",t("CHOOSE_DATE")," "),p.xp6(1),p.Q6J("ngIf",0==e.dateAgo),p.xp6(1),p.Q6J("ngIf",1==e.dateAgo),p.xp6(1),p.Q6J("ngIf",e.dateAgo>1)}}function I(t,e){if(1&t&&(p.TgZ(0,"mat-option",39),p._uU(1),p.qZA()),2&t){const t=e.$implicit;p.Q6J("value",t.species_id),p.xp6(1),p.hij(" ",t.name," ")}}function N(t,e){if(1&t&&(p._uU(0),p.TgZ(1,"span",40),p._uU(2),p.qZA(),p._uU(3,")")),2&t){const t=p.oxw().$implicit,e=p.oxw();p.hij("",t("MONITORING_INDICES")," ("),p.xp6(2),p.Oqu(e.countTracking)}}function D(t,e){if(1&t&&(p.TgZ(0,"div",8),p.TgZ(1,"mat-checkbox",41),p.TgZ(2,"h4"),p._uU(3),p.TgZ(4,"small"),p._uU(5),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2);p.xp6(1),p.s9C("formControlName",t.key),p.xp6(2),p.hij("",i.convertNameParam(t.name)," "),p.xp6(2),p.hij("(",t.unit,")")}}function C(t,e){if(1&t&&(p.TgZ(0,"div",8),p.TgZ(1,"mat-checkbox",41),p.TgZ(2,"h4"),p._uU(3),p.TgZ(4,"small"),p._uU(5),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2);p.xp6(1),p.s9C("formControlName",t.key),p.xp6(2),p.hij("",i.convertNameParam(t.name)," "),p.xp6(2),p.hij("(",t.unit,")")}}function L(t,e){if(1&t&&p._uU(0),2&t){const t=p.oxw().$implicit;p.Oqu(t("DETAILS"))}}function R(t,e){if(1&t&&(p.TgZ(0,"mat-option",39),p._uU(1),p.qZA()),2&t){const t=e.$implicit;p.Q6J("value",t.id),p.xp6(1),p.hij(" ",t.name," ")}}function k(t,e){if(1&t&&(p.TgZ(0,"mat-hint"),p._uU(1),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.hij(" ",t("NO_PROCEDURE")," ")}}function M(t,e){if(1&t&&(p.TgZ(0,"mat-form-field",9),p._UZ(1,"input",42),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.Q6J("placeholder",t("DESCRIPTION_PUBLISH"))}}function Y(t,e){1&t&&p._UZ(0,"mat-progress-bar",43)}function F(t,e){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p._uU(3),p.qZA(),p.TgZ(4,"mat-vertical-stepper",3),p.TgZ(5,"mat-step",4),p.TgZ(6,"form",5),p.YNc(7,y,4,4,"ng-template",6),p.TgZ(8,"div"),p.TgZ(9,"div",7),p.TgZ(10,"div",8),p.TgZ(11,"mat-form-field",9),p.TgZ(12,"input",10),p.NdJ("focus",function(){return p.CHM(t),p.MAs(15).open()})("dateChange",function(e){return p.CHM(t),p.oxw().onDateChange(e)})("dateInput",function(e){return p.CHM(t),p.oxw().onDateChange(e)}),p.qZA(),p._UZ(13,"mat-datepicker-toggle",11),p._UZ(14,"mat-datepicker",null,12),p.qZA(),p.qZA(),p.TgZ(16,"div",8),p.TgZ(17,"mat-form-field",9),p.TgZ(18,"mat-select",13),p.NdJ("selectionChange",function(e){return p.CHM(t),p.oxw().selectSpecies(e.value)}),p.YNc(19,I,2,2,"mat-option",14),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(20,"div",15),p.TgZ(21,"button",16),p._uU(22),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(23,"mat-step",4),p.TgZ(24,"form",5),p.YNc(25,N,4,2,"ng-template",6),p.TgZ(26,"div"),p.TgZ(27,"div"),p.TgZ(28,"div"),p.TgZ(29,"div",17),p.YNc(30,D,6,3,"div",18),p.qZA(),p.qZA(),p.TgZ(31,"div"),p.TgZ(32,"div",19),p.TgZ(33,"p",20),p._uU(34),p.qZA(),p.qZA(),p.TgZ(35,"div",21),p.YNc(36,C,6,3,"div",18),p.qZA(),p.qZA(),p.qZA(),p.TgZ(37,"div",15),p.TgZ(38,"button",22),p._uU(39),p.qZA(),p.TgZ(40,"button",16),p._uU(41),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(42,"mat-step",4),p.TgZ(43,"form",5),p.YNc(44,L,1,1,"ng-template",6),p.TgZ(45,"div",23),p.TgZ(46,"mat-form-field",9),p.TgZ(47,"input",24),p.NdJ("input",function(e){return p.CHM(t),p.oxw().updateFormCost(e.target.value)}),p.qZA(),p.qZA(),p.TgZ(48,"mat-form-field",9),p._UZ(49,"input",25),p.qZA(),p.TgZ(50,"mat-form-field",9),p.TgZ(51,"mat-select",26),p.YNc(52,R,2,2,"mat-option",14),p.qZA(),p.YNc(53,k,2,1,"mat-hint",27),p.qZA(),p.TgZ(54,"div",28),p.TgZ(55,"div",29),p.TgZ(56,"a",30),p.NdJ("click",function(){return p.CHM(t),p.oxw().presentPublish()}),p._uU(57),p.qZA(),p.TgZ(58,"button",31),p._UZ(59,"mat-icon",32),p.qZA(),p.qZA(),p.TgZ(60,"mat-checkbox",33),p._uU(61),p.qZA(),p.qZA(),p.YNc(62,M,2,1,"mat-form-field",34),p.YNc(63,Y,1,0,"mat-progress-bar",35),p.TgZ(64,"div",36),p.TgZ(65,"button",37),p._uU(66),p.qZA(),p.TgZ(67,"button",38),p.NdJ("click",function(){return p.CHM(t),p.oxw().onSave()}),p._uU(68),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.BQk()}if(2&t){const t=e.$implicit,i=p.MAs(15),a=p.oxw();p.xp6(3),p.hij(" ",t("TITLE")," "),p.xp6(1),p.Q6J("linear",!0),p.xp6(1),p.Q6J("stepControl",a.formGroup1),p.xp6(1),p.Q6J("formGroup",a.formGroup1),p.xp6(6),p.Q6J("placeholder",t("START_DATE"))("matDatepicker",i)("min",a.minDate)("max",a.maxDate),p.xp6(1),p.Q6J("for",i),p.xp6(5),p.Q6J("placeholder",t("SPECIES")),p.xp6(1),p.Q6J("ngForOf",a.species),p.xp6(3),p.Oqu(t("NEXT")),p.xp6(1),p.Q6J("stepControl",a.formGroup2),p.xp6(1),p.Q6J("formGroup",a.formGroup2),p.xp6(6),p.Q6J("ngForOf",a.trackingGeneralObjects),p.xp6(4),p.Oqu(t("ADVANCED")),p.xp6(2),p.Q6J("ngForOf",a.trackingAdvanceObjects),p.xp6(3),p.Oqu(t("BACK")),p.xp6(2),p.Oqu(t("NEXT")),p.xp6(1),p.Q6J("stepControl",a.formGroup3),p.xp6(1),p.Q6J("formGroup",a.formGroup3),p.xp6(4),p.Q6J("placeholder",t("COST")),p.xp6(2),p.Q6J("placeholder",t("REPAST_COUNT")),p.xp6(2),p.Q6J("placeholder",t("PROCEDURE")),p.xp6(1),p.Q6J("ngForOf",a.procedures_filtered),p.xp6(1),p.Q6J("ngIf",0==(null==a.procedures_filtered?null:a.procedures_filtered.length)),p.xp6(4),p.Oqu(t("PUBLISH")),p.xp6(1),p.Q6J("matTooltip",t("PUBLISH_NOTE")),p.xp6(1),p.Q6J("svgIcon","heroicons_outline:question-mark-circle"),p.xp6(2),p.hij(" ",t("SELECT")," "),p.xp6(1),p.Q6J("ngIf",a.formGroup3.value.publish),p.xp6(1),p.Q6J("ngIf",a.saveLoading.pending),p.xp6(3),p.hij(" ",t("BACK")," "),p.xp6(1),p.Q6J("disabled",a.formGroup3.invalid||a.saveLoading.pending),p.xp6(1),p.hij(" ",t("SUBMIT")," ")}}let J=(()=>{class t{constructor(t,e,i,a,o,n,u){this.pondService=t,this.alertService=e,this.router=i,this._formBuilder=a,this._adapter=o,this._translate=n,this._matDialog=u,this.saveLoading=new r.E,this.trackingGeneralObjects=[],this.trackingAdvanceObjects=[],this.trackingFormsGen={},this.trackingFormsAdv={},this.countTracking=0,this.dateForm=new s.NI(c()().toDate()),this.dateAgo=0,this.maxDate=new Date,this.minDate=new Date,this.limitDate=730,this.minDate.setDate(this.maxDate.getDate()-this.limitDate),l.Cs.forEach(t=>{this.trackingFormsGen[t]=new s.NI;let e=(new l.hz).mapByKey(t);this.trackingGeneralObjects.push(new l.d2(t,e.name,e.colorCls,e.colorStr,e.unit,e.max,e.min))}),l.SV.forEach(t=>{this.trackingFormsAdv[t]=new s.NI;let e=(new l.hz).mapByKey(t);this.trackingAdvanceObjects.push(new l.d2(t,e.name,e.colorCls,e.colorStr,e.unit,e.max,e.min))})}changeLang(){this._adapter.setLocale("en")}ngOnInit(){this.getSeason(),this.formGroup1=this._formBuilder.group({dateForm:this.dateForm,species:["",s.kI.required]}),this.formGroup2=this._formBuilder.group(Object.assign(this.trackingFormsGen,this.trackingFormsAdv)),this.formGroup3=this._formBuilder.group({procedure:[""],cost:["",s.kI.required],repast:["",s.kI.required],publish:[""],publish_description:[""]}),this.formGroup2Change()}onSave(){var t=this;this.saveLoading.setPending(!0);let e={pid:this.pondService.pond.id,tracking_factor:this.trackingString,date:new Date(this.formGroup1.value.dateForm).getTime()/1e3,feed_no:this.formGroup3.value.repast,procedure:this.formGroup3.value.procedure,species:this.formGroup1.value.species,prepare_cost:this.formGroup3.value.cost};this.pondService.saveSeason(e).subscribe(function(){var e=(0,n.Z)(function*(e){e.error||1!=e.status?(t.alertService.error(e.message),t.saveLoading.setResult(!1)):(t.alertService.success(t._translate.translate("SEASON.CREATE_SEASON.CREATED")),t.pondService.seasonStart=!0,t.pondService.pond.current_season=e.season_code,t.formGroup3.value.publish&&(yield t.publishSeason(e.season_code)),t.pondService.onLoaded$.next(1),t.saveLoading.setResult(!0),t.router.navigate(["/pond/"+t.pondService.pcode]))});return function(t){return e.apply(this,arguments)}}(),()=>{this.alertService.error(this._translate.translate("SEASON.CREATE_SEASON.CREATE_FAIL")),this.saveLoading.setResult(!1)})}formGroup2Change(){this.formGroup2.valueChanges.subscribe(t=>{let e=0,i="";this.trackingAdvanceObjects.concat(this.trackingGeneralObjects).forEach(a=>{1==t[a.key]&&(i+=a.key+",",e++)}),this.trackingString=i,this.countTracking=e})}getSeason(){this.pondService.reqSeason().subscribe(t=>{1==t.status?(this.species=t.data.species,this.procedures=t.data.procedures,t.data.species.filter(t=>!0===t.recently).map(t=>{this.selectSpecies(t.species_id),this.formGroup1.controls.species.setValue(t.species_id),this.formGroup3.controls.procedure.setValue(t.procedure_id)})):this.alertService.error(t.message)},()=>{this.alertService.error(this._translate.translate("CONNECT_ERROR"))})}onDateChange(t){this.dateAgo=Math.floor(Math.abs((t.value-this.maxDate.getTime())/864e5))}selectSpecies(t){this.species.filter(e=>e.id==t).map(t=>{this.formGroup3.controls.repast.setValue(t.no_feeding),l.Cs.concat(l.SV).forEach(t=>{this.formGroup2.controls[t].setValue(!1)}),t.tracking_factor.split(",").forEach(t=>{void 0!==this.formGroup2.controls[t]&&this.formGroup2.controls[t].setValue(!0)})}),this.procedures_filtered=this.procedures.filter(e=>{if(e.species_id==t)return e})}convertNameParam(t){let e="";switch(t.toUpperCase()){case"PH_AM":e=this._translate.translate("POND.MORNING_PH");break;case"PH_PM":e=this._translate.translate("POND.NOON_PH");break;case"OXYGEN":e="DO";break;case"TEMPERATURE":e=this._translate.translate("POND.TEMP");break;case"NH3":e="NH3";break;case"NO2":e="NO2";break;case"SALINITY":e=this._translate.translate("POND.SALINITY");break;case"KH":e=this._translate.translate("POND.ALKALINITY");break;case"CLARITY":e=this._translate.translate("POND.CLARITY");break;case"VIBRIO":e="Vibrio";break;case"MAGIESIUM":e=this._translate.translate("POND.MAGNESIUM");break;case"CALCIUM":e=this._translate.translate("POND.CALCIUM");break;case"HYDRO_SULFUA":e="H2S";break;case"ORP":e="ORP";break;case"ALGAE":e=this._translate.translate("POND.ALGAE")}return e}publishSeason(t){var e=this;return(0,n.Z)(function*(){e.pondService.publishSeason(t,{description:e.formGroup3.value.publish_description}).subscribe(t=>{1==t.status?e.alertService.success(e._translate.translate("SEASON.CREATE_SEASON.PUBLISH_SUCCESS")):e.alertService.error(t.message)},()=>{e.alertService.error(e._translate.translate("CONNECT_ERROR"))})})()}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.p),p.Y36(Z.c),p.Y36(o.F0),p.Y36(s.qu),p.Y36(g._A),p.Y36(A.Vn),p.Y36(m.uw))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-season-create"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"p-2","w-full"],[1,"text-3xl","py-4"],[1,"mat-elevation-z4","w-full",3,"linear"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"grid","md:grid-cols-2","ms:grid-cols-1"],[1,"p-2"],[1,"w-full"],["matInput","","formControlName","dateForm",3,"placeholder","matDatepicker","min","max","focus","dateChange","dateInput"],["matSuffix","",3,"for"],["datePicker",""],["formControlName","species","required","",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["mat-stroked-button","","matStepperNext",""],[1,"grid","md:grid-cols-4","sm:grid-cols-2","mt-2"],["class","p-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"secondary-text"],[1,"grid","md:grid-cols-4","sm:grid-cols-2"],["mat-stroked-button","","matStepperPrevious","",1,"mx-4"],[1,"grid","grid-cols-1","pt-2"],["matInput","","formControlName","cost","required","","currencyMask","",3,"placeholder","input"],["matInput","","formControlName","repast","required","",3,"placeholder"],["formControlName","procedure",3,"placeholder"],[4,"ngIf"],[1,"pb-3"],[1,"flex","flex-row","items-center"],[1,"font-semibold","inline-block","align-middle","text-indigo-700",3,"click"],["mat-icon-button","","matTooltipPosition","right","matTooltipClass","text-base",3,"matTooltip"],[1,"icon-size-5","text-current",3,"svgIcon"],["formControlName","publish",1,"mr-4"],["class","w-full",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"pt-4","flex","justify-end"],["mat-stroked-button","","matStepperPrevious","","type","button",1,"mr-2"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"],[1,"font-weight-900","red-fg","px-3"],[3,"formControlName"],["matInput","","formControlName","publish_description",3,"placeholder"],["mode","indeterminate"]],template:function(t,e){1&t&&p.YNc(0,F,69,35,"ng-container",0),2&t&&p.Q6J("translocoRead","SEASON.CREATE_SEASON")},directives:[A.KI,h.Vq,h.C0,s._Y,s.JL,s.sg,h.VY,T.KE,q.Nt,s.Fj,x.hl,s.JJ,s.u,x.nW,T.R9,x.Mq,f.gD,s.Q7,a.sg,_.lW,h.Ic,h.fd,a.O5,v.gM,O.Hw,S.oG,g.ey,T.bx,U.pW],styles:[""]}),t})();var Q=i(49457),P=i.n(Q),j=i(12522),G=i(90171),H=i(93104);function B(t,e){1&t&&p._UZ(0,"mat-progress-bar",11)}function $(t,e){if(1&t&&(p.TgZ(0,"div",12),p.TgZ(1,"p"),p._uU(2),p.qZA(),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(2),p.Oqu(t("NO_INFO"))}}function V(t,e){if(1&t&&(p.TgZ(0,"div",16),p.TgZ(1,"P"),p._uU(2),p.qZA(),p.TgZ(3,"p"),p._uU(4),p.qZA(),p.TgZ(5,"p"),p.TgZ(6,"b"),p._uU(7),p.ALo(8,"number"),p.qZA(),p.qZA(),p.qZA()),2&t){const t=e.$implicit;p.xp6(2),p.Oqu(t.date),p.xp6(2),p.Oqu(t.quantity),p.xp6(3),p.Oqu(p.lcZ(8,3,t.quantity*t.price))}}function K(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"mat-expansion-panel",13),p.NdJ("opened",function(){const e=p.CHM(t),i=e.index,a=e.$implicit;return p.oxw(2).loadDetailItem(i,a)}),p.TgZ(1,"mat-expansion-panel-header"),p.TgZ(2,"mat-panel-title"),p.TgZ(3,"span"),p._uU(4),p.qZA(),p.qZA(),p.TgZ(5,"mat-panel-description"),p._uU(6),p.ALo(7,"number"),p.qZA(),p.qZA(),p.TgZ(8,"div"),p._UZ(9,"div",14),p.YNc(10,V,9,5,"div",15),p.qZA(),p.qZA()}if(2&t){const t=e.$implicit,i=e.index,a=p.oxw(2);p.xp6(4),p.lnq(" ",i+1," . ",t.name," SL : ",t.quantity," "),p.xp6(2),p.hij(" ",p.lcZ(7,6,t.total)," "),p.xp6(3),p.Q6J("options",a.options),p.xp6(1),p.Q6J("ngForOf",a.itemSeleted)}}function z(t,e){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"mat-toolbar",1),p.TgZ(2,"mat-toolbar-row",2),p.TgZ(3,"span",3),p._uU(4),p.qZA(),p.TgZ(5,"button",4),p.NdJ("click",function(){return p.CHM(t),p.oxw().dialogRef.close()}),p.TgZ(6,"mat-icon"),p._uU(7,"close"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(8,"mat-dialog-content"),p.YNc(9,B,1,0,"mat-progress-bar",5),p.TgZ(10,"button",6),p.NdJ("click",function(){return p.CHM(t),p.oxw().downloadDailyMaterial()}),p._UZ(11,"mat-icon",7),p.TgZ(12,"span",8),p._uU(13),p.qZA(),p.qZA(),p.YNc(14,$,3,1,"div",9),p.TgZ(15,"div"),p.TgZ(16,"mat-accordion"),p.YNc(17,K,11,8,"mat-expansion-panel",10),p.qZA(),p.qZA(),p.qZA(),p.BQk()}if(2&t){const t=e.$implicit,i=p.oxw();p.xp6(4),p.Oqu(t("TITLE")),p.xp6(5),p.Q6J("ngIf",i.loadingFlag.pending),p.xp6(1),p.Q6J("color","warn"),p.xp6(1),p.Q6J("svgIcon","heroicons_outline:cloud-download"),p.xp6(2),p.Oqu(t("EXPORT_DAILY_MATERIAL")),p.xp6(1),p.Q6J("ngIf",0==i.list.length),p.xp6(3),p.Q6J("ngForOf",i.list)}}let W=(()=>{class t{constructor(t,e,i,a,o,n){this.pondService=t,this.alertService=e,this.dialogRef=i,this.data=a,this._matDialog=o,this._translate=n,this.list=[],this.itemSeleted=[],this.options={},this.loadingFlag=new r.E}ngOnInit(){this.type=this.data.type,this.code=this.data.code,this.time=this.data.time,this.getListProduct()}getListProduct(){this.loadingFlag.setPending(!0),this.list=[],this.pondService.getListItemUsed(this.code,this.type).subscribe(t=>{1==t.status?this.list=t.data:this.alertService.error(t.error),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.alertService.error(this._translate.translate("CONNECT_ERROR"))})}downloadDailyMaterial(){let t=[];this.list.forEach(e=>{t.push(e.id)}),this.pondService.downloadDailyMaterial(this.code,this.type,t).subscribe(t=>{const e=new Blob([t],{type:"text/csv"});let i="Farmext-"+this.pondService.pond.name+"-material-"+this.code+".xlsx";P()(e,i)},t=>{this.alertService.error(this._translate.translate("CONNECT_ERROR"))})}presentMaterialHistory(e){var i=this;return(0,n.Z)(function*(){i._matDialog.open(t,{width:"500px",data:{product_id:e.id,type:i.type,code:i.code,infor:e}})})()}loadDetailItem(t,e){this.loadingFlag.setPending(!0),this.itemSeleted=[],this.pondService.getProductUsed(this.code,this.type,e.id).subscribe(t=>{1==t.status?(this.itemSeleted=t.data,this.initChart()):this.alertService.error(t.error),this.loadingFlag.setResult(!0)},()=>{this.alertService.error(this._translate.translate("CONNECT_ERROR")),this.loadingFlag.setResult(!0)})}initChart(){this.options={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[this._translate.translate("SEASON.DETAIL_MOD.QUANTITY")]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:[]},series:[{name:this._translate.translate("SEASON.DETAIL_MOD.QUANTITY"),type:"bar",data:[]}]},this.itemSeleted.forEach(t=>{this.options.xAxis.data.push(t.date),this.options.series[0].data.push(t.quantity)})}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.p),p.Y36(Z.c),p.Y36(m.so),p.Y36(m.WI),p.Y36(m.uw),p.Y36(A.Vn))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-season-material"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"m-0"],[1,"flex","justify-between","items-center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mode","indeterminate",4,"ngIf"],["mat-stroked-button","",1,"mr-2",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["class","text-center",4,"ngIf"],[3,"opened",4,"ngFor","ngForOf"],["mode","indeterminate"],[1,"text-center"],[3,"opened"],["echarts","",3,"options"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"]],template:function(t,e){1&t&&p.YNc(0,z,18,7,"ng-container",0),2&t&&p.Q6J("translocoRead","SEASON.MATERIAL")},directives:[A.KI,j.Ye,j.rD,_.lW,O.Hw,m.xY,a.O5,G.pp,a.sg,U.pW,G.ib,G.yz,G.yK,G.u4,H.w],pipes:[a.JJ],styles:["mat-panel-title[_ngcontent-%COMP%]{width:50%}"]}),t})();function X(t,e){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"mat-toolbar",1),p.TgZ(2,"mat-toolbar-row",2),p.TgZ(3,"span",3),p._uU(4),p.qZA(),p.TgZ(5,"button",4),p.NdJ("click",function(){return p.CHM(t),p.oxw().dialogRef.close()}),p.TgZ(6,"mat-icon"),p._uU(7,"close"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p._UZ(8,"div",5),p.BQk()}if(2&t){const t=e.$implicit,i=p.oxw();p.xp6(4),p.Oqu(t("TITLE")),p.xp6(4),p.Q6J("options",i.option)}}let tt=(()=>{class t{constructor(t,e,i,a){this._pondService=t,this.dialogRef=e,this.data=i,this._translate=a,this.option={}}ngOnInit(){this._pondService.getCostListOther(this.data).pipe().subscribe(t=>{this.listItem=t.data,this.createChart()})}createChart(){this.option={legend:{},tooltip:{},dataset:{source:[["Ng\xe0y"],["Chi kh\xe1c"],["Thu kh\xe1c"]]},xAxis:[{type:"category",gridIndex:0},{type:"category",gridIndex:1}],yAxis:[{gridIndex:0},{gridIndex:1}],grid:[{bottom:"10%"},{top:"100%"}],series:[{type:"bar",seriesLayoutBy:"row"},{type:"bar",seriesLayoutBy:"row"}]},this.listItem.forEach(t=>{this.option.dataset.source[0].push(t.date),this.option.dataset.source[1].push(t.cost_other),this.option.dataset.source[2].push(t.income)})}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.p),p.Y36(m.so),p.Y36(m.WI),p.Y36(A.Vn))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-season-detail-cost"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"m-0"],[1,"flex","justify-between","items-center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["echarts","",3,"options"]],template:function(t,e){1&t&&p.YNc(0,X,9,2,"ng-container",0),2&t&&p.Q6J("translocoRead","SEASON.COST")},directives:[A.KI,j.Ye,j.rD,_.lW,O.Hw,H.w],styles:[""]}),t})();var et=i(1769);function it(t,e){if(1&t&&(p.TgZ(0,"div"),p.TgZ(1,"div",16),p.TgZ(2,"h3"),p._uU(3),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"date"),p.qZA(),p.qZA(),p.TgZ(7,"div",16),p.TgZ(8,"h3"),p._uU(9),p.qZA(),p.TgZ(10,"p"),p._uU(11),p.ALo(12,"number"),p.qZA(),p.qZA(),p.TgZ(13,"div",16),p.TgZ(14,"h3"),p._uU(15),p.qZA(),p.TgZ(16,"p"),p._uU(17),p.ALo(18,"number"),p.qZA(),p.qZA(),p.TgZ(19,"div",16),p.TgZ(20,"h3"),p._uU(21),p.qZA(),p.TgZ(22,"p"),p._uU(23),p.ALo(24,"number"),p.qZA(),p.qZA(),p._UZ(25,"mat-divider"),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2).$implicit;p.xp6(3),p.Oqu(i("STOCK_DATE")),p.xp6(2),p.Oqu(p.xi3(6,10,1e3*t.seed_date,"dd-MM-yyyy")),p.xp6(4),p.Oqu(i("QUANTITY")),p.xp6(2),p.AsE("",p.xi3(12,13,t.seed_quantity,".0-2")," ",i("PIECES"),""),p.xp6(4),p.Oqu(i("SIZE")),p.xp6(2),p.AsE("",p.xi3(18,16,t.seed_weight,".0-2")," ",i("PIECE_KG"),""),p.xp6(4),p.Oqu(i("MASS")),p.xp6(2),p.hij("",p.xi3(24,19,t.seed_weight*t.seed_quantity/1e3,".0-2")," kg")}}function at(t,e){if(1&t&&(p.TgZ(0,"div",17),p.TgZ(1,"h1"),p.TgZ(2,"b"),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&t){const t=p.oxw(2).$implicit;p.xp6(3),p.Oqu(t("TRANSFER"))}}function ot(t,e){if(1&t&&(p.TgZ(0,"div"),p.TgZ(1,"div",16),p.TgZ(2,"h3"),p._uU(3),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"date"),p.qZA(),p.qZA(),p.TgZ(7,"div",16),p.TgZ(8,"h3"),p._uU(9),p.qZA(),p.TgZ(10,"p"),p._uU(11),p.ALo(12,"number"),p.qZA(),p.qZA(),p.TgZ(13,"div",16),p.TgZ(14,"h3"),p._uU(15),p.qZA(),p.TgZ(16,"p"),p._uU(17),p.ALo(18,"number"),p.qZA(),p.qZA(),p.TgZ(19,"div",16),p.TgZ(20,"h3"),p._uU(21,"FCR"),p.qZA(),p.TgZ(22,"p"),p._uU(23),p.ALo(24,"number"),p.qZA(),p.qZA(),p.TgZ(25,"div",16),p.TgZ(26,"h3"),p._uU(27),p.qZA(),p.TgZ(28,"p"),p._uU(29),p.ALo(30,"number"),p.qZA(),p.qZA(),p._UZ(31,"mat-divider"),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(3).$implicit;p.xp6(3),p.Oqu(i("TRANSFER_DATE")),p.xp6(2),p.Oqu(p.xi3(6,11,1e3*t.add_time,"dd-MM-yyyy")),p.xp6(4),p.Oqu(i("QUANTITY")),p.xp6(2),p.AsE("",p.xi3(12,14,t.quantity_individual,".0-2")," ",i("PIECES"),""),p.xp6(4),p.Oqu(i("SIZE")),p.xp6(2),p.AsE("",p.xi3(18,17,t.weight,".0-2")," ",i("PIECE_KG"),""),p.xp6(6),p.Oqu(p.xi3(24,20,t.fcr,"1.0-2")),p.xp6(4),p.Oqu(i("MASS")),p.xp6(2),p.hij("",p.xi3(30,23,t.quantity_kg,".0-2")," kg")}}function nt(t,e){if(1&t&&(p.TgZ(0,"div"),p.YNc(1,ot,32,26,"div",19),p.TgZ(2,"div",26),p.TgZ(3,"h1"),p.TgZ(4,"b"),p._uU(5),p.qZA(),p.qZA(),p.qZA(),p.TgZ(6,"div",16),p.TgZ(7,"h3"),p._uU(8),p.qZA(),p.TgZ(9,"p"),p.TgZ(10,"b"),p._uU(11),p.ALo(12,"number"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",16),p.TgZ(14,"h3"),p._uU(15),p.qZA(),p.TgZ(16,"p"),p.TgZ(17,"b"),p._uU(18),p.ALo(19,"number"),p.TgZ(20,"sup"),p._uU(21,"2"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(22,"div",16),p.TgZ(23,"h3"),p._uU(24),p.qZA(),p.TgZ(25,"p"),p.TgZ(26,"b"),p._uU(27),p.ALo(28,"number"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){const t=p.oxw(2).$implicit,e=p.oxw();p.xp6(1),p.Q6J("ngForOf",e.itemData.moved_list),p.xp6(4),p.Oqu(t("TOTAL")),p.xp6(3),p.Oqu(t("QUANTITY")),p.xp6(3),p.AsE("",p.xi3(12,10,e.seedQuantity,".0-2")," ",t("PIECES"),""),p.xp6(4),p.Oqu(t("DENSITY")),p.xp6(3),p.AsE("",p.xi3(19,13,e.seedQuantity/e.itemData.pond.area,".0-2")," ",t("PIECES_M"),""),p.xp6(6),p.Oqu(t("TOTAL_MASS")),p.xp6(3),p.hij("",p.xi3(28,16,e.seedWeight/1e3,".0-2")," kg")}}function st(t,e){if(1&t&&(p.TgZ(0,"div"),p.TgZ(1,"div",16),p.TgZ(2,"h3"),p._uU(3),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"date"),p.qZA(),p.qZA(),p.TgZ(7,"div",16),p.TgZ(8,"h3"),p._uU(9),p.qZA(),p.TgZ(10,"p"),p._uU(11),p.ALo(12,"number"),p.qZA(),p.qZA(),p.TgZ(13,"div",16),p.TgZ(14,"h3"),p._uU(15),p.qZA(),p.TgZ(16,"p"),p._uU(17),p.ALo(18,"number"),p.ALo(19,"number"),p.qZA(),p.qZA(),p.TgZ(20,"div",16),p.TgZ(21,"h3"),p._uU(22),p.qZA(),p.TgZ(23,"p"),p._uU(24),p.ALo(25,"number"),p.qZA(),p.qZA(),p.TgZ(26,"div",16),p.TgZ(27,"h3"),p._uU(28),p.qZA(),p.TgZ(29,"p"),p._uU(30),p.ALo(31,"number"),p.qZA(),p.qZA(),p.TgZ(32,"div",16),p.TgZ(33,"h3"),p._uU(34),p.qZA(),p.TgZ(35,"p"),p._uU(36),p.ALo(37,"number"),p.qZA(),p.qZA(),p.TgZ(38,"div",16),p.TgZ(39,"h3"),p._uU(40),p.qZA(),p.TgZ(41,"p"),p._uU(42),p.ALo(43,"number"),p.qZA(),p.qZA(),p.TgZ(44,"div",16),p.TgZ(45,"h3"),p._uU(46,"FCR"),p.qZA(),p.TgZ(47,"p"),p._uU(48),p.qZA(),p.qZA(),p._UZ(49,"mat-divider"),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2).$implicit,a=p.oxw();p.xp6(3),p.Oqu(i("HARVEST_DATE")),p.xp6(2),p.hij("",p.xi3(6,20,1e3*t.harvest_date,"dd-MM-yyyy")," kg"),p.xp6(4),p.Oqu(i("FARM_SPAN")),p.xp6(2),p.AsE("",p.xi3(12,23,(t.harvest_date-(null==a.itemData.season?null:a.itemData.season.seed_date))/86400,".0-0")," ",i("DAYS"),""),p.xp6(4),p.Oqu(i("AVERAGE_SIZE")),p.xp6(2),p.HOy("",p.xi3(18,26,t.harvest_size,".0-2")," ",i("GR_PIECE")," (",p.xi3(19,29,1e3/t.harvest_size,".0-2")," ",i("KG_PIECE"),")"),p.xp6(5),p.Oqu(i("PRICE")),p.xp6(2),p.hij("",p.xi3(25,32,t.harvest_price,".0-2")," \u0111/kg"),p.xp6(4),p.Oqu(i("QUANTITY")),p.xp6(2),p.AsE("",p.xi3(31,35,1e3*t.harvest_quantity/t.harvest_size,".0-2")," ",i("PIECES"),""),p.xp6(4),p.Oqu(i("BIOMASS")),p.xp6(2),p.hij("",p.xi3(37,38,t.harvest_quantity,".0-2")," kg"),p.xp6(4),p.Oqu(i("PROD_COST")),p.xp6(2),p.hij("",p.xi3(43,41,t.cost/t.harvest_quantity,"1.0-2")," \u0111"),p.xp6(6),p.Oqu(t.fcr)}}function rt(t,e){if(1&t&&(p.TgZ(0,"div"),p.TgZ(1,"div",16),p.TgZ(2,"h3"),p._uU(3),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"date"),p.qZA(),p.qZA(),p.TgZ(7,"div",16),p.TgZ(8,"h3"),p._uU(9),p.qZA(),p.TgZ(10,"p"),p._uU(11),p.ALo(12,"number"),p.qZA(),p.qZA(),p.TgZ(13,"div",16),p.TgZ(14,"h3"),p._uU(15),p.qZA(),p.TgZ(16,"p"),p._uU(17),p.ALo(18,"number"),p.qZA(),p.qZA(),p.TgZ(19,"div",16),p.TgZ(20,"h3"),p._uU(21),p.qZA(),p.TgZ(22,"p"),p._uU(23),p.ALo(24,"number"),p.qZA(),p.qZA(),p.TgZ(25,"div",16),p.TgZ(26,"h3"),p._uU(27,"FCR"),p.qZA(),p.TgZ(28,"p"),p._uU(29),p.qZA(),p.qZA(),p.TgZ(30,"div",16),p.TgZ(31,"h3"),p._uU(32),p.qZA(),p.TgZ(33,"p"),p._uU(34),p.ALo(35,"number"),p.qZA(),p.qZA(),p._UZ(36,"mat-divider"),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2).$implicit,a=p.oxw();p.xp6(3),p.Oqu(i("TRANSFER")),p.xp6(2),p.Oqu(p.xi3(6,14,1e3*t.add_time,"dd-MM-yyyy")),p.xp6(4),p.Oqu(i("FARM_SPAN")),p.xp6(2),p.AsE("",p.xi3(12,17,(t.add_time-(null==a.itemData.season?null:a.itemData.season.seed_date))/86400,".0-0")," ",i("DAYS"),""),p.xp6(4),p.Oqu(i("QUANTITY")),p.xp6(2),p.AsE("",p.xi3(18,20,t.quantity_individual,".0-2")," ",i("PIECES"),""),p.xp6(4),p.Oqu(i("SIZE")),p.xp6(2),p.AsE("",p.xi3(24,23,t.weight,".0-2")," ",i("PIECE_KG"),""),p.xp6(6),p.Oqu(t.fcr),p.xp6(3),p.Oqu(i("BIOMASS")),p.xp6(2),p.hij("",p.xi3(35,26,t.quantity_kg,".0-2")," kg")}}function lt(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"div",23),p.TgZ(2,"h1"),p.TgZ(3,"b"),p._uU(4),p.qZA(),p.qZA(),p.qZA(),p.TgZ(5,"div",16),p.TgZ(6,"h3"),p._uU(7),p.qZA(),p.TgZ(8,"p"),p._uU(9),p.ALo(10,"number"),p.qZA(),p.qZA(),p.TgZ(11,"div",16),p.TgZ(12,"h3"),p._uU(13),p.qZA(),p.TgZ(14,"p",24),p._uU(15),p.ALo(16,"number"),p.TgZ(17,"mat-icon",25),p.NdJ("click",function(){return p.CHM(t),p.oxw(3).presentMaterialList("feed")}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(18,"div",16),p.TgZ(19,"h3"),p._uU(20),p.qZA(),p.TgZ(21,"p",24),p._uU(22),p.ALo(23,"number"),p.TgZ(24,"mat-icon",25),p.NdJ("click",function(){return p.CHM(t),p.oxw(3).presentMaterialList("blend")}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(25,"div",16),p.TgZ(26,"h3"),p._uU(27),p.qZA(),p.TgZ(28,"p",24),p._uU(29),p.ALo(30,"number"),p.TgZ(31,"span"),p.TgZ(32,"mat-icon",25),p.NdJ("click",function(){return p.CHM(t),p.oxw(3).presentMaterialList("enviro")}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(33,"div",16),p.TgZ(34,"h3"),p._uU(35),p.qZA(),p.TgZ(36,"p"),p._uU(37),p.ALo(38,"number"),p.qZA(),p.qZA(),p.TgZ(39,"div",16),p.TgZ(40,"h3"),p._uU(41),p.qZA(),p.TgZ(42,"p"),p._uU(43),p.ALo(44,"number"),p.qZA(),p.qZA(),p.TgZ(45,"div",16),p.TgZ(46,"h3"),p._uU(47),p.qZA(),p.TgZ(48,"p"),p._uU(49),p.ALo(50,"number"),p.qZA(),p.qZA(),p.TgZ(51,"div",16),p.TgZ(52,"h3"),p._uU(53),p.qZA(),p.TgZ(54,"p",24),p._uU(55),p.ALo(56,"number"),p.TgZ(57,"mat-icon",25),p.NdJ("click",function(){return p.CHM(t),p.oxw(3).presentCostEcharts()}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(58,"div",16),p.TgZ(59,"h3"),p._uU(60),p.qZA(),p.TgZ(61,"p"),p._uU(62),p.ALo(63,"number"),p.qZA(),p.qZA(),p._UZ(64,"mat-divider"),p.qZA()}if(2&t){const t=p.oxw(2).$implicit,e=p.oxw();p.xp6(4),p.Oqu(t("COSTS")),p.xp6(3),p.Oqu(t("STOCK_COST")),p.xp6(2),p.hij("",p.xi3(10,23,null==e.itemData.cost?null:e.itemData.cost.seed,".0-2")," \u0111"),p.xp6(4),p.Oqu(t("FEED_COST")),p.xp6(2),p.hij("",p.xi3(16,26,null==e.itemData.cost?null:e.itemData.cost.feed,".0-2")," \u0111 "),p.xp6(2),p.Q6J("svgIcon","keyboard_arrow_right"),p.xp6(3),p.Oqu(t("BLEND_COST")),p.xp6(2),p.hij("",p.xi3(23,29,null==e.itemData.cost?null:e.itemData.cost.blend,".0-2")," \u0111 "),p.xp6(2),p.Q6J("svgIcon","keyboard_arrow_right"),p.xp6(3),p.Oqu(t("CHEM_COST")),p.xp6(2),p.hij("",p.xi3(30,32,null==e.itemData.cost?null:e.itemData.cost.enviro,".0-2")," \u0111 "),p.xp6(3),p.Q6J("svgIcon","keyboard_arrow_right"),p.xp6(3),p.Oqu(t("DEPRECIATION")),p.xp6(2),p.hij("",p.xi3(38,35,null==e.itemData.cost?null:e.itemData.cost.pond,".0-2")," \u0111"),p.xp6(4),p.Oqu(t("ACCOUNT_COSTS")),p.xp6(2),p.hij("",p.xi3(44,38,null==e.itemData.cost?null:e.itemData.cost.moneyout,".0-2")," \u0111"),p.xp6(4),p.Oqu(t("RENOVATION")),p.xp6(2),p.hij("",p.xi3(50,41,null==e.itemData.cost?null:e.itemData.cost.prepare,".0-2")," \u0111"),p.xp6(4),p.Oqu(t("OTHER_COST")),p.xp6(2),p.hij("",p.xi3(56,44,null==e.itemData.cost?null:e.itemData.cost.other,".0-2")," \u0111 "),p.xp6(2),p.Q6J("svgIcon","keyboard_arrow_right"),p.xp6(3),p.Oqu(t("PROD_COST")),p.xp6(2),p.hij("",p.xi3(63,47,e.itemData.season.harvest_cost/(null==e.itemData?null:e.itemData.season.harvest_quantity),".0-2")," \u0111")}}function ut(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"div",13),p.TgZ(1,"div",14),p.TgZ(2,"div",15),p.TgZ(3,"div",16),p.TgZ(4,"h1"),p._uU(5),p.qZA(),p.qZA(),p.TgZ(6,"div",17),p.TgZ(7,"span"),p._uU(8),p.qZA(),p.qZA(),p.TgZ(9,"div",18),p.TgZ(10,"h3"),p._uU(11),p.qZA(),p.TgZ(12,"p"),p._uU(13),p.ALo(14,"date"),p.ALo(15,"date"),p.qZA(),p.qZA(),p.TgZ(16,"div",16),p.TgZ(17,"h3"),p._uU(18),p.qZA(),p.TgZ(19,"p"),p._uU(20),p.qZA(),p.qZA(),p.TgZ(21,"div",16),p.TgZ(22,"h3"),p._uU(23),p.qZA(),p.TgZ(24,"p"),p._uU(25),p.ALo(26,"number"),p.TgZ(27,"sup"),p._uU(28,"3"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(29,"div",16),p.TgZ(30,"h3"),p._uU(31),p.qZA(),p.TgZ(32,"p"),p._uU(33),p.qZA(),p.qZA(),p._UZ(34,"mat-divider"),p.TgZ(35,"div",17),p.TgZ(36,"h1"),p.TgZ(37,"b"),p._uU(38),p.qZA(),p.qZA(),p.qZA(),p.YNc(39,it,26,22,"div",19),p.YNc(40,at,4,1,"div",20),p.YNc(41,nt,29,19,"div",21),p.qZA(),p.TgZ(42,"div",22),p.TgZ(43,"div",16),p.TgZ(44,"h1"),p._uU(45),p.qZA(),p.qZA(),p.TgZ(46,"div",23),p.TgZ(47,"h1"),p.TgZ(48,"b"),p._uU(49),p.qZA(),p.qZA(),p.qZA(),p.YNc(50,st,50,44,"div",19),p.YNc(51,rt,37,29,"div",19),p.TgZ(52,"div",23),p.TgZ(53,"h1"),p.TgZ(54,"b"),p._uU(55),p.qZA(),p.qZA(),p.qZA(),p.TgZ(56,"div",16),p.TgZ(57,"h3"),p._uU(58),p.qZA(),p.TgZ(59,"p"),p._uU(60),p.ALo(61,"number"),p.qZA(),p.qZA(),p.TgZ(62,"div",16),p.TgZ(63,"h3"),p._uU(64),p.qZA(),p.TgZ(65,"p"),p._uU(66),p.ALo(67,"number"),p.qZA(),p.qZA(),p.TgZ(68,"div",16),p.TgZ(69,"h3"),p._uU(70),p.qZA(),p.TgZ(71,"p"),p._uU(72),p.ALo(73,"number"),p.qZA(),p.qZA(),p._UZ(74,"mat-divider"),p.TgZ(75,"div",23),p.TgZ(76,"h1"),p.TgZ(77,"b"),p._uU(78),p.qZA(),p.qZA(),p.qZA(),p.TgZ(79,"div",16),p.TgZ(80,"h3"),p._uU(81),p.qZA(),p.TgZ(82,"p"),p._uU(83),p.ALo(84,"number"),p.qZA(),p.qZA(),p.TgZ(85,"div",16),p.TgZ(86,"h3"),p._uU(87,"FCR"),p.qZA(),p.TgZ(88,"p"),p._uU(89),p.ALo(90,"number"),p.qZA(),p.qZA(),p.TgZ(91,"div",16),p.TgZ(92,"h3"),p._uU(93),p.qZA(),p.TgZ(94,"p"),p._uU(95),p.ALo(96,"number"),p.qZA(),p.qZA(),p.TgZ(97,"div",16),p.TgZ(98,"h3"),p._uU(99),p.qZA(),p.TgZ(100,"p"),p._uU(101),p.ALo(102,"number"),p.qZA(),p.qZA(),p._UZ(103,"mat-divider"),p.TgZ(104,"div",23),p.TgZ(105,"h1"),p.TgZ(106,"b"),p._uU(107),p.qZA(),p.qZA(),p.qZA(),p.TgZ(108,"div",16),p.TgZ(109,"h3"),p._uU(110),p.qZA(),p.TgZ(111,"p",24),p._uU(112),p.ALo(113,"number"),p.TgZ(114,"mat-icon",25),p.NdJ("click",function(){return p.CHM(t),p.oxw(2).presentCostEcharts()}),p.qZA(),p.qZA(),p.qZA(),p._UZ(115,"mat-divider"),p.YNc(116,lt,65,50,"div",21),p.TgZ(117,"div",23),p.TgZ(118,"h1"),p.TgZ(119,"b"),p._uU(120),p.qZA(),p.qZA(),p.qZA(),p.TgZ(121,"div",16),p.TgZ(122,"h3"),p._uU(123),p.qZA(),p.TgZ(124,"p"),p.TgZ(125,"b"),p._uU(126),p.ALo(127,"number"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(128,"div",16),p.TgZ(129,"h3"),p._uU(130),p.qZA(),p.TgZ(131,"p"),p.TgZ(132,"b"),p._uU(133),p.ALo(134,"number"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(135,"div",16),p.TgZ(136,"h3"),p._uU(137),p.qZA(),p.TgZ(138,"p"),p.TgZ(139,"b"),p._uU(140),p.ALo(141,"number"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(142,"div",16),p.TgZ(143,"h3"),p._uU(144),p.qZA(),p.TgZ(145,"p"),p.TgZ(146,"b"),p._uU(147),p.ALo(148,"number"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&t){const t=p.oxw().$implicit,e=p.oxw();p.xp6(5),p.Oqu(t("DETAILS")),p.xp6(3),p.hij("#",e.code,""),p.xp6(3),p.Oqu(t("CROP")),p.xp6(2),p.AsE("",p.xi3(14,53,1e3*(null==e.itemData.season?null:e.itemData.season.start_time),"dd-MM-yyyy")," - ",p.xi3(15,56,1e3*(null==e.itemData.season?null:e.itemData.season.end_time),"dd-MM-yyyy")," "),p.xp6(5),p.Oqu(t("FARM")),p.xp6(2),p.Oqu(e.itemData.farm.name),p.xp6(3),p.Oqu(t("POND")),p.xp6(2),p.lnq("",e.itemData.pond.name,": ",p.xi3(26,59,e.itemData.pond.area,".0-2")," x ",e.itemData.pond.deep," m"),p.xp6(6),p.Oqu(t("SPECIES")),p.xp6(2),p.Oqu(e.itemData.species.name),p.xp6(5),p.Oqu(t("STOCKING")),p.xp6(1),p.Q6J("ngForOf",e.itemData.seed_list),p.xp6(1),p.Q6J("ngIf",0==e.moveOut.length),p.xp6(1),p.Q6J("ngIf",0==e.moveOut.length),p.xp6(4),p.Oqu(t("DETAILED")),p.xp6(4),p.Oqu(t("HARVEST")),p.xp6(1),p.Q6J("ngForOf",e.itemData.harvest_list),p.xp6(1),p.Q6J("ngForOf",e.moveOut),p.xp6(4),p.Oqu(t("TOTAL")),p.xp6(3),p.Oqu(t("LIVE_RATIO")),p.xp6(2),p.hij("",p.xi3(61,62,100*e.harvestQuantity/e.seedQuantity,".0-1")," %"),p.xp6(4),p.Oqu(t("QUANTITY")),p.xp6(2),p.AsE("",p.xi3(67,65,e.harvestQuantity,".0-2")," ",t("PIECES"),""),p.xp6(4),p.Oqu(t("BIOMASS")),p.xp6(2),p.hij("",p.xi3(73,68,e.harvestQuantity*(null==e.itemData.season?null:e.itemData.season.harvest_size)/1e3,".0-2")," kg "),p.xp6(6),p.Oqu(t("FEED")),p.xp6(3),p.Oqu(t("TOTAL_FEED")),p.xp6(2),p.hij("",p.xi3(84,71,e.totalFeed,"1.0-3"),"kg"),p.xp6(6),p.Oqu(p.xi3(90,74,(null==e.itemData?null:e.itemData.season.total_feed)/(((null==e.itemData?null:e.itemData.season.seed_quantity)-(null==e.itemData?null:e.itemData.season.total_loss))/1e3*((null==e.itemData?null:e.itemData.season.current_weight)-(null==e.itemData?null:e.itemData.season.seed_weight))),"1.0-2")),p.xp6(4),p.Oqu(t("AVERAGE_GROWTH")),p.xp6(2),p.AsE("",p.xi3(96,77,null==e.itemData.season?null:e.itemData.season.grow_rate,"1.0-2")," ",t("GR_DAY"),""),p.xp6(4),p.Oqu(t("LOSS")),p.xp6(2),p.AsE("",p.xi3(102,80,null==e.itemData.season?null:e.itemData.season.total_loss,"1.0-0")," ",t("PIECES"),""),p.xp6(6),p.Oqu(t("OTHER_INCOME")),p.xp6(3),p.Oqu(t("CROP")),p.xp6(2),p.hij("",p.xi3(113,83,null==e.itemData.cost?null:e.itemData.cost.income,".0-2")," \u0111 "),p.xp6(2),p.Q6J("svgIcon","keyboard_arrow_right"),p.xp6(2),p.Q6J("ngIf",e.itemData&&e.itemData.cost),p.xp6(4),p.Oqu(t("SUMMARY")),p.xp6(3),p.Oqu(t("TOTAL_COSTS")),p.xp6(3),p.hij("",p.xi3(127,86,null==e.itemData.cost?null:e.itemData.cost.total,".0-2")," \u0111"),p.xp6(4),p.Oqu(t("REVENUE")),p.xp6(3),p.hij("",p.xi3(134,89,null==e.itemData.season?null:e.itemData.season.revenue,".0-3")," \u0111"),p.xp6(4),p.Oqu(t("TRANSFER")),p.xp6(3),p.hij("",p.xi3(141,92,e.costMoveOut,".0-3")," \u0111"),p.xp6(4),p.Oqu(t("PROFIT")),p.xp6(3),p.hij("",p.xi3(148,95,null==e.itemData.season?null:e.itemData.season.profit,".0-3")," \u0111")}}function ct(t,e){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"div"),p.TgZ(7,"div",6),p._UZ(8,"img",7),p.qZA(),p.qZA(),p.TgZ(9,"div"),p.TgZ(10,"button",8),p.NdJ("click",function(){return p.CHM(t),p.oxw().downloadDaily()}),p._UZ(11,"mat-icon",9),p.TgZ(12,"span",10),p._uU(13),p.qZA(),p.qZA(),p.TgZ(14,"button",11),p._UZ(15,"mat-icon",9),p.TgZ(16,"span",10),p._uU(17),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.YNc(18,ut,149,98,"div",12),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.BQk()}if(2&t){const t=e.$implicit,i=p.oxw();p.xp6(8),p.Q6J("src","https://chart.googleapis.com/chart?chs=120x120&cht=qr&chl=crop:"+i.code+"&choe=UTF-8",p.LSH),p.xp6(2),p.Q6J("color","warn"),p.xp6(1),p.Q6J("svgIcon","heroicons_outline:cloud-download"),p.xp6(2),p.Oqu(t("EXPORT_DAILY")),p.xp6(1),p.Q6J("routerLink","../")("color","primary"),p.xp6(1),p.Q6J("svgIcon","mat_outline:keyboard_backspace"),p.xp6(2),p.Oqu(t("BACK")),p.xp6(1),p.Q6J("ngIf",i.itemData)}}let pt=(()=>{class t{constructor(t,e,i,a,o){this.pondService=t,this.route=e,this.alertService=i,this._matDialog=a,this._translate=o,this.code="",this.loadingFlag=new r.E,this.seedQuantity=0,this.seedWeight=0,this.harvestQuantity=0,this.costMoveOut=0,this.moveIn=[],this.moveOut=[],this.toDay=c()()}ngOnInit(){this.code=this.route.snapshot.paramMap.get("code"),this.loadSeason()}loadSeason(){this.loadingFlag.setPending(!0),this.pondService.reqSeasonDetail(this.code).subscribe(t=>{1==t.status?(this.itemData=t.data,this.totalFeed=t.data.season.total_feed,t.data.seed_list.forEach(t=>{this.seedQuantity+=parseInt(t.seed_quantity),this.seedWeight+=parseInt(t.seed_quantity)*parseInt(t.seed_weight)}),t.data.moved_list.forEach(t=>{t.to_season_code==this.code?(this.seedQuantity+=parseInt(t.quantity_individual),this.seedWeight=parseInt(t.quantity_individual)*parseInt(t.weight),this.moveIn.push(t)):(this.harvestQuantity+=parseInt(t.quantity_individual),this.costMoveOut+=parseInt(t.cost),this.moveOut.push(t))}),t.data.harvest_list.forEach(t=>{this.harvestQuantity+=1e3*t.harvest_quantity/t.harvest_size}),console.log(this.seedQuantity)):this.alertService.error(t.message),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.alertService.error(this._translate.translate("CONNECT_ERROR"))})}presentMaterialList(t){var e;this._matDialog.open(W,{width:"500px",data:{type:t,code:this.code,time:null===(e=this.itemData.season)||void 0===e?void 0:e.start_time}})}presentCostEcharts(){this._matDialog.open(tt,{width:"100%",data:this.code})}downloadDaily(){this.pondService.downloadDaily(this.itemData.season.code).subscribe(t=>{const e=new Blob([t],{type:"text/csv"});let i="Farmext-"+this.pondService.pond.name+"-"+this.itemData.season.code+".xlsx";P()(e,i)},t=>{this.alertService.error(this._translate.translate("CONNECT_ERROR"))})}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.p),p.Y36(o.gz),p.Y36(Z.c),p.Y36(m.uw),p.Y36(A.Vn))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-season-detail"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto"],[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[2,"width","120px",3,"src"],["mat-stroked-button","",1,"mr-2",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-stroked-button","",1,"mr-2",3,"routerLink","color"],["class","flex flex-wrap w-full",4,"ngIf"],[1,"flex","flex-wrap","w-full"],[1,"w-full","mt-12","grid","md:grid-cols-2","ms:grid-cols-2"],[1,"flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden","p-6","md:mr-1"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","justify-center","pt-3"],[1,"flex","items-center","justify-between","pt-3"],[4,"ngFor","ngForOf"],["class","flex items-center justify-center pt-3",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden","p-6","md:ml-1"],[1,"flex","items-center","justify-center","p-3"],[1,"inline-flex"],[1,"icon-size-5",3,"svgIcon","click"],[1,"flex","items-center","justify-center"]],template:function(t,e){1&t&&p.YNc(0,ct,19,9,"ng-container",0),2&t&&p.Q6J("translocoRead","SEASON.DETAIL_MOD")},directives:[A.KI,_.lW,O.Hw,o.rH,a.O5,et.d,a.sg],pipes:[a.uU,a.JJ],styles:[""]}),t})();var dt=i(95585),Zt=i(1400),gt=i(33935);function At(t,e){1&t&&p._UZ(0,"mat-progress-bar",15)}function mt(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"div",8),p.TgZ(1,"div",9),p.TgZ(2,"div"),p.TgZ(3,"div",16),p._uU(4),p.ALo(5,"date"),p.qZA(),p.TgZ(6,"div",17),p._uU(7),p.qZA(),p.qZA(),p.TgZ(8,"div",18),p.TgZ(9,"button",19),p._UZ(10,"mat-icon",20),p.qZA(),p.TgZ(11,"mat-menu",null,21),p.TgZ(13,"a",22),p._uU(14),p.qZA(),p.TgZ(15,"button",23),p.NdJ("click",function(){const e=p.CHM(t).index;return p.oxw(2).openConfirmRemoveSeason(e)}),p._uU(16),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(17,"div",24),p._UZ(18,"div",10),p.qZA(),p.TgZ(19,"div",25),p.TgZ(20,"div",26),p.TgZ(21,"div",27),p.TgZ(22,"div",28),p._UZ(23,"div",29),p.TgZ(24,"div",30),p._uU(25),p.qZA(),p.qZA(),p.TgZ(26,"div",31),p._uU(27),p.qZA(),p.TgZ(28,"div",32),p._uU(29),p.qZA(),p.qZA(),p.TgZ(30,"div",27),p.TgZ(31,"div",28),p._UZ(32,"div",33),p.TgZ(33,"div",30),p._uU(34),p.qZA(),p.qZA(),p.TgZ(35,"div",31),p._uU(36),p.qZA(),p.TgZ(37,"div",32),p._uU(38),p.qZA(),p.qZA(),p.TgZ(39,"div",27),p.TgZ(40,"div",28),p._UZ(41,"div",33),p.TgZ(42,"div",30),p._uU(43),p.qZA(),p.qZA(),p.TgZ(44,"div",31),p._uU(45),p.qZA(),p.TgZ(46,"div",32),p._uU(47),p.qZA(),p.qZA(),p.TgZ(48,"div",27),p.TgZ(49,"div",28),p._UZ(50,"div",34),p.TgZ(51,"div",30),p._uU(52),p.qZA(),p.qZA(),p.TgZ(53,"div",31),p._uU(54),p.ALo(55,"number"),p.qZA(),p.TgZ(56,"div",32),p._uU(57,"\u0111"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&t){const t=e.$implicit,i=p.MAs(12),a=p.oxw().$implicit,o=p.oxw();p.xp6(4),p.hij(" ",p.xi3(5,18,1e3*t.start_time,"d-M-yyyy"),""),p.xp6(3),p.Oqu(t.species_name),p.xp6(2),p.Q6J("matMenuTriggerFor",i),p.xp6(4),p.Q6J("routerLink",t.code),p.xp6(1),p.Oqu(a("DETAILS")),p.xp6(2),p.Oqu(a("DELETE")),p.xp6(2),p.Q6J("options",o.initChartProfit(t.profit,t.total_cost)),p.xp6(7),p.Oqu(a("SPAN")),p.xp6(2),p.hij(" ",o.convertOldSeed(t.seed_date,t.end_time),""),p.xp6(2),p.Oqu(a("DAY")),p.xp6(5),p.Oqu(a("DENSITY")),p.xp6(2),p.hij(" ",o.convertDensity(t.harvest_quantity)," "),p.xp6(2),p.Oqu(a("PIECE_M")),p.xp6(5),p.Oqu(a("OUTPUT_NO_UNIT")),p.xp6(2),p.Oqu(t.harvest_quantity/1e3),p.xp6(2),p.Oqu(a("TONES")),p.xp6(5),p.Oqu(a("PRICE_NO_UNIT")),p.xp6(2),p.Oqu(p.lcZ(55,21,t.harvest_price))}}function ht(t,e){if(1&t&&(p.ynx(0),p.TgZ(1,"div",1),p.YNc(2,At,1,0,"mat-progress-bar",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"div",6),p.TgZ(7,"div",7),p.TgZ(8,"div",8),p.TgZ(9,"div",9),p.TgZ(10,"h1"),p._uU(11),p.qZA(),p.qZA(),p.TgZ(12,"div"),p._UZ(13,"div",10),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(14,"div",6),p.TgZ(15,"div",7),p.TgZ(16,"div",11),p._uU(17),p.qZA(),p.TgZ(18,"div",12),p._uU(19),p.qZA(),p.qZA(),p.TgZ(20,"div",13),p.YNc(21,mt,58,23,"div",14),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.BQk()),2&t){const t=e.$implicit,i=p.oxw();p.xp6(2),p.Q6J("ngIf",i.loadingFlag.pending),p.xp6(9),p.Oqu(t("TITLE")),p.xp6(2),p.Q6J("options",i.options),p.xp6(4),p.Oqu(t("HISTORY")),p.xp6(2),p.Oqu(t("RECENT")),p.xp6(2),p.Q6J("ngForOf",i.seasons)}}let Tt=(()=>{class t{constructor(t,e,i,a){this.pondService=t,this.alertService=e,this._fuseConfirmationService=i,this._translate=a,this.loadingFlag=new r.E,this.options={},this.view=!1}ngOnInit(){this.getHistoryDate()}openConfirmRemoveSeason(t){this._fuseConfirmationService.open({title:this._translate.translate("CONFIRM"),message:this._translate.translate("SEASON.LIST.DELETE_CONFIRM")}).afterClosed().subscribe(e=>{e&&"confirmed"==e&&this.removeSeason(t)})}removeSeason(t){this.loadingFlag.setPending(!1),this.pondService.removeSeason(this.seasons[t].code).subscribe(e=>{1==e.status?(this.alertService.success(this._translate.translate("SEASON.LIST.DELETED")),this.seasons.splice(t,1)):this.alertService.error(e.message),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.alertService.error(this._translate.translate("CONNECT_ERROR"))})}getHistoryDate(){this.loadingFlag.setPending(!0),this.pondService.getHistory().subscribe(t=>{1==t.status?(this.seasons=t.data,this.initChart(),console.log(this.seasons)):this.alertService.error(t.message),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.alertService.error(this._translate.translate("CONNECT_ERROR"))})}initChart(){this.options={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[this._translate.translate("SEASON.HARVEST_MOD.QUANTITY"),this._translate.translate("SEASON.HARVEST_MOD.PRICE"),this._translate.translate("SEASON.HARVEST_MOD.SIZE")]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:[]},series:[{name:this._translate.translate("SEASON.LIST.OUTPUT"),type:"bar",data:[]},{name:this._translate.translate("SEASON.LIST.PRICE"),type:"bar",data:[]},{name:this._translate.translate("SEASON.LIST.SIZE"),type:"bar",data:[]}]},this.seasons.forEach(t=>{t.species_name&&(this.options.xAxis.data.push(t.species_name+" ("+c()(new Date(1e3*t.date)).format("DD/MM/YYYY")+")"),this.options.series[2].data.push(t.harvest_size))})}shortString(t){let e="",i=t.split(" ");for(var a=0;a<i.length;a++)e+=i[a][0].toUpperCase();return e}convertDensity(t){return(t/this.pondService.pond.area).toFixed(0)}convertOldSeed(t,e){return e>t&&e>0&&t>0?c().utc(c()(1e3*e).diff(c()(1e3*t))).format("d"):c().utc(c()().diff(c()(1e3*t))).format("d")}initChartProfit(t,e){return{tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:[{value:t,name:this._translate.translate("SEASON.LIST.PROFIT")},{value:e,name:this._translate.translate("SEASON.LIST.COST")}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.p),p.Y36(Z.c),p.Y36(Zt.R),p.Y36(A.Vn))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-season-list"]],decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[1,"flex","flex-col","flex-auto","min-w-0"],["mode","indeterminate",4,"ngIf"],[1,"flex-auto"],[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl"],[1,"flex","flex-wrap","w-full"],[1,"w-full","mt-12"],[1,"flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden","p-6"],[1,"flex","items-center","justify-between"],["echarts","",3,"options"],[1,"text-2xl","font-semibold","tracking-tight","leading-6"],[1,"font-medium","tracking-tight","text-secondary"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-2","gap-8","w-full","mt-6","md:mt-8"],["class","flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden p-6",4,"ngFor","ngForOf"],["mode","indeterminate"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"text-sm","truncate"],[1,"ml-2"],["mat-icon-button","",3,"matMenuTriggerFor"],["svgIcon","mat_outline:more_vert"],["conversionMenu","matMenu"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],[1,"flex","flex-col","flex-auto","mt-6","h-44"],[1,"mt-8"],[1,"-my-3","divide-y"],[1,"grid","grid-cols-3","py-3"],[1,"flex","items-center"],[1,"flex-0","w-2","h-2","rounded-full","bg-gray-400"],[1,"ml-3","truncate"],[1,"font-medium","text-right"],[1,"text-right","text-secondary"],[1,"flex-0","w-2","h-2","rounded-full","bg-green-400"],[1,"flex-0","w-2","h-2","rounded-full","bg-blue-400"]],template:function(t,e){1&t&&p.YNc(0,ht,22,6,"ng-container",0),2&t&&p.Q6J("translocoRead","SEASON.LIST")},directives:[A.KI,a.O5,H.w,a.sg,U.pW,_.lW,gt.p6,O.Hw,gt.VK,o.yS,gt.OP],pipes:[a.uU,a.JJ],styles:[""]}),t})();var qt=i(67813);const xt=[{path:"",component:(()=>{class t{constructor(t){this.pondService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.p))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-season"]],decls:1,vars:0,template:function(t,e){1&t&&p._UZ(0,"router-outlet")},directives:[o.lC],styles:[""]}),t})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list/:code",component:pt},{path:"move",component:qt.J},{path:"start",component:J},{path:"harvest",component:dt.U},{path:"list",component:Tt}]}];let ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[o.Bz.forChild(xt)],o.Bz]}),t})();var _t=i(44466),vt=i(4083),Ot=i(84900);let St=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[a.ez,_t.m,vt.q,Ot.Z,H.N,ft,A.y4]]}),t})()}}]);